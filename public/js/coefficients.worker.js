!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s="DFZ1")}({"3Cr/":function(t,e,r){"use strict";const n={deserialize:t=>Object.assign(Error(t.message),{name:t.name,stack:t.stack}),serialize:t=>({__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack})},i={deserialize:t=>(t=>t&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker)(t)?n.deserialize(t):t,serialize:t=>t instanceof Error?n.serialize(t):t};r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return a}));let o=i;function s(t){return o.deserialize(t)}function a(t){return o.serialize(t)}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"8oxB":function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},AHNb:function(t,e,r){"use strict";e.a={isWorkerRuntime:function(){return!("undefined"==typeof self||!self.postMessage)},postMessageToMaster:function(t,e){self.postMessage(t,e)},subscribeToMasterMessages:function(t){const e=e=>{t(e.data)};return self.addEventListener("message",e),()=>{self.removeEventListener("message",e)}}}},DFZ1:function(t,e,r){"use strict";r.r(e);var n=r("o0o1"),i=r.n(n),o=r("UB+q");const s=()=>"function"==typeof Symbol,a=t=>s()&&Boolean(Symbol[t]),u=t=>a(t)?Symbol[t]:"@@"+t;a("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const c=u("iterator"),l=u("observable"),f=u("species");function h(t,e){const r=t[e];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function p(t){let e=t.constructor;return void 0!==e&&null===(e=e[f])&&(e=void 0),void 0!==e?e:x}function d(t){d.log?d.log(t):setTimeout(()=>{throw t},0)}function g(t){Promise.resolve().then(()=>{try{t()}catch(t){d(t)}})}function y(t){const e=t._cleanup;if(void 0!==e&&(t._cleanup=void 0,e))try{if("function"==typeof e)e();else{const t=h(e,"unsubscribe");t&&t.call(e)}}catch(t){d(t)}}function m(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function v(t,e,r){t._state="running";const n=t._observer;try{const i=n?h(n,e):void 0;switch(e){case"next":i&&i.call(n,r);break;case"error":if(m(t),!i)throw r;i.call(n,r);break;case"complete":m(t),i&&i.call(n)}}catch(t){d(t)}"closed"===t._state?y(t):"running"===t._state&&(t._state="ready")}function _(t,e,r){if("closed"!==t._state)return"buffering"===t._state?(t._queue=t._queue||[],void t._queue.push({type:e,value:r})):"ready"!==t._state?(t._state="buffering",t._queue=[{type:e,value:r}],void g(()=>(function(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const r of e)if(v(t,r.type,r.value),"closed"===t._state)break}})(t))):void v(t,e,r)}class b{constructor(t,e){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const r=new w(this);try{this._cleanup=e.call(void 0,r)}catch(t){r.error(t)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(m(this),y(this))}}class w{constructor(t){this._subscription=t}get closed(){return"closed"===this._subscription._state}next(t){_(this._subscription,"next",t)}error(t){_(this._subscription,"error",t)}complete(){_(this._subscription,"complete")}}class x{constructor(t){if(!(this instanceof x))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,e,r){return"object"==typeof t&&null!==t||(t={next:t,error:e,complete:r}),new b(t,this._subscriber)}pipe(t,...e){let r=this;for(const n of[t,...e])r=n(r);return r}tap(t,e,r){const n="object"!=typeof t||null===t?{next:t,error:e,complete:r}:t;return new x(t=>this.subscribe({next(e){n.next&&n.next(e),t.next(e)},error(e){n.error&&n.error(e),t.error(e)},complete(){n.complete&&n.complete(),t.complete()},start(t){n.start&&n.start(t)}}))}forEach(t){return new Promise((e,r)=>{if("function"!=typeof t)return void r(new TypeError(t+" is not a function"));function n(){i.unsubscribe(),e()}const i=this.subscribe({next(e){try{t(e,n)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e})})}map(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(p(this))(e=>this.subscribe({next(r){let n=r;try{n=t(r)}catch(t){return e.error(t)}e.next(n)},error(t){e.error(t)},complete(){e.complete()}}))}filter(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(p(this))(e=>this.subscribe({next(r){try{if(!t(r))return}catch(t){return e.error(t)}e.next(r)},error(t){e.error(t)},complete(){e.complete()}}))}reduce(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function");const r=p(this),n=arguments.length>1;let i=!1,o=e;return new r(e=>this.subscribe({next(r){const s=!i;if(i=!0,!s||n)try{o=t(o,r)}catch(t){return e.error(t)}else o=r},error(t){e.error(t)},complete(){if(!i&&!n)return e.error(new TypeError("Cannot reduce an empty sequence"));e.next(o),e.complete()}}))}concat(...t){const e=p(this);return new e(r=>{let n,i=0;return function o(s){n=s.subscribe({next(t){r.next(t)},error(t){r.error(t)},complete(){i===t.length?(n=void 0,r.complete()):o(e.from(t[i++]))}})}(this),()=>{n&&(n.unsubscribe(),n=void 0)}})}flatMap(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");const e=p(this);return new e(r=>{const n=[],i=this.subscribe({next(i){let s;if(t)try{s=t(i)}catch(t){return r.error(t)}else s=i;const a=e.from(s).subscribe({next(t){r.next(t)},error(t){r.error(t)},complete(){const t=n.indexOf(a);t>=0&&n.splice(t,1),o()}});n.push(a)},error(t){r.error(t)},complete(){o()}});function o(){i.closed&&0===n.length&&r.complete()}return()=>{n.forEach(t=>t.unsubscribe()),i.unsubscribe()}})}[l](){return this}static from(t){const e="function"==typeof this?this:x;if(null==t)throw new TypeError(t+" is not an object");const r=h(t,l);if(r){const n=r.call(t);if(Object(n)!==n)throw new TypeError(n+" is not an object");return function(t){return t instanceof x}(n)&&n.constructor===e?n:new e(t=>n.subscribe(t))}if(a("iterator")){const r=h(t,c);if(r)return new e(e=>{g(()=>{if(!e.closed){for(const n of r.call(t))if(e.next(n),e.closed)return;e.complete()}})})}if(Array.isArray(t))return new e(e=>{g(()=>{if(!e.closed){for(const r of t)if(e.next(r),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){return new("function"==typeof this?this:x)(e=>{g(()=>{if(!e.closed){for(const r of t)if(e.next(r),e.closed)return;e.complete()}})})}static get[f](){return this}}s()&&Object.defineProperty(x,Symbol("extensions"),{value:{symbol:l,hostReportError:d},configurable:!0});var E=x;const S=Symbol("observers");var C=r("WVt+");function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=r("PXKB"),M={},N={},T=new class extends E{constructor(){super(t=>{this[S]=[...this[S]||[],t];return()=>{this[S]=this[S].filter(e=>e!==t)}}),this[S]=[]}complete(){this[S].forEach(t=>t.complete())}error(t){this[S].forEach(e=>e.error(t))}next(t){this[S].forEach(e=>e.next(t))}},O="/gisFiles/CUB_capacity-factor_IEC1.tif",L="/gisFiles/CUB_capacity-factor_IEC2.tif",R="/gisFiles/CUB_capacity-factor_IEC3.tif",k="/gisFiles/CUB_PVOUT.tif",A={progress:function(){return E.from(T)},get:function(t){var e,r,n,o,s,a,u,c,l,f,h,p;return i.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:e={},r=0;case 2:if(!(r<t.length)){d.next=42;break}if(n=JSON.parse(t[r].zone.feature),o=t[r].zone,e[o.id]={none:{zone:o.name,energy:0,costs:0,solarArea:0,windArea:0}},"eolic"!=o.type){d.next=22;break}s=0;case 8:if(!(s<t[r].wind_turbines.length)){d.next=22;break}if(a=t[r].wind_turbines[s],u=null,u=1==a.iec_class?O:2==a.iec_class?L:R,N[u]){d.next=16;break}return d.next=15,i.a.awrap(A.gridZoneGISValue(n,u));case 15:N[u]=d.sent;case 16:(c=A.getWindCoefficients(n,a,N[u])).zone=o.name,e[o.id][a.model]=c;case 19:s++,d.next=8;break;case 22:if("solar"!=o.type){d.next=37;break}l=0;case 24:if(!(l<t[r].solar_panels.length)){d.next=37;break}if(f=t[r].solar_panels[l],N[h=k]){d.next=31;break}return d.next=30,i.a.awrap(A.gridZoneGISValue(n,h));case 30:N[h]=d.sent;case 31:(p=A.getSolarCoefficients(n,f,N[h])).zone=o.name,e[o.id][f.model]=p;case 34:l++,d.next=24;break;case 37:N={},T.next((r+1)/t.length);case 39:r++,d.next=2;break;case 42:return d.abrupt("return",e);case 43:case"end":return d.stop()}}))},getSolarCoefficients:function(t,e,r){for(var n=C.bbox(t),i=C.area(t),o={units:"meters",mask:t},s=0,a=0;a<r.length;a++)s+=r[a].value;s/=r.length;var u=e.width,c=e.height,l=C.pointGrid(n,1.6*c*2,o),f=[];f.push(l.features[0]);for(a=1;a<l.features.length;a++){for(var h=l.features[a].geometry.coordinates,p=!0,d=0;d<f.length;d++)if(h[1]==f[d].geometry.coordinates[1]){p=!1;break}p&&f.push(l.features[a])}var g=C.bboxPolygon(n),y=0;for(a=0;a<f.length;a++)for(h=f[a];C.booleanPointInPolygon(h,g);){C.booleanPointInPolygon(h,t)&&(f[a]=h);var m=u/1e3,v=-90;h=C.destination(h,m,v)}var _=[];for(a=0;a<f.length;a++){for(var b=0,w=h=f[a],x=h;C.booleanPointInPolygon(h,g);){if(C.booleanPointInPolygon(h,t))x=h,b+=2,-1==w&&(w=h);else{if(x!=w){var E=C.destination(x,1.88*c/1e3,0),S=C.destination(w,1.88*c/1e3,0);r=C.featureCollection([w,x,S,E]);(I=C.convex(r)).properties.popupContent=b+2+" panels",I.properties.style={color:"black",opacity:.9,weight:1},_.push(I),y+=b+2,b=0}w=-1,x=-1}m=u/1e3,v=90;h=C.destination(h,m,v)}if(x!=w){var I;E=C.destination(x,1.88*c/1e3,0),S=C.destination(w,1.88*c/1e3,0),r=C.featureCollection([w,x,S,E]);(I=C.convex(r)).properties.popupContent=b+2+" panels",I.properties.style={color:"black",opacity:.9,weight:1},_.push(I),y+=b+2,b=0}}var P=C.featureCollection(_);return{type:"solar",model:e.model,number:y,energy:y*e.nominal_power*s/1e3,costs:(e.invest_cost*y+20*e.om_cost_per_year*y)/20,distribution:JSON.stringify(P),solarArea:i,windArea:0}},getWindCoefficients:function(t,e,r){var n=C.area(t),i=5*e.rotor_diameter/1e3;r.sort((function(t,e){return e.value-t.value}));var o=[],s=r[0].value;o.push(r[0].point);for(var a=1;a<r.length;a++){for(var u=r[a].point,c=!0,l=o.length-1;l>=0;l--)if(C.distance(u,o[l])<=i){c=!1;break}1==c&&(o.push(u),s+=r[a].value)}var f=C.featureCollection(o);return{type:"eolic",model:e.model,number:o.length,energy:s*e.nominal_power*8760,costs:(e.invest_cost*o.length+20*e.om_cost_per_year*o.length)/20,distribution:JSON.stringify(f),solarArea:0,windArea:n,capacity_factor:s/o.length}},gridZoneGISValue:function(t,e){var r,n,o,s,a,u,c,l,f,h,p,d,g,y,m,v,_,b,w,x,E,S,N;return i.a.async((function(T){for(;;)switch(T.prev=T.next){case 0:if(M[e]){T.next=7;break}return T.next=3,i.a.awrap(P.fromUrl(e));case 3:return r=T.sent,T.next=6,i.a.awrap(r.getImage());case 6:M[e]=T.sent;case 7:return n=M[e],o=C.bbox(t),s=C.area(t),a=1,s>1e4&&(a=Math.sqrt(s)/100),u={units:"meters",mask:t},c=C.pointGrid(o,a,u),o=[Math.min(o[0],o[2]),Math.max(o[1],o[3]),Math.max(o[0],o[2]),Math.min(o[1],o[3])],l=n.getOrigin(),f=I(l,2),h=f[0],p=f[1],d=n.getResolution(),g=I(d,2),y=g[0],m=g[1],v=[Math.floor((o[0]-h)/y),Math.floor((o[1]-p)/m),Math.ceil((o[2]-h)/y),Math.ceil((o[3]-p)/m)],T.next=20,i.a.awrap(n.readRasters({window:v}));case 20:for(_=T.sent,b=[],w=0;w<c.features.length;w++)x=c.features[w].geometry.coordinates,E=[Math.floor((x[0]-h)/y)-v[0],Math.floor((x[1]-p)/m)-v[1]],S=E[1]*_.width+E[0],N=_[0][S],b.push({point:c.features[w],value:N});return T.abrupt("return",b);case 24:case"end":return T.stop()}}))}};Object(o.a)(A)},PXKB:function(t,e,r){parcelRequire=function(e,n,i,o){var s,a="function"==typeof parcelRequire&&parcelRequire;function u(t,i){if(!n[t]){if(!e[t]){var o="function"==typeof parcelRequire&&parcelRequire;if(!i&&o)return o(t,!0);if(a)return a(t,!0);if("string"==typeof t)return r("klPL")(t);var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}l.resolve=function(r){return e[t][1][r]||r},l.cache={};var c=n[t]=new u.Module(t);e[t][0].call(c.exports,l,c,c.exports,this)}return n[t].exports;function l(t){return u(l.resolve(t))}}u.isParcelRequire=!0,u.Module=function(t){this.id=t,this.bundle=u,this.exports={}},u.modules=e,u.cache=n,u.parent=a,u.register=function(t,r){e[t]=[function(t,e){e.exports=r},{}]};for(var c=0;c<i.length;c++)try{u(i[c])}catch(e){s||(s=e)}if(i.length){var l=u(i[i.length-1]);t.exports=l}if(parcelRequire=u,s)throw s;return u}({b9XL:[function(t,e,r){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n},{}],E7HD:[function(t,e,r){e.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},{}],pxk2:[function(t,e,r){var n=t("../helpers/typeof"),i=t("./assertThisInitialized");e.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},{"../helpers/typeof":"b9XL","./assertThisInitialized":"E7HD"}],UJE0:[function(t,e,r){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n},{}],AkAO:[function(t,e,r){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(t,r)}e.exports=n},{}],d4H2:[function(t,e,r){var n=t("./setPrototypeOf");e.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},{"./setPrototypeOf":"AkAO"}],N3qF:[function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new P(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={};function g(){}function y(){}function m(){}var v={};v[o]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(M([])));b&&b!==r&&n.call(b,o)&&(v=b);var w=m.prototype=g.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){var r;this._invoke=function(i,o){function s(){return new e((function(r,s){!function r(i,o,s,a){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,a)}))}a(u.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:N}}function N(){return{value:e,done:!0}}return y.prototype=w.constructor=m,m.constructor=y,m[a]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[s]=function(){return this},t.AsyncIterator=E,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new E(u(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},x(w),w[a]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}("object"==typeof e?e.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},{}],PMvg:[function(t,e,r){e.exports=t("regenerator-runtime")},{"regenerator-runtime":"N3qF"}],IxO8:[function(t,e,r){e.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},{}],OUZ9:[function(t,e,r){e.exports=function(t){if(Array.isArray(t))return t}},{}],vKPt:[function(t,e,r){e.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}},{}],Rom6:[function(t,e,r){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},{}],HETk:[function(t,e,r){var n=t("./arrayWithHoles"),i=t("./iterableToArrayLimit"),o=t("./nonIterableRest");e.exports=function(t,e){return n(t)||i(t,e)||o()}},{"./arrayWithHoles":"OUZ9","./iterableToArrayLimit":"vKPt","./nonIterableRest":"Rom6"}],agGE:[function(t,e,r){function n(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}e.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,u,"next",t)}function u(t){n(s,i,o,a,u,"throw",t)}a(void 0)}))}}},{}],fcMS:[function(t,e,r){e.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},{}],P8NW:[function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},{}],rDCW:[function(t,e,r){},{}],FRpO:[function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function f(t,e,r,n){var i,o,s;if(c(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=l(t))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,function(t){console&&console.warn&&console.warn(t)}(a)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):y(i,i.length)}function g(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=y(u,c);for(r=0;r<c;++r)o(l[r],this,e)}return!0},a.prototype.addListener=function(t,e){return f(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return f(this,t,e,!0)},a.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,o,s;if(c(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return d(this,t,!0)},a.prototype.rawListeners=function(t){return d(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},{}],ExO1:[function(t,e,r){e.exports=t("events").EventEmitter},{events:"FRpO"}],yh9p:[function(t,e,r){"use strict";r.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){var e,r,n=c(t),s=n[0],a=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(f(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function f(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(l(n));return i.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],JgNJ:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*g}},{}],REa7:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],dskh:[function(t,e,r){arguments[3];var n=arguments[3],i=t("base64-js"),o=t("ieee754"),s=t("isarray");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function u(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(u()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return f(this,t,e,r)}function f(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,r,n):"string"==typeof e?g(t,e,r):v(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function p(t,e,r,n){return h(e),e<=0?c(t,e):void 0!==r?"string"==typeof n?c(t,e).fill(r,n):c(t,e).fill(r):c(t,e)}function d(t,e){if(h(e),t=c(t,e<0?0:0|_(e)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function g(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|w(e,r),i=(t=c(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}function y(t,e){var r=e.length<0?0:0|_(e.length);t=c(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function m(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=y(t,e),t}function v(t,e){if(l.isBuffer(e)){var r=0|_(e.length);return 0===(t=c(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||rt(e.length)?c(t,0):y(t,e);if("Buffer"===e.type&&s(e.data))return y(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),l.alloc(+t)}function w(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return tt(t).length;default:if(n)return J(t).length;e=(""+e).toLowerCase(),n=!0}}function x(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,r);case"utf8":case"utf-8":return R(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return F(this,e,r);case"base64":return L(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function E(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function S(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:C(t,e,r,n,i);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):C(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function C(t,e,r,n,i){var o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function I(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function P(t,e,r,n){return et(J(e,t.length-r),t,r,n)}function M(t,e,r,n){return et(Q(e),t,r,n)}function N(t,e,r,n){return M(t,e,r,n)}function T(t,e,r,n){return et(tt(e),t,r,n)}function O(t,e,r,n){return et($(e,t.length-r),t,r,n)}function L(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function R(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return A(n)}r.Buffer=l,r.SlowBuffer=b,r.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:a(),r.kMaxLength=u(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,r){return f(null,t,e,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,r){return p(null,t,e,r)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},l.byteLength=w,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)E(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):x.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,r,n,i){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r),f=0;f<a;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return S(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return S(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return I(this,t,e,r);case"utf8":case"utf-8":return P(this,t,e,r);case"ascii":return M(this,t,e,r);case"latin1":case"binary":return N(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function A(t){var e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=k));return r}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function F(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function j(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=Z(t[o]);return i}function B(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function G(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function q(t,e,r,n,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function U(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function Y(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function V(t,e,r,n,i){return i||Y(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function X(t,e,r,n,i){return i||Y(t,0,r,8),o.write(t,e,r,n,52,8),r+8}l.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=l.prototype;else{var i=e-t;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},l.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||G(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||G(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUInt8=function(t,e){return e||G(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||G(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||G(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||G(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||G(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||G(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||G(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||G(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||G(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){e||G(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return e||G(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||G(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||G(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||G(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||G(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||G(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||q(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},l.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||q(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},l.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):z(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);q(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);q(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):z(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):z(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,r){return V(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return V(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return X(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return X(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=l.isBuffer(t)?t:J(new l(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function H(t){if((t=K(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function K(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function J(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Q(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function $(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}function tt(t){return i.toByteArray(H(t))}function et(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function rt(t){return t!=t}},{"base64-js":"yh9p",ieee754:"JgNJ",isarray:"REa7",buffer:"dskh"}],VCcH:[function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=t("buffer").Buffer,u=t("util").inspect,c=u&&u.custom||"inspect";function l(t,e,r){a.prototype.copy.call(t,e,r)}e.exports=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return function(t,e,r){e&&s(t.prototype,e),r&&s(t,r)}(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e=a.allocUnsafe(t>>>0),r=this.head,n=0;r;)l(r.data,e,n),n+=r.data.length,r=r.next;return e}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:c,value:function(t,e){return u(this,i({},e,{depth:0,customInspect:!1}))}}]),t}()},{buffer:"dskh",util:"rDCW"}],pBGv:[function(t,e,r){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function c(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,f=[],h=!1,p=-1;function d(){h&&l&&(h=!1,l.length?f=l.concat(f):p=-1,f.length&&g())}function g(){if(!h){var t=u(d);h=!0;for(var e=f.length;e;){for(l=f,f=[];++p<e;)l&&l[p].run();p=-1,e=f.length}l=null,h=!1,c(t)}}function y(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new y(t,e)),1!==f.length||h||u(g)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],GRUB:[function(t,e,r){t("process");var n=t("process");function i(t,e){s(t,e),o(t)}function o(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return a||u?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,t)):n.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,t)):n.nextTick(i,r,t):e?(n.nextTick(o,r),e(t)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}},{process:"pBGv"}],Yj9o:[function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={};function o(t,e,r){r||(r=Error);var n=function(t){function r(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(r,t),r}(r);n.prototype.name=r.name,n.prototype.code=t,i[t]=n}function s(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}o("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(t,e,r){var i,o;if("string"==typeof e&&function(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))o="The ".concat(t," ").concat(i," ").concat(s(e,"type"));else{var a=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(a," ").concat(i," ").concat(s(e,"type"))}return o+". Received type ".concat(n(r))}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},{}],TWVJ:[function(t,e,r){"use strict";var n=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},{"../../../errors":"Yj9o"}],Bm0n:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},{}],yM1o:[function(t,e,r){arguments[3];var n=arguments[3];function i(t,e){if(o("noDeprecation"))return t;var r=!1;return function(){if(!r){if(o("throwDeprecation"))throw new Error(e);o("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}function o(t){try{if(!n.localStorage)return!1}catch(t){return!1}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}e.exports=i},{}],WSyY:[function(t,e,r){arguments[3],t("process");var n,i=arguments[3],o=t("process");function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){X(e,t)}}e.exports=N,N.WritableState=M;var a={deprecate:t("util-deprecate")},u=t("./internal/streams/stream"),c=t("buffer").Buffer,l=i.Uint8Array||function(){};function f(t){return c.from(t)}function h(t){return c.isBuffer(t)||t instanceof l}var p,d=t("./internal/streams/destroy"),g=t("./internal/streams/state"),y=g.getHighWaterMark,m=t("../errors").codes,v=m.ERR_INVALID_ARG_TYPE,_=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_MULTIPLE_CALLBACK,w=m.ERR_STREAM_CANNOT_PIPE,x=m.ERR_STREAM_DESTROYED,E=m.ERR_STREAM_NULL_VALUES,S=m.ERR_STREAM_WRITE_AFTER_END,C=m.ERR_UNKNOWN_ENCODING,I=d.errorOrDestroy;function P(){}function M(e,r,i){n=n||t("./_stream_duplex"),e=e||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=y(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){F(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function N(e){var r=this instanceof(n=n||t("./_stream_duplex"));if(!r&&!p.call(N,this))return new N(e);this._writableState=new M(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function T(t,e){var r=new S;I(t,r),o.nextTick(e,r)}function O(t,e,r,n){var i;return null===r?i=new E:"string"==typeof r||e.objectMode||(i=new v("chunk",["string","Buffer"],r)),!i||(I(t,i),o.nextTick(n,i),!1)}function L(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,r)),e}function R(t,e,r,n,i,o){if(!r){var s=L(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else k(t,e,!1,a,n,i,o);return u}function k(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new x("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function A(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(Y,t,e),t._writableState.errorEmitted=!0,I(t,n)):(i(n),t._writableState.errorEmitted=!0,I(t,n),Y(t,e))}function D(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function F(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if("function"!=typeof i)throw new b;if(D(r),e)A(t,r,n,e,i);else{var s=q(r)||t.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||G(t,r),n?o.nextTick(j,t,r,s,i):j(t,r,s,i)}}function j(t,e,r,n){r||B(t,e),e.pendingcb--,n(),Y(t,e)}function B(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function G(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,k(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(k(t,e,!1,e.objectMode?1:c.length,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function q(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function U(t,e){t._final((function(r){e.pendingcb--,r&&I(t,r),e.prefinished=!0,t.emit("prefinish"),Y(t,e)}))}function z(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,o.nextTick(U,t,e)))}function Y(t,e){var r=q(e);if(r&&(z(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function V(t,e,r){e.ending=!0,Y(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function X(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}t("inherits")(N,u),M.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(M.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===N&&t&&t._writableState instanceof M}})):p=function(t){return t instanceof this},N.prototype.pipe=function(){I(this,new w)},N.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&h(t);return o&&!c.isBuffer(t)&&(t=f(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=P),n.ending?T(this,r):(o||O(this,n,t,r))&&(n.pendingcb++,i=R(this,n,o,t,e,r)),i},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||G(this,t))},N.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new C(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),N.prototype._write=function(t,e,r){r(new _("_write()"))},N.prototype._writev=null,N.prototype.end=function(t,e,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||V(this,n,r),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),N.prototype.destroy=d.destroy,N.prototype._undestroy=d.undestroy,N.prototype._destroy=function(t,e){e(t)}},{"util-deprecate":"yM1o","./internal/streams/stream":"ExO1",buffer:"dskh","./internal/streams/destroy":"GRUB","./internal/streams/state":"TWVJ","../errors":"Yj9o",inherits:"Bm0n","./_stream_duplex":"Hba0",process:"pBGv"}],Hba0:[function(t,e,r){t("process");var n=t("process"),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=l;var o=t("./_stream_readable"),s=t("./_stream_writable");t("inherits")(l,o);for(var a=i(s.prototype),u=0;u<a.length;u++){var c=a[u];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(t){if(!(this instanceof l))return new l(t);o.call(this,t),s.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||n.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},{"./_stream_readable":"DHrQ","./_stream_writable":"WSyY",inherits:"Bm0n",process:"pBGv"}],Wugr:[function(t,e,r){var n=t("buffer"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:"dskh"}],z0rv:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=c,this.end=l,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=f,this.end=h,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function u(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function f(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}r.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":"Wugr"}],mrEY:[function(t,e,r){"use strict";var n=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&e.readable,a=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||l()},c=e._writableState&&e._writableState.finished,l=function(){a=!1,c=!0,s||o.call(e)},f=e._readableState&&e._readableState.endEmitted,h=function(){s=!1,f=!0,a||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return s&&!f?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):a&&!c?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},g=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",d),e.req?g():e.on("request",g)):a&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",h),e.on("finish",l),!1!==r.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",l),e.removeListener("abort",d),e.removeListener("request",g),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",h),e.removeListener("error",p),e.removeListener("close",d)}}},{"../../../errors":"Yj9o"}],AOGM:[function(t,e,r){t("process");var n,i=t("process");function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=t("./end-of-stream"),a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function d(t,e){return{value:t,done:e}}function g(t){var e=t[a];if(null!==e){var r=t[p].read();null!==r&&(t[f]=null,t[a]=null,t[u]=null,e(d(r,!1)))}}function y(t){i.nextTick(g,t)}var m=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((o(n={get stream(){return this[p]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise((function(e,r){i.nextTick((function(){t[c]?r(t[c]):e(d(void 0,!0))}))}));var r,n=this[f];if(n)r=new Promise(function(t,e){return function(r,n){t.then((function(){e[l]?r(d(void 0,!0)):e[h](r,n)}),n)}}(n,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(d(o,!1));r=new Promise(this[h])}return this[f]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var t=this;return new Promise((function(e,r){t[p].destroy(null,(function(t){t?r(t):e(d(void 0,!0))}))}))})),n),m);e.exports=function(t){var e,r=Object.create(v,(o(e={},p,{value:t,writable:!0}),o(e,a,{value:null,writable:!0}),o(e,u,{value:null,writable:!0}),o(e,c,{value:null,writable:!0}),o(e,l,{value:t._readableState.endEmitted,writable:!0}),o(e,h,{value:function(t,e){var n=r[p].read();n?(r[f]=null,r[a]=null,r[u]=null,t(d(n,!1))):(r[a]=t,r[u]=e)},writable:!0}),e));return r[f]=null,s(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[u];return null!==e&&(r[f]=null,r[a]=null,r[u]=null,e(t)),void(r[c]=t)}var n=r[a];null!==n&&(r[f]=null,r[a]=null,r[u]=null,n(d(void 0,!0))),r[l]=!0})),t.on("readable",y.bind(null,r)),r}},{"./end-of-stream":"mrEY",process:"pBGv"}],Rr4m:[function(t,e,r){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],DHrQ:[function(t,e,r){arguments[3],t("process");var n,i=arguments[3],o=t("process");e.exports=T,T.ReadableState=N;t("events").EventEmitter;var s=function(t,e){return t.listeners(e).length},a=t("./internal/streams/stream"),u=t("buffer").Buffer,c=i.Uint8Array||function(){};function l(t){return u.from(t)}function f(t){return u.isBuffer(t)||t instanceof c}var h,p=t("util");h=p&&p.debuglog?p.debuglog("stream"):function(){};var d,g,y,m=t("./internal/streams/buffer_list"),v=t("./internal/streams/destroy"),_=t("./internal/streams/state"),b=_.getHighWaterMark,w=t("../errors").codes,x=w.ERR_INVALID_ARG_TYPE,E=w.ERR_STREAM_PUSH_AFTER_EOF,S=w.ERR_METHOD_NOT_IMPLEMENTED,C=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(T,a);var I=v.errorOrDestroy,P=["error","close","destroy","pause","resume"];function M(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function N(e,r,i){n=n||t("./_stream_duplex"),e=e||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=b(this,e,"readableHighWaterMark",i),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=t("string_decoder/").StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function T(e){if(n=n||t("./_stream_duplex"),!(this instanceof T))return new T(e);var r=this instanceof n;this._readableState=new N(e,this,r),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function O(t,e,r,n,i){h("readableAddChunk",e);var o,s=t._readableState;if(null===e)s.reading=!1,F(t,s);else if(i||(o=R(s,e)),o)I(t,o);else if(s.objectMode||e&&e.length>0)if("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=l(e)),n)s.endEmitted?I(t,new C):L(t,s,e,!0);else if(s.ended)I(t,new E);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?L(t,s,e,!1):G(t,s)):L(t,s,e,!1)}else n||(s.reading=!1,G(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function L(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&j(t)),G(t,e)}function R(t,e){var r;return f(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new x("chunk",["string","Buffer","Uint8Array"],e)),r}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(t,e){e(t)},T.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=u.from(t,e),e=""),r=!0),O(this,t,e,!1,r)},T.prototype.unshift=function(t){return O(this,t,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){d||(d=t("string_decoder/").StringDecoder);var r=new d(e);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var k=1073741824;function A(t){return t>=k?t=k:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function D(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=A(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function F(t,e){if(h("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?j(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,B(t)))}}function j(t){var e=t._readableState;h("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,o.nextTick(B,t))}function B(t){var e=t._readableState;h("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,W(t)}function G(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(q,t,e))}function q(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(h("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function U(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,W(t))}}function z(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Y(t){h("readable nexttick read 0"),t.read(0)}function V(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(X,t,e))}function X(t,e){h("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),W(t),e.flowing&&!e.reading&&t.read(0)}function W(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function H(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function K(t){var e=t._readableState;h("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,o.nextTick(Z,e,t))}function Z(t,e){if(h("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function J(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}T.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?K(this):j(this),null;if(0===(t=D(t,e))&&e.ended)return 0===e.length&&K(this),null;var n,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=D(r,e))),null===(n=t>0?H(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&K(this)),null!==n&&this.emit("data",n),n},T.prototype._read=function(t){I(this,new S("_read()"))},T.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,h("pipe count=%d opts=%j",n.pipesCount,e);var i=e&&!1===e.end||t===o.stdout||t===o.stderr?g:a;function a(){h("onend"),t.end()}n.endEmitted?o.nextTick(i):r.once("end",i),t.on("unpipe",(function e(i,o){h("onunpipe"),i===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,h("cleanup"),t.removeListener("close",p),t.removeListener("finish",d),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",l),c=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}));var u=U(r);t.on("drain",u);var c=!1;function l(e){h("ondata");var i=t.write(e);h("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==J(n.pipes,t))&&!c&&(h("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(e){h("onerror",e),g(),t.removeListener("error",f),0===s(t,"error")&&I(t,e)}function p(){t.removeListener("finish",d),g()}function d(){h("onfinish"),t.removeListener("close",p),g()}function g(){h("unpipe"),r.unpipe(t)}return r.on("data",l),M(t,"error",f),t.once("close",p),t.once("finish",d),t.emit("pipe",r),n.flowing||(h("pipe resume"),r.resume()),t},T.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=J(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},T.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,h("on readable",n.length,n.reading),n.length?j(this):n.reading||o.nextTick(Y,this))),r},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&o.nextTick(z,this),r},T.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||o.nextTick(z,this),e},T.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!t.readableListening,V(this,t)),t.paused=!1,this},T.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<P.length;o++)t.on(P[o],this.emit.bind(this,P[o]));return this._read=function(e){h("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===g&&(g=t("./internal/streams/async_iterator")),g(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),T._fromList=H,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,r){return void 0===y&&(y=t("./internal/streams/from")),y(T,e,r)})},{events:"FRpO","./internal/streams/stream":"ExO1",buffer:"dskh",util:"rDCW","./internal/streams/buffer_list":"VCcH","./internal/streams/destroy":"GRUB","./internal/streams/state":"TWVJ","../errors":"Yj9o",inherits:"Bm0n","./_stream_duplex":"Hba0","string_decoder/":"z0rv","./internal/streams/async_iterator":"AOGM","./internal/streams/from":"Rr4m",process:"pBGv"}],tlBz:[function(t,e,r){"use strict";e.exports=l;var n=t("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,u=t("./_stream_duplex");function c(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",f)}function f(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(e,r){h(t,e,r)}))}function h(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}t("inherits")(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new i("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},{"../errors":"Yj9o","./_stream_duplex":"Hba0",inherits:"Bm0n"}],nwyA:[function(t,e,r){"use strict";e.exports=i;var n=t("./_stream_transform");function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}t("inherits")(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":"tlBz",inherits:"Bm0n"}],AJFC:[function(t,e,r){"use strict";var n;var i=t("../../../errors").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function u(e,r,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=t("./end-of-stream")),n(e,{readable:r,writable:i},(function(t){if(t)return o(t);a=!0,o()}));var u=!1;return function(t){if(!a&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(t){t()}function l(t,e){return t.pipe(e)}function f(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}e.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=f(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var s=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){n||(n=t),t&&s.forEach(c),o||(s.forEach(c),i(n))}))}));return e.reduce(l)}},{"../../../errors":"Yj9o","./end-of-stream":"mrEY"}],tzeh:[function(t,e,r){(r=e.exports=t("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js"),r.finished=t("./lib/internal/streams/end-of-stream.js"),r.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_readable.js":"DHrQ","./lib/_stream_writable.js":"WSyY","./lib/_stream_duplex.js":"Hba0","./lib/_stream_transform.js":"tlBz","./lib/_stream_passthrough.js":"nwyA","./lib/internal/streams/end-of-stream.js":"mrEY","./lib/internal/streams/pipeline.js":"AJFC"}],vexR:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],tcrG:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],gfUn:[function(t,e,r){t("process");var n=t("process"),i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;r.format=function(t){if(!_(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(u(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),a=n[r];r<i;a=n[++r])m(a)||!x(a)?s+=" "+a:s+=" "+u(a);return s},r.deprecate=function(t,e){if(void 0!==n&&!0===n.noDeprecation)return t;if(void 0===n)return function(){return r.deprecate(t,e).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(e);n.traceDeprecation?console.trace(e):console.error(e),i=!0}return t.apply(this,arguments)}};var s,a={};function u(t,e){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(e)?n.showHidden=e:e&&r._extend(n,e),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,t,n.depth)}function c(t,e){var r=u.styles[e];return r?"["+u.colors[r][0]+"m"+t+"["+u.colors[r][1]+"m":t}function l(t,e){return t}function f(t,e,n){if(t.customInspect&&e&&C(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return _(i)||(i=f(t,i,n)),i}var o=h(t,e);if(o)return o;var s=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),S(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(e);if(0===s.length){if(C(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(w(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(S(e))return p(e)}var c,l="",y=!1,m=["{","}"];return g(e)&&(y=!0,m=["[","]"]),C(e)&&(l=" [Function"+(e.name?": "+e.name:"")+"]"),w(e)&&(l=" "+RegExp.prototype.toString.call(e)),E(e)&&(l=" "+Date.prototype.toUTCString.call(e)),S(e)&&(l=" "+p(e)),0!==s.length||y&&0!=e.length?n<0?w(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=y?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)T(e,String(s))?o.push(d(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(t,e,r,n,i,!0))})),o}(t,e,n,a,s):s.map((function(r){return d(t,e,n,a,r,y)})),t.seen.pop(),function(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(c,l,m)):m[0]+l+m[1]}function h(t,e){if(b(e))return t.stylize("undefined","undefined");if(_(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return v(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),T(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=m(r)?f(t,u.value,null):f(t,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function g(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return void 0===t}function w(t){return x(t)&&"[object RegExp]"===I(t)}function x(t){return"object"==typeof t&&null!==t}function E(t){return x(t)&&"[object Date]"===I(t)}function S(t){return x(t)&&("[object Error]"===I(t)||t instanceof Error)}function C(t){return"function"==typeof t}function I(t){return Object.prototype.toString.call(t)}function P(t){return t<10?"0"+t.toString(10):t.toString(10)}r.debuglog=function(t){if(b(s)&&(s=""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(s)){var e=n.pid;a[t]=function(){var n=r.format.apply(r,arguments);console.error("%s %d: %s",t,e,n)}}else a[t]=function(){};return a[t]},r.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=g,r.isBoolean=y,r.isNull=m,r.isNullOrUndefined=function(t){return null==t},r.isNumber=v,r.isString=_,r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=b,r.isRegExp=w,r.isObject=x,r.isDate=E,r.isError=S,r.isFunction=C,r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),M[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.log=function(){console.log("%s - %s",N(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!x(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}r.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(O&&t[O]){var e;if("function"!=typeof(e=t[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),O&&Object.defineProperty(e,O,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},r.promisify.custom=O,r.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var i=e.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,e).then((function(t){n.nextTick(s,null,t)}),(function(t){n.nextTick(L,t,s)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,i(t)),e}},{"./support/isBuffer":"vexR",inherits:"tcrG",process:"pBGv"}],m2P9:[function(t,e,r){t("process");var n=t("process"),i=t("readable-stream").Transform,o=t("util").inherits;function s(t){i.call(this,t),this._destroyed=!1}function a(t,e,r){r(null,t)}function u(t){return function(e,r,n){return"function"==typeof e&&(n=r,r=e,e={}),"function"!=typeof r&&(r=a),"function"!=typeof n&&(n=null),t(e,r,n)}}o(s,i),s.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;n.nextTick((function(){t&&e.emit("error",t),e.emit("close")}))}},e.exports=u((function(t,e,r){var n=new s(t);return n._transform=e,r&&(n._flush=r),n})),e.exports.ctor=u((function(t,e,r){function n(e){if(!(this instanceof n))return new n(e);this.options=Object.assign({},t,e),s.call(this,this.options)}return o(n,s),n.prototype._transform=e,r&&(n.prototype._flush=r),n})),e.exports.obj=u((function(t,e,r){var n=new s(Object.assign({objectMode:!0,highWaterMark:16},t));return n._transform=e,r&&(n._flush=r),n}))},{"readable-stream":"tzeh",util:"gfUn",process:"pBGv"}],JO74:[function(t,e,r){function n(t,e){"use strict";var r=(e=e||{}).pos||0,i="<",o="<".charCodeAt(0),s=">",a=">".charCodeAt(0),u="-".charCodeAt(0),c="/".charCodeAt(0),l="!".charCodeAt(0),f="'".charCodeAt(0),h='"'.charCodeAt(0);function p(){for(var e=[];t[r];)if(t.charCodeAt(r)==o){if(t.charCodeAt(r+1)===c)return(r=t.indexOf(s,r))+1&&(r+=1),e;if(t.charCodeAt(r+1)===l){if(t.charCodeAt(r+2)==u){for(;-1!==r&&(t.charCodeAt(r)!==a||t.charCodeAt(r-1)!=u||t.charCodeAt(r-2)!=u||-1==r);)r=t.indexOf(s,r+1);-1===r&&(r=t.length)}else for(r+=2;t.charCodeAt(r)!==a&&t[r];)r++;r++;continue}var n=v();e.push(n)}else{var i=d();i.trim().length>0&&e.push(i),r++}return e}function d(){var e=r;return-2==(r=t.indexOf(i,r)-1)&&(r=t.length),t.slice(e,r+1)}var g="\n\t>/= ";function y(){for(var e=r;-1===g.indexOf(t[r])&&t[r];)r++;return t.slice(e,r)}var m=e.noChildNodes||["img","br","input","meta","link"];function v(){r++;const e=y(),n={};let i=[];for(;t.charCodeAt(r)!==a&&t[r];){var o=t.charCodeAt(r);if(o>64&&o<91||o>96&&o<123){for(var s=y(),u=t.charCodeAt(r);u&&u!==f&&u!==h&&!(u>64&&u<91||u>96&&u<123)&&u!==a;)r++,u=t.charCodeAt(r);if(u===f||u===h){var l=_();if(-1===r)return{tagName:e,attributes:n,children:i}}else l=null,r--;n[s]=l}r++}if(t.charCodeAt(r-1)!==c)if("script"==e){var d=r+1;r=t.indexOf("<\/script>",r),i=[t.slice(d,r-1)],r+=9}else"style"==e?(d=r+1,r=t.indexOf("</style>",r),i=[t.slice(d,r-1)],r+=8):-1==m.indexOf(e)&&(r++,i=p());else r++;return{tagName:e,attributes:n,children:i}}function _(){var e=t[r],n=++r;return r=t.indexOf(e,n),t.slice(n,r)}var b,w=null;if(void 0!==e.attrValue)for(e.attrName=e.attrName||"id",w=[];-1!==(void 0,b=new RegExp("\\s"+e.attrName+"\\s*=['\"]"+e.attrValue+"['\"]").exec(t),r=b?b.index:-1);)-1!==(r=t.lastIndexOf("<",r))&&w.push(v()),t=t.substr(r),r=0;else w=e.parseNode?v():p();return e.filter&&(w=n.filter(w,e.filter)),e.setPos&&(w.pos=r),w}n.simplify=function(t){var e={};if(!t.length)return"";if(1===t.length&&"string"==typeof t[0])return t[0];for(var r in t.forEach((function(t){if("object"==typeof t){e[t.tagName]||(e[t.tagName]=[]);var r=n.simplify(t.children||[]);e[t.tagName].push(r),t.attributes&&(r._attributes=t.attributes)}})),e)1==e[r].length&&(e[r]=e[r][0]);return e},n.filter=function(t,e){var r=[];return t.forEach((function(t){if("object"==typeof t&&e(t)&&r.push(t),t.children){var i=n.filter(t.children,e);r=r.concat(i)}})),r},n.stringify=function(t){var e="";function r(t){if(t)for(var r=0;r<t.length;r++)"string"==typeof t[r]?e+=t[r].trim():n(t[r])}function n(t){for(var n in e+="<"+t.tagName,t.attributes)null===t.attributes[n]?e+=" "+n:-1===t.attributes[n].indexOf('"')?e+=" "+n+'="'+t.attributes[n].trim()+'"':e+=" "+n+"='"+t.attributes[n].trim()+"'";e+=">",r(t.children),e+="</"+t.tagName+">"}return r(t),e},n.toContentString=function(t){if(Array.isArray(t)){var e="";return t.forEach((function(t){e=(e+=" "+n.toContentString(t)).trim()})),e}return"object"==typeof t?n.toContentString(t.children):" "+t},n.getElementById=function(t,e,r){var i=n(t,{attrValue:e});return r?n.simplify(i):i[0]},n.getElementsByClassName=function(t,e,r){const i=n(t,{attrName:"class",attrValue:"[a-zA-Z0-9-s ]*"+e+"[a-zA-Z0-9-s ]*"});return r?n.simplify(i):i},n.parseStream=function(e,r){if("string"==typeof r&&(r=r.length+2),"string"==typeof e){var i=t("fs");e=i.createReadStream(e,{start:r}),r=0}var o=r,s="";return e.on("data",(function(t){s+=t;for(var r=0;;){if(!(o=s.indexOf("<",o)+1))return void(o=r);if("/"!==s[o+1]){var i=n(s,{pos:o-1,parseNode:!0,setPos:!0});if((o=i.pos)>s.length-1||o<r)return s=s.slice(r),o=0,void(r=0);e.emit("xml",i),r=o}else o+=1,r=pos}})),e.on("end",(function(){console.log("end")})),e},n.transformStream=function(e){const r=t("through2");"string"==typeof e&&(e=e.length+2);var i=e||0,o="";return r({readableObjectMode:!0},(function(t,e,r){o+=t;for(var s=0;;){if(!(i=o.indexOf("<",i)+1))return i=s,r();if("/"!==o[i+1]){var a=n(o,{pos:i-1,parseNode:!0,setPos:!0});if((i=a.pos)>o.length-1||i<s)return o=o.slice(s),i=0,s=0,r();this.push(a),s=i}else i+=1,s=pos}r()}))},"object"==typeof e&&(e.exports=n,n.xml=n)},{fs:"rDCW",through2:"m2P9"}],j27V:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.geoKeys=r.geoKeyNames=r.ExtraSamplesValues=r.photometricInterpretations=r.fieldTypes=r.fieldTypeNames=r.arrayFields=r.fieldTagTypes=r.fieldTags=r.fieldTagNames=void 0;var n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"};r.fieldTagNames=n;var i={};for(var o in r.fieldTags=i,n)n.hasOwnProperty(o)&&(i[n[o]]=parseInt(o,10));r.fieldTagTypes={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"};var s=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets];r.arrayFields=s;var a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"};r.fieldTypeNames=a;var u={};for(var c in r.fieldTypes=u,a)a.hasOwnProperty(c)&&(u[a[c]]=parseInt(c,10));r.photometricInterpretations={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9};r.ExtraSamplesValues={Unspecified:0,Assocalpha:1,Unassalpha:2};var l={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};r.geoKeyNames=l;var f={};for(var h in r.geoKeys=f,l)l.hasOwnProperty(h)&&(f[l[h]]=parseInt(h,10))},{}],fpBl:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromWhiteIsZero=function(t,e){for(var r,n=t.width,i=t.height,o=new Uint8Array(n*i*3),s=0,a=0;s<t.length;++s,a+=3)r=256-t[s]/e*256,o[a]=r,o[a+1]=r,o[a+2]=r;return o},r.fromBlackIsZero=function(t,e){for(var r,n=t.width,i=t.height,o=new Uint8Array(n*i*3),s=0,a=0;s<t.length;++s,a+=3)r=t[s]/e*256,o[a]=r,o[a+1]=r,o[a+2]=r;return o},r.fromPalette=function(t,e){for(var r=t.width,n=t.height,i=new Uint8Array(r*n*3),o=e.length/3,s=e.length/3*2,a=0,u=0;a<t.length;++a,u+=3){var c=t[a];i[u]=e[c]/65536*256,i[u+1]=e[c+o]/65536*256,i[u+2]=e[c+s]/65536*256}return i},r.fromCMYK=function(t){for(var e=t.width,r=t.height,n=new Uint8Array(e*r*3),i=0,o=0;i<t.length;i+=4,o+=3){var s=t[i],a=t[i+1],u=t[i+2],c=t[i+3];n[o]=(255-s)/256*255*((255-c)/256),n[o+1]=(255-a)/256*255*((255-c)/256),n[o+2]=(255-u)/256*255*((255-c)/256)}return n},r.fromYCbCr=function(t){for(var e=t.width,r=t.height,n=new Uint8ClampedArray(e*r*3),i=0,o=0;i<t.length;i+=3,o+=3){var s=t[i],a=t[i+1],u=t[i+2];n[o]=s+1.402*(u-128),n[o+1]=s-.34414*(a-128)-.71414*(u-128),n[o+2]=s+1.772*(a-128)}return n},r.fromCIELab=function(t){for(var e=t.width,r=t.height,s=new Uint8Array(e*r*3),a=0,u=0;a<t.length;a+=3,u+=3){var c=(t[a+0]+16)/116,l=(t[a+1]<<24>>24)/500+c,f=c-(t[a+2]<<24>>24)/200,h=void 0,p=void 0,d=void 0;p=-.9689*(l=n*(l*l*l>.008856?l*l*l:(l-16/116)/7.787))+1.8758*(c=i*(c*c*c>.008856?c*c*c:(c-16/116)/7.787))+.0415*(f=o*(f*f*f>.008856?f*f*f:(f-16/116)/7.787)),d=.0557*l+-.204*c+1.057*f,h=(h=3.2406*l+-1.5372*c+-.4986*f)>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,p=p>.0031308?1.055*Math.pow(p,1/2.4)-.055:12.92*p,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,s[u]=255*Math.max(0,Math.min(1,h)),s[u+1]=255*Math.max(0,Math.min(1,p)),s[u+2]=255*Math.max(0,Math.min(1,d))}return s};var n=.95047,i=1,o=1.08883},{}],IKSA:[function(t,e,r){"use strict";function n(t,e){var r=t.length-e,n=0;do{for(var i=e;i>0;i--)t[n+e]+=t[n],n++;r-=e}while(r>0)}function i(t,e,r){for(var n=0,i=t.length,o=i/r;i>e;){for(var s=e;s>0;--s)t[n+e]+=t[n],++n;i-=e}for(var a=t.slice(),u=0;u<o;++u)for(var c=0;c<r;++c)t[r*u+c]=a[(r-c-1)*o+u]}Object.defineProperty(r,"__esModule",{value:!0}),r.applyPredictor=function(t,e,r,o,s,a){if(!e||1===e)return t;for(var u=0;u<s.length;++u){if(s[u]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(s[u]!==s[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var c=s[0]/8,l=2===a?1:s.length,f=0;f<o&&!(f*l*r*c>=t.byteLength);++f){var h=void 0;if(2===e){switch(s[0]){case 8:h=new Uint8Array(t,f*l*r*c,l*r*c);break;case 16:h=new Uint16Array(t,f*l*r*c,l*r*c/2);break;case 32:h=new Uint32Array(t,f*l*r*c,l*r*c/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(s[0]," bits per sample."))}n(h,l)}else 3===e&&i(h=new Uint8Array(t,f*l*r*c,l*r*c),l,c)}return t}},{}],FJDe:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(t("@babel/runtime/helpers/classCallCheck")),i=s(t("@babel/runtime/helpers/createClass")),o=t("../predictor");function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t)}return(0,i.default)(t,[{key:"decode",value:function(t,e){var r=this.decodeBlock(e),n=t.Predictor||1;if(1!==n){var i=!t.StripOffsets,s=i?t.TileWidth:t.ImageWidth,a=i?t.TileLength:t.RowsPerStrip||t.ImageLength;return(0,o.applyPredictor)(r,n,s,a,t.BitsPerSample,t.PlanarConfiguration)}return r}}]),t}();r.default=a},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","../predictor":"IKSA"}],V9bQ:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("@babel/runtime/helpers/classCallCheck")),i=u(t("@babel/runtime/helpers/createClass")),o=u(t("@babel/runtime/helpers/possibleConstructorReturn")),s=u(t("@babel/runtime/helpers/getPrototypeOf")),a=u(t("@babel/runtime/helpers/inherits"));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){return(0,n.default)(this,e),(0,o.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,a.default)(e,t),(0,i.default)(e,[{key:"decodeBlock",value:function(t){return t}}]),e}(u(t("./basedecoder")).default);r.default=c},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","./basedecoder":"FJDe"}],tcId:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(t("@babel/runtime/helpers/classCallCheck")),i=c(t("@babel/runtime/helpers/createClass")),o=c(t("@babel/runtime/helpers/possibleConstructorReturn")),s=c(t("@babel/runtime/helpers/getPrototypeOf")),a=c(t("@babel/runtime/helpers/inherits")),u=c(t("./basedecoder"));function c(t){return t&&t.__esModule?t:{default:t}}var l=9,f=256,h=257,p=12;function d(t,e){for(var r=e.length-1;r>=0;r--)t.push(e[r]);return t}function g(t){for(var e=new Uint16Array(4093),r=new Uint8Array(4093),n=0;n<=257;n++)e[n]=4096,r[n]=n;var i=258,o=l,s=0;function a(){i=258,o=l}function u(t){var e=function(t,e,r){var n=e%8,i=Math.floor(e/8),o=8-n,s=e+r-8*(i+1),a=8*(i+2)-(e+r),u=8*(i+2)-e;if(a=Math.max(0,a),i>=t.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),h;var c=t[i]&Math.pow(2,8-n)-1,l=c<<=r-o;if(i+1<t.length){var f=t[i+1]>>>a;l+=f<<=Math.max(0,r-u)}if(s>8&&i+2<t.length){var p=8*(i+3)-(e+r);l+=t[i+2]>>>p}return l}(t,s,o);return s+=o,e}function c(t,n){return r[i]=n,e[i]=t,++i-1}function g(t){for(var n=[],i=t;4096!==i;i=e[i])n.push(r[i]);return n}var y=[];a();for(var m,v=new Uint8Array(t),_=u(v);_!==h;){if(_===f){for(a(),_=u(v);_===f;)_=u(v);if(_===h)break;if(_>f)throw new Error("corrupted code at scanline ".concat(_));d(y,g(_)),m=_}else if(_<i){var b=g(_);d(y,b),c(m,b[b.length-1]),m=_}else{var w=g(m);if(!w)throw new Error("Bogus entry. Not in dictionary, ".concat(m," / ").concat(i,", position: ").concat(s));d(y,w),y.push(w[w.length-1]),c(m,w[w.length-1]),m=_}i+1>=Math.pow(2,o)&&(o===p?m=void 0:o++),_=u(v)}return new Uint8Array(y)}var y=function(t){function e(){return(0,n.default)(this,e),(0,o.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,a.default)(e,t),(0,i.default)(e,[{key:"decodeBlock",value:function(t){return g(t).buffer}}]),e}(u.default);r.default=y},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","./basedecoder":"FJDe"}],J7kk:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=l(t("@babel/runtime/helpers/possibleConstructorReturn")),i=l(t("@babel/runtime/helpers/getPrototypeOf")),o=l(t("@babel/runtime/helpers/inherits")),s=l(t("@babel/runtime/helpers/classCallCheck")),a=l(t("@babel/runtime/helpers/createClass")),u=l(t("@babel/runtime/helpers/typeof")),c=l(t("./basedecoder"));function l(t){return t&&t.__esModule?t:{default:t}}var f=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),h=4017,p=799,d=3406,g=2276,y=1567,m=3784,v=5793,_=2896;function b(t,e){for(var r=0,n=[],i=16;i>0&&!t[i-1];)--i;n.push({children:[],index:0});for(var o,s=n[0],a=0;a<i;a++){for(var u=0;u<t[a];u++){for((s=n.pop()).children[s.index]=e[r];s.index>0;)s=n.pop();for(s.index++,n.push(s);n.length<=a;)n.push(o={children:[],index:0}),s.children[s.index]=o.children,s=o;r++}a+1<i&&(n.push(o={children:[],index:0}),s.children[s.index]=o.children,s=o)}return n[0].children}function w(t,e,r,n,i,o,s,a,c){var l=r.mcusPerLine,h=r.progressive,p=e,d=e,g=0,y=0;function m(){if(y>0)return g>>--y&1;if(255===(g=t[d++])){var e=t[d++];if(e)throw new Error("unexpected marker: ".concat((g<<8|e).toString(16)))}return y=7,g>>>7}function v(t){for(var e,r=t;null!==(e=m());){if("number"==typeof(r=r[e]))return r;if("object"!==(0,u.default)(r))throw new Error("invalid huffman sequence")}return null}function _(t){for(var e=t,r=0;e>0;){var n=m();if(null===n)return;r=r<<1|n,--e}return r}function b(t){var e=_(t);return e>=1<<t-1?e:e+(-1<<t)+1}var w,x=0,E=0;function S(t,e,r,n,i){var o=r%l,s=(r/l|0)*t.v+n,a=o*t.h+i;e(t,t.blocks[s][a])}function C(t,e,r){var n=r/t.blocksPerLine|0,i=r%t.blocksPerLine;e(t,t.blocks[n][i])}var I,P,M,N,T,O,L=n.length;O=h?0===o?0===a?function(t,e){var r=v(t.huffmanTableDC),n=0===r?0:b(r)<<c;t.pred+=n,e[0]=t.pred}:function(t,e){e[0]|=m()<<c}:0===a?function(t,e){if(x>0)x--;else for(var r=o,n=s;r<=n;){var i=v(t.huffmanTableAC),a=15&i,u=i>>4;if(0===a){if(u<15){x=_(u)+(1<<u)-1;break}r+=16}else e[f[r+=u]]=b(a)*(1<<c),r++}}:function(t,e){for(var r=o,n=s,i=0;r<=n;){var a=f[r],u=e[a]<0?-1:1;switch(E){case 0:var l=v(t.huffmanTableAC),h=15&l;if(i=l>>4,0===h)i<15?(x=_(i)+(1<<i),E=4):(i=16,E=1);else{if(1!==h)throw new Error("invalid ACn encoding");w=b(h),E=i?2:3}continue;case 1:case 2:e[a]?e[a]+=(m()<<c)*u:0==--i&&(E=2===E?3:0);break;case 3:e[a]?e[a]+=(m()<<c)*u:(e[a]=w<<c,E=0);break;case 4:e[a]&&(e[a]+=(m()<<c)*u)}r++}4===E&&0==--x&&(E=0)}:function(t,e){var r=v(t.huffmanTableDC),n=0===r?0:b(r);t.pred+=n,e[0]=t.pred;for(var i=1;i<64;){var o=v(t.huffmanTableAC),s=15&o,a=o>>4;if(0===s){if(a<15)break;i+=16}else e[f[i+=a]]=b(s),i++}};var R,k,A=0;k=1===L?n[0].blocksPerLine*n[0].blocksPerColumn:l*r.mcusPerColumn;for(var D=i||k;A<k;){for(P=0;P<L;P++)n[P].pred=0;if(x=0,1===L)for(I=n[0],T=0;T<D;T++)C(I,O,A),A++;else for(T=0;T<D;T++){for(P=0;P<L;P++){var F=I=n[P],j=F.h,B=F.v;for(M=0;M<B;M++)for(N=0;N<j;N++)S(I,O,A,M,N)}if(++A===k)break}if(y=0,(R=t[d]<<8|t[d+1])<65280)throw new Error("marker was not found");if(!(R>=65488&&R<=65495))break;d+=2}return d-p}function x(t,e){var r=[],n=e.blocksPerLine,i=e.blocksPerColumn,o=n<<3,s=new Int32Array(64),a=new Uint8Array(64);function u(t,r,n){var i,o,s,a,u,c,l,f,b,w,x=e.quantizationTable,E=n;for(w=0;w<64;w++)E[w]=t[w]*x[w];for(w=0;w<8;++w){var S=8*w;0!==E[1+S]||0!==E[2+S]||0!==E[3+S]||0!==E[4+S]||0!==E[5+S]||0!==E[6+S]||0!==E[7+S]?(i=v*E[0+S]+128>>8,o=v*E[4+S]+128>>8,s=E[2+S],a=E[6+S],u=_*(E[1+S]-E[7+S])+128>>8,f=_*(E[1+S]+E[7+S])+128>>8,c=E[3+S]<<4,l=E[5+S]<<4,b=i-o+1>>1,i=i+o+1>>1,o=b,b=s*m+a*y+128>>8,s=s*y-a*m+128>>8,a=b,b=u-l+1>>1,u=u+l+1>>1,l=b,b=f+c+1>>1,c=f-c+1>>1,f=b,b=i-a+1>>1,i=i+a+1>>1,a=b,b=o-s+1>>1,o=o+s+1>>1,s=b,b=u*g+f*d+2048>>12,u=u*d-f*g+2048>>12,f=b,b=c*p+l*h+2048>>12,c=c*h-l*p+2048>>12,l=b,E[0+S]=i+f,E[7+S]=i-f,E[1+S]=o+l,E[6+S]=o-l,E[2+S]=s+c,E[5+S]=s-c,E[3+S]=a+u,E[4+S]=a-u):(b=v*E[0+S]+512>>10,E[0+S]=b,E[1+S]=b,E[2+S]=b,E[3+S]=b,E[4+S]=b,E[5+S]=b,E[6+S]=b,E[7+S]=b)}for(w=0;w<8;++w){var C=w;0!==E[8+C]||0!==E[16+C]||0!==E[24+C]||0!==E[32+C]||0!==E[40+C]||0!==E[48+C]||0!==E[56+C]?(i=v*E[0+C]+2048>>12,o=v*E[32+C]+2048>>12,s=E[16+C],a=E[48+C],u=_*(E[8+C]-E[56+C])+2048>>12,f=_*(E[8+C]+E[56+C])+2048>>12,c=E[24+C],l=E[40+C],b=i-o+1>>1,i=i+o+1>>1,o=b,b=s*m+a*y+2048>>12,s=s*y-a*m+2048>>12,a=b,b=u-l+1>>1,u=u+l+1>>1,l=b,b=f+c+1>>1,c=f-c+1>>1,f=b,b=i-a+1>>1,i=i+a+1>>1,a=b,b=o-s+1>>1,o=o+s+1>>1,s=b,b=u*g+f*d+2048>>12,u=u*d-f*g+2048>>12,f=b,b=c*p+l*h+2048>>12,c=c*h-l*p+2048>>12,l=b,E[0+C]=i+f,E[56+C]=i-f,E[8+C]=o+l,E[48+C]=o-l,E[16+C]=s+c,E[40+C]=s-c,E[24+C]=a+u,E[32+C]=a-u):(b=v*n[w+0]+8192>>14,E[0+C]=b,E[8+C]=b,E[16+C]=b,E[24+C]=b,E[32+C]=b,E[40+C]=b,E[48+C]=b,E[56+C]=b)}for(w=0;w<64;++w){var I=128+(E[w]+8>>4);r[w]=I<0?0:I>255?255:I}}for(var c=0;c<i;c++){for(var l=c<<3,f=0;f<8;f++)r.push(new Uint8Array(o));for(var b=0;b<n;b++){u(e.blocks[c][b],a,s);for(var w=0,x=b<<3,E=0;E<8;E++)for(var S=r[l+E],C=0;C<8;C++)S[x+C]=a[w++]}}return r}var E=function(){function t(){(0,s.default)(this,t),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return(0,a.default)(t,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(t){var e=0;function r(){var r=t[e]<<8|t[e+1];return e+=2,r}function n(t){var e,r,n=0,i=0;for(r in t.components)t.components.hasOwnProperty(r)&&(n<(e=t.components[r]).h&&(n=e.h),i<e.v&&(i=e.v));var o=Math.ceil(t.samplesPerLine/8/n),s=Math.ceil(t.scanLines/8/i);for(r in t.components)if(t.components.hasOwnProperty(r)){e=t.components[r];for(var a=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/n),u=Math.ceil(Math.ceil(t.scanLines/8)*e.v/i),c=o*e.h,l=s*e.v,f=[],h=0;h<l;h++){for(var p=[],d=0;d<c;d++)p.push(new Int32Array(64));f.push(p)}e.blocksPerLine=a,e.blocksPerColumn=u,e.blocks=f}t.maxH=n,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=s}var i,o,s=r();if(65496!==s)throw new Error("SOI not found");for(s=r();65497!==s;){switch(s){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var a=(void 0,void 0,i=r(),o=t.subarray(e,e+i-2),e+=o.length,o);65504===s&&74===a[0]&&70===a[1]&&73===a[2]&&70===a[3]&&0===a[4]&&(this.jfif={version:{major:a[5],minor:a[6]},densityUnits:a[7],xDensity:a[8]<<8|a[9],yDensity:a[10]<<8|a[11],thumbWidth:a[12],thumbHeight:a[13],thumbData:a.subarray(14,14+3*a[12]*a[13])}),65518===s&&65===a[0]&&100===a[1]&&111===a[2]&&98===a[3]&&101===a[4]&&0===a[5]&&(this.adobe={version:a[6],flags0:a[7]<<8|a[8],flags1:a[9]<<8|a[10],transformCode:a[11]});break;case 65499:for(var u=r()+e-2;e<u;){var c=t[e++],l=new Int32Array(64);if(c>>4==0)for(var h=0;h<64;h++)l[f[h]]=t[e++];else{if(c>>4!=1)throw new Error("DQT: invalid table spec");for(var p=0;p<64;p++)l[f[p]]=r()}this.quantizationTables[15&c]=l}break;case 65472:case 65473:case 65474:r();for(var d={extended:65473===s,progressive:65474===s,precision:t[e++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},g=t[e++],y=void 0,m=0;m<g;m++){y=t[e];var v=t[e+1]>>4,_=15&t[e+1],x=t[e+2];d.componentsOrder.push(y),d.components[y]={h:v,v:_,quantizationIdx:x},e+=3}n(d),this.frames.push(d);break;case 65476:for(var E=r(),S=2;S<E;){for(var C=t[e++],I=new Uint8Array(16),P=0,M=0;M<16;M++,e++)I[M]=t[e],P+=I[M];for(var N=new Uint8Array(P),T=0;T<P;T++,e++)N[T]=t[e];S+=17+P,C>>4==0?this.huffmanTablesDC[15&C]=b(I,N):this.huffmanTablesAC[15&C]=b(I,N)}break;case 65501:r(),this.resetInterval=r();break;case 65498:r();for(var O=t[e++],L=[],R=this.frames[0],k=0;k<O;k++){var A=R.components[t[e++]],D=t[e++];A.huffmanTableDC=this.huffmanTablesDC[D>>4],A.huffmanTableAC=this.huffmanTablesAC[15&D],L.push(A)}var F=t[e++],j=t[e++],B=t[e++],G=w(t,e,R,L,this.resetInterval,F,j,B>>4,15&B);e+=G;break;case 65535:255!==t[e]&&e--;break;default:if(255===t[e-3]&&t[e-2]>=192&&t[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(s.toString(16)))}s=r()}}},{key:"getResult",value:function(){var t=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var e=0;e<this.frames.length;e++)for(var r=this.frames[e].components,n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];r[o].quantizationTable=this.quantizationTables[r[o].quantizationIdx],delete r[o].quantizationIdx}for(var s=t[0],a=s.components,u=s.componentsOrder,c=[],l=s.samplesPerLine,f=s.scanLines,h=0;h<u.length;h++){var p=a[u[h]];c.push({lines:x(0,p),scaleX:p.h/s.maxH,scaleY:p.v/s.maxV})}for(var d=new Uint8Array(l*f*c.length),g=0,y=0;y<f;++y)for(var m=0;m<l;++m)for(var v=0;v<c.length;++v){var _=c[v];d[g]=_.lines[0|y*_.scaleY][0|m*_.scaleX],++g}return d}}]),t}(),S=function(t){function e(t){var r;return(0,s.default)(this,e),(r=(0,n.default)(this,(0,i.default)(e).call(this))).reader=new E,t.JPEGTables&&r.reader.parse(t.JPEGTables),r}return(0,o.default)(e,t),(0,a.default)(e,[{key:"decodeBlock",value:function(t){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(t)),this.reader.getResult().buffer}}]),e}(c.default);r.default=S},{"@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/typeof":"b9XL","./basedecoder":"FJDe"}],tbG5:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},s={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],uxo6:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},{}],X4kj:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],LP5M:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,s,a,u,c,l,f,h,p,d,g,y,m,v,_,b,w,x,E,S,C,I;r=t.state,n=t.next_in,C=t.input,i=n+(t.avail_in-5),o=t.next_out,I=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,p=r.hold,d=r.bits,g=r.lencode,y=r.distcode,m=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{d<15&&(p+=C[n++]<<d,d+=8,p+=C[n++]<<d,d+=8),_=g[p&m];e:for(;;){if(p>>>=b=_>>>24,d-=b,0==(b=_>>>16&255))I[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=g[(65535&_)+(p&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&_,(b&=15)&&(d<b&&(p+=C[n++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=C[n++]<<d,d+=8,p+=C[n++]<<d,d+=8),_=y[p&v];r:for(;;){if(p>>>=b=_>>>24,d-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=y[(65535&_)+(p&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&_,d<(b&=15)&&(p+=C[n++]<<d,(d+=8)<b&&(p+=C[n++]<<d,d+=8)),(x+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=b,d-=b,x>(b=o-s)){if((b=x-b)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=0,S=h,0===f){if(E+=c-b,b<w){w-=b;do{I[o++]=h[E++]}while(--b);E=o-x,S=I}}else if(f<b){if(E+=c+f-b,(b-=f)<w){w-=b;do{I[o++]=h[E++]}while(--b);if(E=0,f<w){w-=b=f;do{I[o++]=h[E++]}while(--b);E=o-x,S=I}}}else if(E+=f-b,b<w){w-=b;do{I[o++]=h[E++]}while(--b);E=o-x,S=I}for(;w>2;)I[o++]=S[E++],I[o++]=S[E++],I[o++]=S[E++],w-=3;w&&(I[o++]=S[E++],w>1&&(I[o++]=S[E++]))}else{E=o-x;do{I[o++]=I[E++],I[o++]=I[E++],I[o++]=I[E++],w-=3}while(w>2);w&&(I[o++]=I[E++],w>1&&(I[o++]=I[E++]))}break}}break}}while(n<i&&o<a);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<a?a-o+257:257-(o-a),r.hold=p,r.bits=d}},{}],uNlq:[function(t,e,r){"use strict";var n=t("../utils/common"),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,c,l,f,h,p){var d,g,y,m,v,_,b,w,x,E=p.bits,S=0,C=0,I=0,P=0,M=0,N=0,T=0,O=0,L=0,R=0,k=null,A=0,D=new n.Buf16(16),F=new n.Buf16(16),j=null,B=0;for(S=0;S<=i;S++)D[S]=0;for(C=0;C<c;C++)D[e[r+C]]++;for(M=E,P=i;P>=1&&0===D[P];P--);if(M>P&&(M=P),0===P)return l[f++]=20971520,l[f++]=20971520,p.bits=1,0;for(I=1;I<P&&0===D[I];I++);for(M<I&&(M=I),O=1,S=1;S<=i;S++)if(O<<=1,(O-=D[S])<0)return-1;if(O>0&&(0===t||1!==P))return-1;for(F[1]=0,S=1;S<i;S++)F[S+1]=F[S]+D[S];for(C=0;C<c;C++)0!==e[r+C]&&(h[F[e[r+C]]++]=C);if(0===t?(k=j=h,_=19):1===t?(k=o,A-=257,j=s,B-=257,_=256):(k=a,j=u,_=-1),R=0,C=0,S=I,v=f,N=M,T=0,y=-1,m=(L=1<<M)-1,1===t&&L>852||2===t&&L>592)return 1;for(;;){b=S-T,h[C]<_?(w=0,x=h[C]):h[C]>_?(w=j[B+h[C]],x=k[A+h[C]]):(w=96,x=0),d=1<<S-T,I=g=1<<N;do{l[v+(R>>T)+(g-=d)]=b<<24|w<<16|x|0}while(0!==g);for(d=1<<S-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,C++,0==--D[S]){if(S===P)break;S=e[r+h[C]]}if(S>M&&(R&m)!==y){for(0===T&&(T=M),v+=I,O=1<<(N=S-T);N+T<P&&!((O-=D[N+T])<=0);)N++,O<<=1;if(L+=1<<N,1===t&&L>852||2===t&&L>592)return 1;l[y=R&m]=M<<24|N<<16|v-f|0}}return 0!==R&&(l[v+R]=S-T<<24|64<<16|0),p.bits=M,0}},{"../utils/common":"tbG5"}],GIDK:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),u=0,c=1,l=2,f=4,h=5,p=6,d=0,g=1,y=2,m=-2,v=-3,_=-4,b=-5,w=8,x=1,E=2,S=3,C=4,I=5,P=6,M=7,N=8,T=9,O=10,L=11,R=12,k=13,A=14,D=15,F=16,j=17,B=18,G=19,q=20,U=21,z=22,Y=23,V=24,X=25,W=26,H=27,K=28,Z=29,J=30,Q=31,$=32,tt=852,et=592,rt=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function it(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ot(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,d):m}function st(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,ot(t)):m}function at(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?m:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,st(t))):m}function ut(t,e){var r,n;return t?(n=new it,t.state=n,n.window=null,(r=at(t,e))!==d&&(t.state=null),r):m}var ct,lt,ft=!0;function ht(t){if(ft){var e;for(ct=new n.Buf32(512),lt=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(c,t.lens,0,288,ct,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(l,t.lens,0,32,lt,0,t.work,{bits:5}),ft=!1}t.lencode=ct,t.lenbits=9,t.distcode=lt,t.distbits=5}function pt(t,e,r,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),n.arraySet(s.window,e,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}r.inflateReset=st,r.inflateReset2=at,r.inflateResetKeep=ot,r.inflateInit=function(t){return ut(t,rt)},r.inflateInit2=ut,r.inflate=function(t,e){var r,tt,et,rt,it,ot,st,at,ut,ct,lt,ft,dt,gt,yt,mt,vt,_t,bt,wt,xt,Et,St,Ct,It=0,Pt=new n.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return m;(r=t.state).mode===R&&(r.mode=k),it=t.next_out,et=t.output,st=t.avail_out,rt=t.next_in,tt=t.input,ot=t.avail_in,at=r.hold,ut=r.bits,ct=ot,lt=st,Et=d;t:for(;;)switch(r.mode){case x:if(0===r.wrap){r.mode=k;break}for(;ut<16;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(2&r.wrap&&35615===at){r.check=0,Pt[0]=255&at,Pt[1]=at>>>8&255,r.check=o(r.check,Pt,2,0),at=0,ut=0,r.mode=E;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&at)<<8)+(at>>8))%31){t.msg="incorrect header check",r.mode=J;break}if((15&at)!==w){t.msg="unknown compression method",r.mode=J;break}if(ut-=4,xt=8+(15&(at>>>=4)),0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=J;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&at?O:R,at=0,ut=0;break;case E:for(;ut<16;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(r.flags=at,(255&r.flags)!==w){t.msg="unknown compression method",r.mode=J;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=J;break}r.head&&(r.head.text=at>>8&1),512&r.flags&&(Pt[0]=255&at,Pt[1]=at>>>8&255,r.check=o(r.check,Pt,2,0)),at=0,ut=0,r.mode=S;case S:for(;ut<32;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}r.head&&(r.head.time=at),512&r.flags&&(Pt[0]=255&at,Pt[1]=at>>>8&255,Pt[2]=at>>>16&255,Pt[3]=at>>>24&255,r.check=o(r.check,Pt,4,0)),at=0,ut=0,r.mode=C;case C:for(;ut<16;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}r.head&&(r.head.xflags=255&at,r.head.os=at>>8),512&r.flags&&(Pt[0]=255&at,Pt[1]=at>>>8&255,r.check=o(r.check,Pt,2,0)),at=0,ut=0,r.mode=I;case I:if(1024&r.flags){for(;ut<16;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}r.length=at,r.head&&(r.head.extra_len=at),512&r.flags&&(Pt[0]=255&at,Pt[1]=at>>>8&255,r.check=o(r.check,Pt,2,0)),at=0,ut=0}else r.head&&(r.head.extra=null);r.mode=P;case P:if(1024&r.flags&&((ft=r.length)>ot&&(ft=ot),ft&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,tt,rt,ft,xt)),512&r.flags&&(r.check=o(r.check,tt,ft,rt)),ot-=ft,rt+=ft,r.length-=ft),r.length))break t;r.length=0,r.mode=M;case M:if(2048&r.flags){if(0===ot)break t;ft=0;do{xt=tt[rt+ft++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt))}while(xt&&ft<ot);if(512&r.flags&&(r.check=o(r.check,tt,ft,rt)),ot-=ft,rt+=ft,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=N;case N:if(4096&r.flags){if(0===ot)break t;ft=0;do{xt=tt[rt+ft++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt))}while(xt&&ft<ot);if(512&r.flags&&(r.check=o(r.check,tt,ft,rt)),ot-=ft,rt+=ft,xt)break t}else r.head&&(r.head.comment=null);r.mode=T;case T:if(512&r.flags){for(;ut<16;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(at!==(65535&r.check)){t.msg="header crc mismatch",r.mode=J;break}at=0,ut=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=R;break;case O:for(;ut<32;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}t.adler=r.check=nt(at),at=0,ut=0,r.mode=L;case L:if(0===r.havedict)return t.next_out=it,t.avail_out=st,t.next_in=rt,t.avail_in=ot,r.hold=at,r.bits=ut,y;t.adler=r.check=1,r.mode=R;case R:if(e===h||e===p)break t;case k:if(r.last){at>>>=7&ut,ut-=7&ut,r.mode=H;break}for(;ut<3;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}switch(r.last=1&at,ut-=1,3&(at>>>=1)){case 0:r.mode=A;break;case 1:if(ht(r),r.mode=q,e===p){at>>>=2,ut-=2;break t}break;case 2:r.mode=j;break;case 3:t.msg="invalid block type",r.mode=J}at>>>=2,ut-=2;break;case A:for(at>>>=7&ut,ut-=7&ut;ut<32;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if((65535&at)!=(at>>>16^65535)){t.msg="invalid stored block lengths",r.mode=J;break}if(r.length=65535&at,at=0,ut=0,r.mode=D,e===p)break t;case D:r.mode=F;case F:if(ft=r.length){if(ft>ot&&(ft=ot),ft>st&&(ft=st),0===ft)break t;n.arraySet(et,tt,rt,ft,it),ot-=ft,rt+=ft,st-=ft,it+=ft,r.length-=ft;break}r.mode=R;break;case j:for(;ut<14;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(r.nlen=257+(31&at),at>>>=5,ut-=5,r.ndist=1+(31&at),at>>>=5,ut-=5,r.ncode=4+(15&at),at>>>=4,ut-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=J;break}r.have=0,r.mode=B;case B:for(;r.have<r.ncode;){for(;ut<3;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}r.lens[Mt[r.have++]]=7&at,at>>>=3,ut-=3}for(;r.have<19;)r.lens[Mt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,St={bits:r.lenbits},Et=a(u,r.lens,0,19,r.lencode,0,r.work,St),r.lenbits=St.bits,Et){t.msg="invalid code lengths set",r.mode=J;break}r.have=0,r.mode=G;case G:for(;r.have<r.nlen+r.ndist;){for(;mt=(It=r.lencode[at&(1<<r.lenbits)-1])>>>16&255,vt=65535&It,!((yt=It>>>24)<=ut);){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(vt<16)at>>>=yt,ut-=yt,r.lens[r.have++]=vt;else{if(16===vt){for(Ct=yt+2;ut<Ct;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(at>>>=yt,ut-=yt,0===r.have){t.msg="invalid bit length repeat",r.mode=J;break}xt=r.lens[r.have-1],ft=3+(3&at),at>>>=2,ut-=2}else if(17===vt){for(Ct=yt+3;ut<Ct;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}ut-=yt,xt=0,ft=3+(7&(at>>>=yt)),at>>>=3,ut-=3}else{for(Ct=yt+7;ut<Ct;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}ut-=yt,xt=0,ft=11+(127&(at>>>=yt)),at>>>=7,ut-=7}if(r.have+ft>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=J;break}for(;ft--;)r.lens[r.have++]=xt}}if(r.mode===J)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=J;break}if(r.lenbits=9,St={bits:r.lenbits},Et=a(c,r.lens,0,r.nlen,r.lencode,0,r.work,St),r.lenbits=St.bits,Et){t.msg="invalid literal/lengths set",r.mode=J;break}if(r.distbits=6,r.distcode=r.distdyn,St={bits:r.distbits},Et=a(l,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,St),r.distbits=St.bits,Et){t.msg="invalid distances set",r.mode=J;break}if(r.mode=q,e===p)break t;case q:r.mode=U;case U:if(ot>=6&&st>=258){t.next_out=it,t.avail_out=st,t.next_in=rt,t.avail_in=ot,r.hold=at,r.bits=ut,s(t,lt),it=t.next_out,et=t.output,st=t.avail_out,rt=t.next_in,tt=t.input,ot=t.avail_in,at=r.hold,ut=r.bits,r.mode===R&&(r.back=-1);break}for(r.back=0;mt=(It=r.lencode[at&(1<<r.lenbits)-1])>>>16&255,vt=65535&It,!((yt=It>>>24)<=ut);){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(mt&&0==(240&mt)){for(_t=yt,bt=mt,wt=vt;mt=(It=r.lencode[wt+((at&(1<<_t+bt)-1)>>_t)])>>>16&255,vt=65535&It,!(_t+(yt=It>>>24)<=ut);){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}at>>>=_t,ut-=_t,r.back+=_t}if(at>>>=yt,ut-=yt,r.back+=yt,r.length=vt,0===mt){r.mode=W;break}if(32&mt){r.back=-1,r.mode=R;break}if(64&mt){t.msg="invalid literal/length code",r.mode=J;break}r.extra=15&mt,r.mode=z;case z:if(r.extra){for(Ct=r.extra;ut<Ct;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}r.length+=at&(1<<r.extra)-1,at>>>=r.extra,ut-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Y;case Y:for(;mt=(It=r.distcode[at&(1<<r.distbits)-1])>>>16&255,vt=65535&It,!((yt=It>>>24)<=ut);){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(0==(240&mt)){for(_t=yt,bt=mt,wt=vt;mt=(It=r.distcode[wt+((at&(1<<_t+bt)-1)>>_t)])>>>16&255,vt=65535&It,!(_t+(yt=It>>>24)<=ut);){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}at>>>=_t,ut-=_t,r.back+=_t}if(at>>>=yt,ut-=yt,r.back+=yt,64&mt){t.msg="invalid distance code",r.mode=J;break}r.offset=vt,r.extra=15&mt,r.mode=V;case V:if(r.extra){for(Ct=r.extra;ut<Ct;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}r.offset+=at&(1<<r.extra)-1,at>>>=r.extra,ut-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=J;break}r.mode=X;case X:if(0===st)break t;if(ft=lt-st,r.offset>ft){if((ft=r.offset-ft)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=J;break}ft>r.wnext?(ft-=r.wnext,dt=r.wsize-ft):dt=r.wnext-ft,ft>r.length&&(ft=r.length),gt=r.window}else gt=et,dt=it-r.offset,ft=r.length;ft>st&&(ft=st),st-=ft,r.length-=ft;do{et[it++]=gt[dt++]}while(--ft);0===r.length&&(r.mode=U);break;case W:if(0===st)break t;et[it++]=r.length,st--,r.mode=U;break;case H:if(r.wrap){for(;ut<32;){if(0===ot)break t;ot--,at|=tt[rt++]<<ut,ut+=8}if(lt-=st,t.total_out+=lt,r.total+=lt,lt&&(t.adler=r.check=r.flags?o(r.check,et,lt,it-lt):i(r.check,et,lt,it-lt)),lt=st,(r.flags?at:nt(at))!==r.check){t.msg="incorrect data check",r.mode=J;break}at=0,ut=0}r.mode=K;case K:if(r.wrap&&r.flags){for(;ut<32;){if(0===ot)break t;ot--,at+=tt[rt++]<<ut,ut+=8}if(at!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=J;break}at=0,ut=0}r.mode=Z;case Z:Et=g;break t;case J:Et=v;break t;case Q:return _;case $:default:return m}return t.next_out=it,t.avail_out=st,t.next_in=rt,t.avail_in=ot,r.hold=at,r.bits=ut,(r.wsize||lt!==t.avail_out&&r.mode<J&&(r.mode<H||e!==f))&&pt(t,t.output,t.next_out,lt-t.avail_out)?(r.mode=Q,_):(ct-=t.avail_in,lt-=t.avail_out,t.total_in+=ct,t.total_out+=lt,r.total+=lt,r.wrap&&lt&&(t.adler=r.check=r.flags?o(r.check,et,lt,t.next_out-lt):i(r.check,et,lt,t.next_out-lt)),t.data_type=r.bits+(r.last?64:0)+(r.mode===R?128:0)+(r.mode===q||r.mode===D?256:0),(0===ct&&0===lt||e===f)&&Et===d&&(Et=b),Et)},r.inflateEnd=function(t){if(!t||!t.state)return m;var e=t.state;return e.window&&(e.window=null),t.state=null,d},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?m:(r.head=e,e.done=!1,d):m},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&r.mode!==L?m:r.mode===L&&i(1,e,n,0)!==r.check?v:pt(t,e,n,n)?(r.mode=Q,_):(r.havedict=1,d):m},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":"tbG5","./adler32":"uxo6","./crc32":"X4kj","./inffast":"LP5M","./inftrees":"uNlq"}],Q3ZD:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,r.string2buf=function(t){var e,r,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),s=0,o=0;s<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,a=e||t.length,c=new Array(2*a);for(n=0,r=0;r<a;)if((i=t[r++])<128)c[n++]=i;else if((o=s[i])>4)c[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<a;)i=i<<6|63&t[r++],o--;o>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return u(c,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+s[t[r]]>e?r:e}},{"./common":"tbG5"}],xUUw:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],gMAY:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],bdtv:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],WIli:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],faQk:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);if(this.header=new c,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[r])}function h(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}f.prototype.push=function(t,e){var r,a,u,c,f,h=this.strm,p=this.options.chunkSize,d=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?h.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(r=n.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&d&&(r=n.inflateSetDictionary(this.strm,d)),r===s.Z_BUF_ERROR&&!0===g&&(r=s.Z_OK,g=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&r!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(h.output,h.next_out),c=h.next_out-u,f=o.buf2string(h.output,u),h.next_out=c,h.avail_out=p-c,c&&i.arraySet(h.output,h.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(g=!0)}while((h.avail_in>0||0===h.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=f,r.inflate=h,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},r.ungzip=h},{"./zlib/inflate":"GIDK","./utils/common":"tbG5","./utils/strings":"Q3ZD","./zlib/constants":"xUUw","./zlib/messages":"gMAY","./zlib/zstream":"bdtv","./zlib/gzheader":"WIli"}],JAiC:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=c(t("@babel/runtime/helpers/classCallCheck")),i=c(t("@babel/runtime/helpers/createClass")),o=c(t("@babel/runtime/helpers/possibleConstructorReturn")),s=c(t("@babel/runtime/helpers/getPrototypeOf")),a=c(t("@babel/runtime/helpers/inherits")),u=t("pako/lib/inflate");function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,n.default)(this,e),(0,o.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,a.default)(e,t),(0,i.default)(e,[{key:"decodeBlock",value:function(t){return(0,u.inflate)(new Uint8Array(t)).buffer}}]),e}(c(t("./basedecoder")).default);r.default=l},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","pako/lib/inflate":"faQk","./basedecoder":"FJDe"}],OcPz:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("@babel/runtime/helpers/classCallCheck")),i=u(t("@babel/runtime/helpers/createClass")),o=u(t("@babel/runtime/helpers/possibleConstructorReturn")),s=u(t("@babel/runtime/helpers/getPrototypeOf")),a=u(t("@babel/runtime/helpers/inherits"));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(){return(0,n.default)(this,e),(0,o.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,a.default)(e,t),(0,i.default)(e,[{key:"decodeBlock",value:function(t){for(var e=new DataView(t),r=[],n=0;n<t.byteLength;++n){var i=e.getInt8(n);if(i<0){var o=e.getUint8(n+1);i=-i;for(var s=0;s<=i;++s)r.push(o);n+=1}else{for(var a=0;a<=i;++a)r.push(e.getUint8(n+a+1));n+=i+1}}return new Uint8Array(r).buffer}}]),e}(u(t("./basedecoder")).default);r.default=c},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","./basedecoder":"FJDe"}],FGCZ:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDecoder=function(t){switch(t.Compression){case void 0:case 1:return new n.default;case 5:return new i.default;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new o.default(t);case 8:case 32946:return new s.default;case 32773:return new a.default;default:throw new Error("Unknown compression method identifier: ".concat(t.Compression))}};var n=u(t("./raw")),i=u(t("./lzw")),o=u(t("./jpeg")),s=u(t("./deflate")),a=u(t("./packbits"));function u(t){return t&&t.__esModule?t:{default:t}}},{"./raw":"V9bQ","./lzw":"tcId","./jpeg":"J7kk","./deflate":"JAiC","./packbits":"OcPz"}],OQju:[function(t,e,r){"use strict";function n(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(t).constructor)(e*r*n)}function i(t,e,r,i,o){var s=e/i,a=r/o;return t.map((function(t){for(var u=n(t,i,o),c=0;c<o;++c)for(var l=Math.min(Math.round(a*c),r-1),f=0;f<i;++f){var h=Math.min(Math.round(s*f),e-1),p=t[l*e+h];u[c*i+f]=p}return u}))}function o(t,e,r){return(1-r)*t+r*e}function s(t,e,r,i,s){var a=e/i,u=r/s;return t.map((function(t){for(var c=n(t,i,s),l=0;l<s;++l)for(var f=u*l,h=Math.floor(f),p=Math.min(Math.ceil(f),r-1),d=0;d<i;++d){var g=a*d,y=g%1,m=Math.floor(g),v=Math.min(Math.ceil(g),e-1),_=t[h*e+m],b=t[h*e+v],w=t[p*e+m],x=t[p*e+v],E=o(o(_,b,y),o(w,x,y),f%1);c[l*i+d]=E}return c}))}function a(t,e,r,i,o,s){for(var a=e/i,u=r/o,c=n(t,i,o,s),l=0;l<o;++l)for(var f=Math.min(Math.round(u*l),r-1),h=0;h<i;++h)for(var p=Math.min(Math.round(a*h),e-1),d=0;d<s;++d){var g=t[f*e*s+p*s+d];c[l*i*s+h*s+d]=g}return c}function u(t,e,r,i,s,a){for(var u=e/i,c=r/s,l=n(t,i,s,a),f=0;f<s;++f)for(var h=c*f,p=Math.floor(h),d=Math.min(Math.ceil(h),r-1),g=0;g<i;++g)for(var y=u*g,m=y%1,v=Math.floor(y),_=Math.min(Math.ceil(y),e-1),b=0;b<a;++b){var w=t[p*e*a+v*a+b],x=t[p*e*a+_*a+b],E=t[d*e*a+v*a+b],S=t[d*e*a+_*a+b],C=o(o(w,x,m),o(E,S,m),h%1);l[f*i*a+g*a+b]=C}return l}Object.defineProperty(r,"__esModule",{value:!0}),r.resampleNearest=i,r.resampleBilinear=s,r.resample=function(t,e,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(a.toLowerCase()){case"nearest":return i(t,e,r,n,o);case"bilinear":case"linear":return s(t,e,r,n,o);default:throw new Error("Unsupported resampling method: '".concat(a,"'"))}},r.resampleNearestInterleaved=a,r.resampleBilinearInterleaved=u,r.resampleInterleaved=function(t,e,r,n,i,o){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(s.toLowerCase()){case"nearest":return a(t,e,r,n,i,o);case"bilinear":case"linear":return u(t,e,r,n,i,o);default:throw new Error("Unsupported resampling method: '".concat(s,"'"))}}},{}],eOWo:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=p(t("@babel/runtime/helpers/slicedToArray")),i=p(t("@babel/runtime/regenerator")),o=p(t("@babel/runtime/helpers/asyncToGenerator")),s=p(t("@babel/runtime/helpers/classCallCheck")),a=p(t("@babel/runtime/helpers/createClass")),u=p(t("txml")),c=t("./globals"),l=t("./rgb"),f=t("./compression"),h=t("./resample");function p(t){return t&&t.__esModule?t:{default:t}}function d(t,e,r){for(var n=0,i=e;i<r;++i)n+=t[i];return n}function g(t,e,r){switch(t){case 1:switch(e){case 8:return new Uint8Array(r);case 16:return new Uint16Array(r);case 32:return new Uint32Array(r)}break;case 2:switch(e){case 8:return new Int8Array(r);case 16:return new Int16Array(r);case 32:return new Int32Array(r)}break;case 3:switch(e){case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}var y=function(){function t(e,r,n,i,o,a){(0,s.default)(this,t),this.fileDirectory=e,this.geoKeys=r,this.dataView=n,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!e.StripOffsets;var u=e.PlanarConfiguration;if(this.planarConfiguration=void 0===u?1:u,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=a}return(0,a.default)(t,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return this.fileDirectory.SamplesPerPixel}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBytesPerPixel",value:function(){for(var t=0,e=0;e<this.fileDirectory.BitsPerSample.length;++e){var r=this.fileDirectory.BitsPerSample[e];if(r%8!=0)throw new Error("Sample bit-width of ".concat(r," is not supported."));if(r!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");t+=r}return t/8}},{key:"getSampleByteSize",value:function(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(t," is out of range."));var e=this.fileDirectory.BitsPerSample[t];if(e%8!=0)throw new Error("Sample bit-width of ".concat(e," is not supported."));return e/8}},{key:"getReaderForSample",value:function(t){var e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:switch(r){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(r){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(r){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getArrayForSample",value:function(t,e){return g(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,this.fileDirectory.BitsPerSample[t],e)}},{key:"getTileOrStrip",value:function(){var t=(0,o.default)(i.default.mark((function t(e,r,n,o){var s,a,u,c,l,f,h,p;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight()),c=this.tiles,1===this.planarConfiguration?u=r*s+e:2===this.planarConfiguration&&(u=n*s*a+r*s+e),this.isTiled?(l=this.fileDirectory.TileOffsets[u],f=this.fileDirectory.TileByteCounts[u]):(l=this.fileDirectory.StripOffsets[u],f=this.fileDirectory.StripByteCounts[u]),t.next=7,this.source.fetch(l,f);case 7:return h=t.sent,null===c?p=o.decode(this.fileDirectory,h):c[u]||(p=o.decode(this.fileDirectory,h),c[u]=p),t.t0=e,t.t1=r,t.t2=n,t.next=14,p;case 14:return t.t3=t.sent,t.abrupt("return",{x:t.t0,y:t.t1,sample:t.t2,data:t.t3});case 16:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i){return t.apply(this,arguments)}}()},{key:"_readRaster",value:function(){var t=(0,o.default)(i.default.mark((function t(e,r,n,o,s,a,u,c){var l,f,p,g,y,m,v,_,b,w,x,E,S,C,I,P,M,N,T=this;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(l=this.getTileWidth(),f=this.getTileHeight(),p=Math.max(Math.floor(e[0]/l),0),g=Math.min(Math.ceil(e[2]/l),Math.ceil(this.getWidth()/this.getTileWidth())),y=Math.max(Math.floor(e[1]/f),0),m=Math.min(Math.ceil(e[3]/f),Math.ceil(this.getHeight()/this.getTileHeight())),v=e[2]-e[0],_=this.getBytesPerPixel(),b=[],w=[],x=0;x<r.length;++x)1===this.planarConfiguration?b.push(d(this.fileDirectory.BitsPerSample,0,r[x])/8):b.push(0),w.push(this.getReaderForSample(r[x]));for(E=[],S=this.littleEndian,C=y;C<m;++C)for(I=p;I<g;++I)for(P=function(t){var i=t,a=r[t];2===T.planarConfiguration&&(_=T.getSampleByteSize(a));var u=T.getTileOrStrip(I,C,a,s);E.push(u),u.then((function(t){for(var s=t.data,a=new DataView(s),u=t.y*f,c=t.x*l,h=(t.y+1)*f,p=(t.x+1)*l,d=w[i],g=Math.min(f,f-(h-e[3])),y=Math.min(l,l-(p-e[2])),m=Math.max(0,e[1]-u);m<g;++m)for(var x=Math.max(0,e[0]-c);x<y;++x){var E=(m*l+x)*_,C=d.call(a,E+b[i],S),I=void 0;o?(I=(m+u-e[1])*v*r.length+(x+c-e[0])*r.length+i,n[I]=C):(I=(m+u-e[1])*v+x+c-e[0],n[i][I]=C)}}))},M=0;M<r.length;++M)P(M);return t.next=16,Promise.all(E);case 16:if(!(a&&e[2]-e[0]!==a||u&&e[3]-e[1]!==u)){t.next=21;break}return(N=o?(0,h.resampleInterleaved)(n,e[2]-e[0],e[3]-e[1],a,u,r.length,c):(0,h.resample)(n,e[2]-e[0],e[3]-e[1],a,u,c)).width=a,N.height=u,t.abrupt("return",N);case 21:return n.width=a||e[2]-e[0],n.height=u||e[3]-e[1],t.abrupt("return",n);case 24:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i,o,s,a,u){return t.apply(this,arguments)}}()},{key:"readRasters",value:function(){var t=(0,o.default)(i.default.mark((function t(){var e,r,n,o,s,a,u,c,l,h,p,d,y,m,v,_,b,w,x,E,S,C,I,P,M=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=M.length>0&&void 0!==M[0]?M[0]:{},r=e.window,n=e.samples,o=void 0===n?[]:n,s=e.interleave,a=e.pool,u=void 0===a?null:a,c=e.width,l=e.height,h=e.resampleMethod,p=e.fillValue,!((d=r||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if(y=d[2]-d[0],m=d[3]-d[1],v=y*m,o&&o.length){t.next=11;break}for(_=0;_<this.fileDirectory.SamplesPerPixel;++_)o.push(_);t.next=18;break;case 11:b=0;case 12:if(!(b<o.length)){t.next=18;break}if(!(o[b]>=this.fileDirectory.SamplesPerPixel)){t.next=15;break}return t.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(o[b],"'."))));case 15:++b,t.next=12;break;case 18:if(s)x=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,E=Math.max.apply(null,this.fileDirectory.BitsPerSample),w=g(x,E,v*o.length),p&&w.fill(p);else for(w=[],S=0;S<o.length;++S)C=this.getArrayForSample(o[S],v),Array.isArray(p)&&S<p.length?C.fill(p[S]):p&&!Array.isArray(p)&&C.fill(p),w.push(C);return I=u||(0,f.getDecoder)(this.fileDirectory),t.next=22,this._readRaster(d,o,w,s,I,c,l,h);case 22:return P=t.sent,t.abrupt("return",P);case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"readRGB",value:function(){var t=(0,o.default)(i.default.mark((function t(){var e,r,n,o,s,a,u,f,h,p,d,g,y,m,v,_,b,w,x,E=arguments;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=E.length>0&&void 0!==E[0]?E[0]:{},r=e.window,n=e.pool,o=void 0===n?null:n,s=e.width,a=e.height,u=e.resampleMethod,f=e.enableAlpha,h=void 0!==f&&f,!((p=r||[0,0,this.getWidth(),this.getHeight()])[0]>p[2]||p[1]>p[3])){t.next=4;break}throw new Error("Invalid subsets");case 4:if((d=this.fileDirectory.PhotometricInterpretation)!==c.photometricInterpretations.RGB){t.next=9;break}if(g=[0,1,2],this.fileDirectory.ExtraSamples!==c.ExtraSamplesValues.Unspecified&&h)for(g=[],y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)g.push(y);return t.abrupt("return",this.readRasters({window:r,interleave:!0,samples:g,pool:o,width:s,height:a}));case 9:t.t0=d,t.next=t.t0===c.photometricInterpretations.WhiteIsZero?12:t.t0===c.photometricInterpretations.BlackIsZero?12:t.t0===c.photometricInterpretations.Palette?12:t.t0===c.photometricInterpretations.CMYK?14:t.t0===c.photometricInterpretations.YCbCr?16:t.t0===c.photometricInterpretations.CIELab?16:18;break;case 12:return m=[0],t.abrupt("break",19);case 14:return m=[0,1,2,3],t.abrupt("break",19);case 16:return m=[0,1,2],t.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return v={window:p,interleave:!0,samples:m,pool:o,width:s,height:a,resampleMethod:u},_=this.fileDirectory,t.next=23,this.readRasters(v);case 23:b=t.sent,w=Math.pow(2,this.fileDirectory.BitsPerSample[0]),t.t1=d,t.next=t.t1===c.photometricInterpretations.WhiteIsZero?28:t.t1===c.photometricInterpretations.BlackIsZero?30:t.t1===c.photometricInterpretations.Palette?32:t.t1===c.photometricInterpretations.CMYK?34:t.t1===c.photometricInterpretations.YCbCr?36:t.t1===c.photometricInterpretations.CIELab?38:40;break;case 28:return x=(0,l.fromWhiteIsZero)(b,w),t.abrupt("break",41);case 30:return x=(0,l.fromBlackIsZero)(b,w),t.abrupt("break",41);case 32:return x=(0,l.fromPalette)(b,_.ColorMap),t.abrupt("break",41);case 34:return x=(0,l.fromCMYK)(b),t.abrupt("break",41);case 36:return x=(0,l.fromYCbCr)(b),t.abrupt("break",41);case 38:return x=(0,l.fromCIELab)(b),t.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:return x.width=b.width,x.height=b.height,t.abrupt("return",x);case 44:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var t=[],e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}},{key:"getGDALMetadata",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={};if(!this.fileDirectory.GDAL_METADATA)return null;var r=this.fileDirectory.GDAL_METADATA,n=(0,u.default)(r.substring(0,r.length-1));if(!n[0].tagName)throw new Error("Failed to parse GDAL metadata XML.");var i=n[0];if("GDALMetadata"!==i.tagName)throw new Error("Unexpected GDAL metadata XML tag.");var o=i.children.filter((function(t){return"Item"===t.tagName}));t&&(o=o.filter((function(e){return Number(e.attributes.sample)===t})));for(var s=0;s<o.length;++s){var a=o[s];e[a.attributes.name]=a.children[0]}return e}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}},{key:"getOrigin",value:function(){var t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return[r[0],r[5],r[10]];if(t){var i=t.getResolution(),o=(0,n.default)(i,3),s=o[0],a=o[1],u=o[2];return[s*t.getWidth()/this.getWidth(),a*t.getHeight()/this.getHeight(),u*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var t=this.getOrigin(),e=this.getResolution(),r=t[0],n=t[1],i=r+e[0]*this.getWidth(),o=n+e[1]*this.getHeight();return[Math.min(r,i),Math.min(n,o),Math.max(r,i),Math.max(n,o)]}}]),t}();r.default=y},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW",txml:"JO74","./globals":"j27V","./rgb":"fpBl","./compression":"FGCZ","./resample":"OQju"}],dqpX:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("@babel/runtime/helpers/classCallCheck")),i=o(t("@babel/runtime/helpers/createClass"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){(0,n.default)(this,t),this._dataView=new DataView(e)}return(0,i.default)(t,[{key:"getUint64",value:function(t,e){var r=this.getUint32(t,e),n=this.getUint32(t+4,e);return e?r<<32|n:n<<32|r}},{key:"getInt64",value:function(t,e){var r;return e?(r=this.getInt32(t,e))<<32|this.getUint32(t+4,e):(r=this.getUint32(t,e),this.getInt32(t+4,e)<<32|r)}},{key:"getUint8",value:function(t,e){return this._dataView.getUint8(t,e)}},{key:"getInt8",value:function(t,e){return this._dataView.getInt8(t,e)}},{key:"getUint16",value:function(t,e){return this._dataView.getUint16(t,e)}},{key:"getInt16",value:function(t,e){return this._dataView.getInt16(t,e)}},{key:"getUint32",value:function(t,e){return this._dataView.getUint32(t,e)}},{key:"getInt32",value:function(t,e){return this._dataView.getInt32(t,e)}},{key:"getFloat32",value:function(t,e){return this._dataView.getFloat32(t,e)}},{key:"getFloat64",value:function(t,e){return this._dataView.getFloat64(t,e)}},{key:"buffer",get:function(){return this._dataView.buffer}}]),t}();r.default=s},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],dGLV:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(t("@babel/runtime/helpers/classCallCheck")),i=o(t("@babel/runtime/helpers/createClass"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,r,i,o){(0,n.default)(this,t),this._dataView=new DataView(e),this._sliceOffset=r,this._littleEndian=i,this._bigTiff=o}return(0,i.default)(t,[{key:"covers",value:function(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var e,r=this.readUint32(t),n=this.readUint32(t+4);if(this._littleEndian){if(e=r+Math.pow(2,32)*n,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e}if(e=Math.pow(2,32)*r+n,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e}},{key:"readInt64",value:function(t){var e,r;if(this._littleEndian){if(e=this.readInt32(t),r=this.readUint32(t+4),combined=e+Math.pow(2,32)*r,!Number.isSafeInteger(combined))throw new Error("".concat(combined," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return combined}if(e=this.readUint32(t-this._sliceOffset),r=this.readInt32(t-this._sliceOffset+4),combined=Math.pow(2,32)*e+r,!Number.isSafeInteger(combined))throw new Error("".concat(combined," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return combined}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}},{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}}]),t}();r.default=s},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],ag4i:[function(t,e,r){"use strict";let n;function i(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^\/]+(?:\?.*)?$/,"$1")+"/"}Object.defineProperty(r,"__esModule",{value:!0}),r.getBundleURL=function(){return n||(n=function(){try{throw new Error}catch(t){const e=(""+t.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(e)return i(e[0])}return"/"}()),n},r.getBaseURL=i},{}],PmVK:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t("./get-bundle-url.browser");r.defaultPoolSize="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const i=t=>/^(file|https?:)?\/\//i.test(t);function o(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}r.selectWorkerImplementation=function(){return"undefined"==typeof Worker?class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}}:class extends Worker{constructor(t,e){"string"==typeof t&&e&&e._baseURL?t=new URL(t,e._baseURL):"string"==typeof t&&!i(t)&&n.getBundleURL().match(/^file:\/\//i)&&(t=new URL(t,n.getBundleURL().replace(/\/[^\/]+$/,"/")),t=o(`importScripts(${JSON.stringify(t)});`)),"string"==typeof t&&i(t)&&(t=o(`importScripts(${JSON.stringify(t)});`)),super(t,e)}}}},{"./get-bundle-url.browser":"ag4i"}],IAgR:[function(t,e,r){var n=1e3,i=60*n,o=60*i,s=24*o,a=7*s,u=365.25*s;function c(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"weeks":case"week":case"w":return r*a;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function l(t){var e=Math.abs(t);return e>=s?Math.round(t/s)+"d":e>=o?Math.round(t/o)+"h":e>=i?Math.round(t/i)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}function f(t){var e=Math.abs(t);return e>=s?h(t,e,s,"day"):e>=o?h(t,e,o,"hour"):e>=i?h(t,e,i,"minute"):e>=n?h(t,e,n,"second"):t+" ms"}function h(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}e.exports=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return c(t);if("number"===r&&isFinite(t))return e.long?f(t):l(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},{}],Kest:[function(t,e,r){e.exports=function(e){function r(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){let e;function s(...t){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(e||i);r.diff=o,r.prev=e,r.curr=i,e=i,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(e,i)=>{if("%%"===e)return e;a++;const o=n.formatters[i];if("function"==typeof o){const n=t[a];e=o.call(r,n),t.splice(a,1),a--}return e}),n.formatArgs.call(r,t),(r.log||n.log).apply(r,t)}return s.namespace=t,s.enabled=n.enabled(t),s.useColors=n.useColors(),s.color=r(t),s.destroy=i,s.extend=o,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function i(){const t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function o(t,e){const r=n(this.namespace+(void 0===e?":":e)+t);return r.log=this.log,r}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){const t=[...n.names.map(s),...n.skips.map(s).map(t=>"-"+t)].join(",");return n.enable(""),t},n.enable=function(t){let e;n.save(t),n.names=[],n.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(e=0;e<i;e++)r[e]&&("-"===(t=r[e].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")));for(e=0;e<n.instances.length;e++){const t=n.instances[e];t.enabled=n.enabled(t.namespace)}},n.enabled=function(t){if("*"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),Object.keys(e).forEach(t=>{n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=r,n.enable(n.load()),n}},{ms:"IAgR"}],jcLW:[function(t,e,r){t("process");var n=t("process");r.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},r.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(n++,"%c"===t&&(i=n))}),t.splice(i,0,r)},r.save=function(t){try{t?r.storage.setItem("debug",t):r.storage.removeItem("debug")}catch(t){}},r.load=function(){let t;try{t=r.storage.getItem("debug")}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=void 0),t},r.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(t){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=t("./common")(r);const{formatters:i}=e.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},{"./common":"Kest",process:"pBGv"}],sfrJ:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncSerialScheduler=void 0;var n=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(s,a)}u((n=n.apply(t,e||[])).next())}))};r.AsyncSerialScheduler=class{constructor(t){this._baseObserver=t,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(t=>this._baseObserver.error(t))}error(t){this._baseObserver.error(t)}schedule(t){const e=Promise.all(this._pendingPromises),r=[],i=t=>r.push(t),o=Promise.resolve().then(()=>n(this,void 0,void 0,(function*(){yield e,yield t(i),this._pendingPromises.delete(o);for(const t of r)this._baseObserver.next(t)}))).catch(t=>{this._pendingPromises.delete(o),this._baseObserver.error(t)});this._pendingPromises.add(o)}}},{}],lj3f:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerObservableSymbol=function(){n()&&!i("observable")&&(Symbol.observable=Symbol("observable"))},r.getSymbol=r.hasSymbol=r.hasSymbols=void 0;const n=()=>"function"==typeof Symbol;r.hasSymbols=n;const i=t=>n()&&Boolean(Symbol[t]);r.hasSymbol=i;r.getSymbol=t=>i(t)?Symbol[t]:"@@"+t,i("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"))},{}],B9l3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Observable=r.SubscriptionObserver=r.Subscription=void 0;var n=t("./_symbols");const i=(0,n.getSymbol)("iterator"),o=(0,n.getSymbol)("observable"),s=(0,n.getSymbol)("species");function a(t,e){const r=t[e];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function u(t){let e=t.constructor;return void 0!==e&&null===(e=e[s])&&(e=void 0),void 0!==e?e:m}function c(t){c.log?c.log(t):setTimeout(()=>{throw t},0)}function l(t){Promise.resolve().then(()=>{try{t()}catch(t){c(t)}})}function f(t){const e=t._cleanup;if(void 0!==e&&(t._cleanup=void 0,e))try{if("function"==typeof e)e();else{const t=a(e,"unsubscribe");t&&t.call(e)}}catch(t){c(t)}}function h(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function p(t,e,r){t._state="running";const n=t._observer;try{const i=n?a(n,e):void 0;switch(e){case"next":i&&i.call(n,r);break;case"error":if(h(t),!i)throw r;i.call(n,r);break;case"complete":h(t),i&&i.call(n)}}catch(t){c(t)}"closed"===t._state?f(t):"running"===t._state&&(t._state="ready")}function d(t,e,r){if("closed"!==t._state)return"buffering"===t._state?(t._queue=t._queue||[],void t._queue.push({type:e,value:r})):"ready"!==t._state?(t._state="buffering",t._queue=[{type:e,value:r}],void l(()=>(function(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const r of e)if(p(t,r.type,r.value),"closed"===t._state)break}})(t))):void p(t,e,r)}class g{constructor(t,e){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const r=new y(this);try{this._cleanup=e.call(void 0,r)}catch(t){r.error(t)}"initializing"===this._state&&(this._state="ready")}get closed(){return"closed"===this._state}unsubscribe(){"closed"!==this._state&&(h(this),f(this))}}r.Subscription=g;class y{constructor(t){this._subscription=t}get closed(){return"closed"===this._subscription._state}next(t){d(this._subscription,"next",t)}error(t){d(this._subscription,"error",t)}complete(){d(this._subscription,"complete")}}r.SubscriptionObserver=y;class m{constructor(t){if(!(this instanceof m))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,e,r){return"object"==typeof t&&null!==t||(t={next:t,error:e,complete:r}),new g(t,this._subscriber)}pipe(t,...e){let r=this;for(const n of[t,...e])r=n(r);return r}tap(t,e,r){const n="object"!=typeof t||null===t?{next:t,error:e,complete:r}:t;return new m(t=>this.subscribe({next(e){n.next&&n.next(e),t.next(e)},error(e){n.error&&n.error(e),t.error(e)},complete(){n.complete&&n.complete(),t.complete()},start(t){n.start&&n.start(t)}}))}forEach(t){return new Promise((e,r)=>{if("function"!=typeof t)return void r(new TypeError(t+" is not a function"));function n(){i.unsubscribe(),e()}const i=this.subscribe({next(e){try{t(e,n)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e})})}map(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(u(this))(e=>this.subscribe({next(r){let n=r;try{n=t(r)}catch(t){return e.error(t)}e.next(n)},error(t){e.error(t)},complete(){e.complete()}}))}filter(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return new(u(this))(e=>this.subscribe({next(r){try{if(!t(r))return}catch(t){return e.error(t)}e.next(r)},error(t){e.error(t)},complete(){e.complete()}}))}reduce(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function");const r=u(this),n=arguments.length>1;let i=!1,o=e;return new r(e=>this.subscribe({next(r){const s=!i;if(i=!0,!s||n)try{o=t(o,r)}catch(t){return e.error(t)}else o=r},error(t){e.error(t)},complete(){if(!i&&!n)return e.error(new TypeError("Cannot reduce an empty sequence"));e.next(o),e.complete()}}))}concat(...t){const e=u(this);return new e(r=>{let n,i=0;return function o(s){n=s.subscribe({next(t){r.next(t)},error(t){r.error(t)},complete(){i===t.length?(n=void 0,r.complete()):o(e.from(t[i++]))}})}(this),()=>{n&&(n.unsubscribe(),n=void 0)}})}flatMap(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");const e=u(this);return new e(r=>{const n=[],i=this.subscribe({next(i){let s;if(t)try{s=t(i)}catch(t){return r.error(t)}else s=i;const a=e.from(s).subscribe({next(t){r.next(t)},error(t){r.error(t)},complete(){const t=n.indexOf(a);t>=0&&n.splice(t,1),o()}});n.push(a)},error(t){r.error(t)},complete(){o()}});function o(){i.closed&&0===n.length&&r.complete()}return()=>{n.forEach(t=>t.unsubscribe()),i.unsubscribe()}})}[o](){return this}static from(t){const e="function"==typeof this?this:m;if(null==t)throw new TypeError(t+" is not an object");const r=a(t,o);if(r){const n=r.call(t);if(Object(n)!==n)throw new TypeError(n+" is not an object");return function(t){return t instanceof m}(n)&&n.constructor===e?n:new e(t=>n.subscribe(t))}if((0,n.hasSymbol)("iterator")){const r=a(t,i);if(r)return new e(e=>{l(()=>{if(!e.closed){for(const n of r.call(t))if(e.next(n),e.closed)return;e.complete()}})})}if(Array.isArray(t))return new e(e=>{l(()=>{if(!e.closed){for(const r of t)if(e.next(r),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){return new("function"==typeof this?this:m)(e=>{l(()=>{if(!e.closed){for(const r of t)if(e.next(r),e.closed)return;e.complete()}})})}static get[s](){return this}}r.Observable=m,(0,n.hasSymbols)()&&Object.defineProperty(m,Symbol("extensions"),{value:{symbol:o,hostReportError:c},configurable:!0});var v=m;r.default=v},{"./_symbols":"lj3f"}],QC75:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(t){"function"==typeof t?t():t&&"function"==typeof t.unsubscribe&&t.unsubscribe()};r.default=n},{}],apmd:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./_scheduler"),i=s(t("./observable")),o=s(t("./unsubscribe"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(s,a)}u((n=n.apply(t,e||[])).next())}))};var u=function(t){return e=>new i.default(r=>{const i=new n.AsyncSerialScheduler(r),s=e.subscribe({complete(){i.complete()},error(t){i.error(t)},next(e){i.schedule(r=>a(this,void 0,void 0,(function*(){(yield t(e))&&r(e)})))}});return()=>(0,o.default)(s)})};r.default=u},{"./_scheduler":"sfrJ","./observable":"B9l3","./unsubscribe":"QC75"}],FgiE:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAsyncIterator=function(t){return t&&(0,n.hasSymbol)("asyncIterator")&&t[Symbol.asyncIterator]},r.isIterator=function(t){return t&&(0,n.hasSymbol)("iterator")&&t[Symbol.iterator]};var n=t("./_symbols")},{"./_symbols":"lj3f"}],ltny:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./_scheduler"),i=t("./_util"),o=a(t("./observable")),s=a(t("./unsubscribe"));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(s,a)}u((n=n.apply(t,e||[])).next())}))},c=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){!function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)}(n,i,(e=t[r](e)).done,e.value)}))}}};var l=function(t){return e=>new o.default(r=>{const o=new n.AsyncSerialScheduler(r),a=e.subscribe({complete(){o.complete()},error(t){o.error(t)},next(e){o.schedule(r=>u(this,void 0,void 0,(function*(){var n,o;const s=yield t(e);if((0,i.isIterator)(s)||(0,i.isAsyncIterator)(s))try{for(var a,u=c(s);!(a=yield u.next()).done;){const t=a.value;r(t)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=u.return)&&(yield o.call(u))}finally{if(n)throw n.error}}else s.map(t=>r(t))})))}});return()=>(0,s.default)(a)})};r.default=l},{"./_scheduler":"sfrJ","./_util":"FgiE","./observable":"B9l3","./unsubscribe":"QC75"}],jAhG:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){return new n.Observable(e=>{let r=0;const n=setInterval(()=>{e.next(r++)},t);return()=>clearInterval(n)})};var n=t("./observable")},{"./observable":"B9l3"}],aP59:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./_scheduler"),i=s(t("./observable")),o=s(t("./unsubscribe"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(s,a)}u((n=n.apply(t,e||[])).next())}))};var u=function(t){return e=>new i.default(r=>{const i=new n.AsyncSerialScheduler(r),s=e.subscribe({complete(){i.complete()},error(t){i.error(t)},next(e){i.schedule(r=>a(this,void 0,void 0,(function*(){const n=yield t(e);r(n)})))}});return()=>(0,o.default)(s)})};r.default=u},{"./_scheduler":"sfrJ","./observable":"B9l3","./unsubscribe":"QC75"}],Rg1v:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./observable"),i=function(t){return t&&t.__esModule?t:{default:t}}(t("./unsubscribe"));var o=function(...t){return 0===t.length?n.Observable.from([]):new n.Observable(e=>{let r=0;const n=t.map(n=>n.subscribe({error(t){e.error(t),o()},next(t){e.next(t)},complete(){++r===t.length&&(e.complete(),o())}})),o=()=>{n.forEach(t=>(0,i.default)(t))};return o})};r.default=o},{"./observable":"B9l3","./unsubscribe":"QC75"}],wtHd:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./observable"));class i extends n.default{constructor(){super(t=>(this._observers.add(t),()=>this._observers.delete(t))),this._observers=new Set}next(t){for(const e of this._observers)e.next(t)}error(t){for(const e of this._observers)e.error(t)}complete(){for(const t of this._observers)t.complete()}}var o=i;r.default=o},{"./observable":"B9l3"}],NgdC:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(t("./observable")),i=s(t("./subject")),o=s(t("./unsubscribe"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){const e=new i.default;let r,s=0;return new n.default(n=>{r||(r=t.subscribe(e));const i=e.subscribe(n);return s++,()=>{s--,i.unsubscribe(),0===s&&((0,o.default)(r),r=void 0)}})};r.default=a},{"./observable":"B9l3","./subject":"wtHd","./unsubscribe":"QC75"}],b7o0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=t("./_scheduler"),i=s(t("./observable")),o=s(t("./unsubscribe"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(s,a)}u((n=n.apply(t,e||[])).next())}))};var u=function(t,e){return r=>new i.default(i=>{let s,u=0;const c=new n.AsyncSerialScheduler(i),l=r.subscribe({complete(){c.complete()},error(t){c.error(t)},next(r){c.schedule(n=>a(this,void 0,void 0,(function*(){const i=0===u?void 0===e?r:e:s;s=yield t(i,r,u++),n(s)})))}});return()=>(0,o.default)(l)})};r.default=u},{"./_scheduler":"sfrJ","./observable":"B9l3","./unsubscribe":"QC75"}],cyO3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"filter",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"flatMap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"interval",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"map",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"merge",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"multicast",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Observable",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"scan",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"Subject",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"unsubscribe",{enumerable:!0,get:function(){return h.default}});var n=p(t("./filter")),i=p(t("./flatMap")),o=p(t("./interval")),s=p(t("./map")),a=p(t("./merge")),u=p(t("./multicast")),c=p(t("./observable")),l=p(t("./scan")),f=p(t("./subject")),h=p(t("./unsubscribe"));function p(t){return t&&t.__esModule?t:{default:t}}},{"./filter":"apmd","./flatMap":"ltny","./interval":"jAhG","./map":"aP59","./merge":"Rg1v","./multicast":"NgdC","./observable":"B9l3","./scan":"b7o0","./subject":"wtHd","./unsubscribe":"QC75"}],Ed0r:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.allSettled=function(t){return Promise.all(t.map(t=>{const e=t=>({status:"fulfilled",value:t}),r=t=>({status:"rejected",reason:t}),n=Promise.resolve(t);try{return n.then(e,r)}catch(t){return Promise.reject(t)}}))}},{}],vLk9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t){t.initialized="initialized",t.taskCanceled="taskCanceled",t.taskCompleted="taskCompleted",t.taskFailed="taskFailed",t.taskQueued="taskQueued",t.taskQueueDrained="taskQueueDrained",t.taskStart="taskStart",t.terminated="terminated"}(r.PoolEventType||(r.PoolEventType={}))},{}],NcLz:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$errors=Symbol("thread.errors"),r.$events=Symbol("thread.events"),r.$terminate=Symbol("thread.terminate"),r.$transferable=Symbol("thread.transferable"),r.$worker=Symbol("thread.worker")},{}],xitR:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t("../symbols");function i(t){throw Error(t)}r.Thread={errors:t=>t[n.$errors]||i("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:t=>t[n.$events]||i("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:t=>t[n.$terminate]()}},{"../symbols":"NcLz"}],QKsy:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const o=i(t("debug")),s=t("observable-fns"),a=t("../ponyfills"),u=t("./implementation"),c=t("./pool-types");r.PoolEventType=c.PoolEventType;const l=t("./thread");r.Thread=l.Thread;let f=1;class h{constructor(t,e){this.eventSubject=new s.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const r="number"==typeof e?{size:e}:e||{},{size:n=u.defaultPoolSize}=r;this.debug=o.default(`threads:pool:${function(t){return t.replace(/\W/g," ").trim().replace(/\s+/g,"-")}(r.name||String(f++))}`),this.options=r,this.workers=function(t,e){return function(t){const e=[];for(let r=0;r<t;r++)e.push(r);return e}(e).map(()=>({init:t(),runningTasks:[]}))}(t,n),this.eventObservable=s.multicast(s.Observable.from(this.eventSubject)),Promise.all(this.workers.map(t=>t.init)).then(()=>this.eventSubject.next({type:c.PoolEventType.initialized,size:this.workers.length}),t=>{this.debug("Error while initializing pool worker:",t),this.eventSubject.error(t),this.initErrors.push(t)})}findIdlingWorker(){const{concurrency:t=1}=this.options;return this.workers.find(e=>e.runningTasks.length<t)}runPoolTask(t,e){return n(this,void 0,void 0,(function*(){const r=this.workers.indexOf(t)+1;this.debug(`Running task #${e.id} on worker #${r}...`),this.eventSubject.next({type:c.PoolEventType.taskStart,taskID:e.id,workerID:r});try{const n=yield e.run(yield t.init);this.debug(`Task #${e.id} completed successfully`),this.eventSubject.next({type:c.PoolEventType.taskCompleted,returnValue:n,taskID:e.id,workerID:r})}catch(t){this.debug(`Task #${e.id} failed`),this.eventSubject.next({type:c.PoolEventType.taskFailed,taskID:e.id,error:t,workerID:r})}}))}run(t,e){return n(this,void 0,void 0,(function*(){const r=(()=>n(this,void 0,void 0,(function*(){yield function(t){return new Promise(e=>setTimeout(e,t))}(0);try{yield this.runPoolTask(t,e)}finally{t.runningTasks=t.runningTasks.filter(t=>t!==r),this.isClosing||this.scheduleWork()}})))();t.runningTasks.push(r)}))}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const t=this.findIdlingWorker();if(!t)return;const e=this.taskQueue.shift();if(!e)return this.debug("Task queue is empty"),void this.eventSubject.next({type:c.PoolEventType.taskQueueDrained});this.run(t,e)}taskCompletion(t){return new Promise((e,r)=>{const n=this.events().subscribe(i=>{i.type===c.PoolEventType.taskCompleted&&i.taskID===t?(n.unsubscribe(),e(i.returnValue)):i.type===c.PoolEventType.taskFailed&&i.taskID===t?(n.unsubscribe(),r(i.error)):i.type===c.PoolEventType.terminated&&(n.unsubscribe(),r(Error("Pool has been terminated before task was run.")))})})}settled(t=!1){return n(this,void 0,void 0,(function*(){const e=()=>(function(t,e){return t.reduce((t,r)=>[...t,...e(r)],[])})(this.workers,t=>t.runningTasks),r=[],n=this.eventObservable.subscribe(t=>{t.type===c.PoolEventType.taskFailed&&r.push(t.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):t&&0===this.taskQueue.length?(yield a.allSettled(e()),r):(yield new Promise((t,e)=>{const r=this.eventObservable.subscribe({next(e){e.type===c.PoolEventType.taskQueueDrained&&(r.unsubscribe(),t())},error:e})}),yield a.allSettled(e()),n.unsubscribe(),r)}))}completed(t=!1){return n(this,void 0,void 0,(function*(){const e=this.settled(t),r=new Promise((t,r)=>{const n=this.eventObservable.subscribe({next(i){i.type===c.PoolEventType.taskQueueDrained?(n.unsubscribe(),t(e)):i.type===c.PoolEventType.taskFailed&&(n.unsubscribe(),r(i.error))},error:r})}),n=yield Promise.race([e,r]);if(n.length>0)throw n[0]}))}events(){return this.eventObservable}queue(t){const{maxQueuedJobs:e=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const r=()=>this.taskCompletion(i.id);let n;const i={id:this.nextTaskID++,run:t,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(t=>t!==i),this.eventSubject.next({type:c.PoolEventType.taskCanceled,taskID:i.id}))},get then(){if(!n){const t=r();n=t.then.bind(t)}return n}};if(this.taskQueue.length>=e)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:c.PoolEventType.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(t){return n(this,void 0,void 0,(function*(){this.isClosing=!0,t||(yield this.completed(!0)),this.eventSubject.next({type:c.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(t=>n(this,void 0,void 0,(function*(){return l.Thread.terminate(yield t.init)}))))}))}}function p(t,e){return new h(t,e)}h.EventType=c.PoolEventType,p.EventType=c.PoolEventType,r.Pool=p},{debug:"jcLW","observable-fns":"cyO3","../ponyfills":"Ed0r","./implementation":"PmVK","./pool-types":"vLk9","./thread":"xitR"}],huOx:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extendSerializer=function(t,e){const r=t.deserialize.bind(t),n=t.serialize.bind(t);return{deserialize:t=>e.deserialize(t,r),serialize:t=>e.serialize(t,n)}};const n=t=>Object.assign(Error(t.message),{name:t.name,stack:t.stack}),i=t=>({__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack});r.DefaultSerializer={deserialize:t=>(t=>t&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker)(t)?n(t):t,serialize:t=>t instanceof Error?i(t):t}},{}],ujDW:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t("./serializers");let i=n.DefaultSerializer;r.registerSerializer=function(t){i=n.extendSerializer(i,t)},r.deserialize=function(t){return i.deserialize(t)},r.serialize=function(t){return i.serialize(t)}},{"./serializers":"huOx"}],KV9o:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=()=>void 0;r.createPromiseWithResolver=function(){let t,e=!1,r=n;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r()}]}},{}],DioG:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});t("../symbols");!function(t){t.internalError="internalError",t.message="message",t.termination="termination"}(r.WorkerEventType||(r.WorkerEventType={}))},{"../symbols":"NcLz"}],qMn5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t("observable-fns"),i=()=>void 0,o=t=>t,s=t=>Promise.resolve().then(t);function a(t){throw t}class u extends n.Observable{constructor(t){super(e=>{const r=this,n=Object.assign(Object.assign({},e),{complete(){e.complete(),r.onCompletion()},error(t){e.error(t),r.onError(t)},next(t){e.next(t),r.onNext(t)}});try{return this.initHasRun=!0,t(n)}catch(t){n.error(t)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const e of this.rejectionCallbacks)s(()=>e(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)s(()=>t(this.firstValue))}then(t,e){const r=t||o,n=e||a;let i=!1;return new Promise((t,e)=>{const o=r=>{if(!i){i=!0;try{t(n(r))}catch(t){e(t)}}};return this.initHasRun||this.subscribe({error:o}),"fulfilled"===this.state?t(r(this.firstValue)):"rejected"===this.state?(i=!0,t(n(this.rejection))):(this.fulfillmentCallbacks.push(e=>{try{t(r(e))}catch(t){o(t)}}),void this.rejectionCallbacks.push(o))})}catch(t){return this.then(void 0,t)}finally(t){const e=t||i;return this.then(t=>(e(),t),()=>e())}static from(t){return function(t){return t&&"function"==typeof t.then}(t)?new u(e=>{t.then(t=>{e.next(t),e.complete()},t=>{e.error(t)})}):super.from(t)}}r.ObservablePromise=u},{"observable-fns":"cyO3"}],HnZs:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t("./symbols");r.isTransferDescriptor=function(t){return t&&"object"==typeof t&&t[n.$transferable]},r.Transfer=function(t,e){if(!e){if(!function(t){return!(!t||"object"!=typeof t)}(t))throw Error();e=[t]}return{[n.$transferable]:!0,send:t,transferables:e}}},{"./symbols":"NcLz"}],No47:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(t){t.run="run"}(r.MasterMessageType||(r.MasterMessageType={})),function(t){t.error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"}(r.WorkerMessageType||(r.WorkerMessageType={}))},{}],WRyd:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const i=n(t("debug")),o=t("observable-fns"),s=t("../common"),a=t("../observable-promise"),u=t("../transferable"),c=t("../types/messages"),l=i.default("threads:master:messages");let f=1;const h=t=>Array.from(new Set(t)),p=t=>t&&t.type===c.WorkerMessageType.error,d=t=>t&&t.type===c.WorkerMessageType.result,g=t=>t&&t.type===c.WorkerMessageType.running;function y(t,e){return new o.Observable(r=>{let n;const i=o=>{if(l("Message from worker:",o.data),o.data&&o.data.uid===e)if(g(o.data))n=o.data.resultType;else if(d(o.data))"promise"===n?(void 0!==o.data.payload&&r.next(s.deserialize(o.data.payload)),r.complete(),t.removeEventListener("message",i)):(o.data.payload&&r.next(s.deserialize(o.data.payload)),o.data.complete&&(r.complete(),t.removeEventListener("message",i)));else if(p(o.data)){const e=s.deserialize(o.data.error);r.error(e),t.removeEventListener("message",i)}};return t.addEventListener("message",i),()=>t.removeEventListener("message",i)})}function m(t){if(0===t.length)return{args:[],transferables:[]};const e=[],r=[];for(const n of t)u.isTransferDescriptor(n)?(e.push(s.serialize(n.send)),r.push(...n.transferables)):e.push(s.serialize(n));return{args:e,transferables:0===r.length?r:h(r)}}function v(t,e){return(...r)=>{const n=f++,{args:i,transferables:s}=m(r),u={type:c.MasterMessageType.run,uid:n,method:e,args:i};l("Sending command to run function to worker:",u);try{t.postMessage(u,s)}catch(t){return a.ObservablePromise.from(Promise.reject(t))}return a.ObservablePromise.from(o.multicast(y(t,n)))}}r.createProxyFunction=v,r.createProxyModule=function(t,e){const r={};for(const n of e)r[n]=v(t,n);return r}},{debug:"jcLW","observable-fns":"cyO3","../common":"ujDW","../observable-promise":"qMn5","../transferable":"HnZs","../types/messages":"No47"}],Hy5Q:[function(t,e,r){t("process"),t("process");var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});const o=i(t("debug")),s=t("observable-fns"),a=t("../common"),u=t("../promise"),c=t("../symbols"),l=t("../types/master"),f=t("./invocation-proxy"),h=o.default("threads:master:messages"),p=o.default("threads:master:spawn"),d=o.default("threads:master:thread-utils"),g=t=>t&&"init"===t.type,y=t=>t&&"uncaughtError"===t.type,m=1e4;function v(t,e,r){return n(this,void 0,void 0,(function*(){let n;const i=new Promise((t,i)=>{n=setTimeout(()=>i(Error(r)),e)}),o=yield Promise.race([t,i]);return clearTimeout(n),o}))}function _(t){return new Promise((e,r)=>{const n=i=>{h("Message from worker before finishing initialization:",i.data),g(i.data)?(t.removeEventListener("message",n),e(i.data)):y(i.data)&&(t.removeEventListener("message",n),r(a.deserialize(i.data.error)))};t.addEventListener("message",n)})}function b(t,e){return new s.Observable(r=>{const n=t=>{const e={type:l.WorkerEventType.message,data:t.data};r.next(e)},i=t=>{d("Unhandled promise rejection event in thread:",t);const e={type:l.WorkerEventType.internalError,error:Error(t.reason)};r.next(e)};t.addEventListener("message",n),t.addEventListener("unhandledrejection",i),e.then(()=>{const e={type:l.WorkerEventType.termination};t.removeEventListener("message",n),t.removeEventListener("unhandledrejection",i),r.next(e),r.complete()})})}function w(t){const[e,r]=u.createPromiseWithResolver();return{terminate:()=>n(this,void 0,void 0,(function*(){d("Terminating worker"),yield t.terminate(),r()})),termination:e}}function x(t,e,r,n){const i=r.filter(t=>t.type===l.WorkerEventType.internalError).map(t=>t.error);return Object.assign(t,{[c.$errors]:i,[c.$events]:r,[c.$terminate]:n,[c.$worker]:e})}r.spawn=function(t,e){return n(this,void 0,void 0,(function*(){p("Initializing new thread");const r=(yield v(_(t),e&&e.timeout?e.timeout:m,`Timeout: Did not receive an init message from worker after ${m}ms. Make sure the worker calls expose().`)).exposed,{termination:n,terminate:i}=w(t),o=b(t,n);if("function"===r.type)return x(f.createProxyFunction(t),t,o,i);if("module"===r.type)return x(f.createProxyModule(t,r.methods),t,o,i);{const t=r.type;throw Error(`Worker init message states unexpected type of expose(): ${t}`)}}))}},{debug:"jcLW","observable-fns":"cyO3","../common":"ujDW","../promise":"KV9o","../symbols":"NcLz","../types/master":"DioG","./invocation-proxy":"WRyd",process:"pBGv"}],FHK0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t("./implementation");var i=t("./pool");r.Pool=i.Pool;var o=t("./spawn");r.spawn=o.spawn;var s=t("./thread");r.Thread=s.Thread,r.Worker=n.selectWorkerImplementation()},{"./implementation":"PmVK","./pool":"QKsy","./spawn":"Hy5Q","./thread":"xitR"}],Tmuk:[function(t,e,r){arguments[3];var n=arguments[3];Object.defineProperty(r,"__esModule",{value:!0});const i=t("./index");void 0!==n?n.Worker=i.Worker:"undefined"!=typeof window&&(window.Worker=i.Worker)},{"./index":"FHK0"}],IB1e:[function(t,e,r){t("./dist/master/register")},{"./dist/master/register":"Tmuk"}],z2GM:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extendSerializer=function(t,e){const r=t.deserialize.bind(t),n=t.serialize.bind(t);return{deserialize:t=>e.deserialize(t,r),serialize:t=>e.serialize(t,n)}},r.DefaultSerializer=void 0;const n=t=>Object.assign(Error(t.message),{name:t.name,stack:t.stack}),i=t=>({__error_marker:"$$error",message:t.message,name:t.name,stack:t.stack}),o={deserialize:t=>(t=>t&&"object"==typeof t&&"__error_marker"in t&&"$$error"===t.__error_marker)(t)?n(t):t,serialize:t=>t instanceof Error?i(t):t};r.DefaultSerializer=o},{}],kdjL:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.registerSerializer=function(t){i=(0,n.extendSerializer)(i,t)},r.deserialize=function(t){return i.deserialize(t)},r.serialize=function(t){return i.serialize(t)};var n=t("./serializers");let i=n.DefaultSerializer},{"./serializers":"z2GM"}],LQHy:[function(t,e,r){"use strict";let n;function i(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^\/]+(?:\?.*)?$/,"$1")+"/"}Object.defineProperty(r,"__esModule",{value:!0}),r.getBaseURL=i,r.getBundleURL=function(){return n||(n=function(){try{throw new Error}catch(t){const e=(""+t.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(e)return i(e[0])}return"/"}()),n}},{}],XK2w:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.selectWorkerImplementation=function(){return"undefined"==typeof Worker?class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}}:class extends Worker{constructor(t,e){"string"==typeof t&&e&&e._baseURL?t=new URL(t,e._baseURL):"string"==typeof t&&!o(t)&&(0,n.getBundleURL)().match(/^file:\/\//i)&&(t=new URL(t,(0,n.getBundleURL)().replace(/\/[^\/]+$/,"/")),t=s(`importScripts(${JSON.stringify(t)});`)),"string"==typeof t&&o(t)&&(t=s(`importScripts(${JSON.stringify(t)});`)),super(t,e)}}},r.defaultPoolSize=void 0;var n=t("./get-bundle-url.browser");const i="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;r.defaultPoolSize=i;const o=t=>/^(file|https?:)?\/\//i.test(t);function s(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}},{"./get-bundle-url.browser":"LQHy"}],UYCO:[function(t,e,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.PoolEventType=void 0,r.PoolEventType=n,function(t){t.initialized="initialized",t.taskCanceled="taskCanceled",t.taskCompleted="taskCompleted",t.taskFailed="taskFailed",t.taskQueued="taskQueued",t.taskQueueDrained="taskQueueDrained",t.taskStart="taskStart",t.terminated="terminated"}(n||(r.PoolEventType=n={}))},{}],fmdM:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.$worker=r.$transferable=r.$terminate=r.$events=r.$errors=void 0;const n=Symbol("thread.errors");r.$errors=n;const i=Symbol("thread.events");r.$events=i;const o=Symbol("thread.terminate");r.$terminate=o;const s=Symbol("thread.transferable");r.$transferable=s;const a=Symbol("thread.worker");r.$worker=a},{}],LBuu:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Thread=void 0;var n=t("../symbols");function i(t){throw Error(t)}const o={errors:t=>t[n.$errors]||i("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),events:t=>t[n.$events]||i("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise."),terminate:t=>t[n.$terminate]()};r.Thread=o},{"../symbols":"fmdM"}],EB3M:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PoolEventType",{enumerable:!0,get:function(){return a.PoolEventType}}),Object.defineProperty(r,"Thread",{enumerable:!0,get:function(){return u.Thread}}),r.Pool=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("debug")),i=t("observable-fns"),o=t("../ponyfills"),s=t("./implementation"),a=t("./pool-types"),u=t("./thread");var c=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};let l=1;class f{constructor(t,e){this.eventSubject=new i.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const r="number"==typeof e?{size:e}:e||{},{size:o=s.defaultPoolSize}=r;this.debug=(0,n.default)(`threads:pool:${function(t){return t.replace(/\W/g," ").trim().replace(/\s+/g,"-")}(r.name||String(l++))}`),this.options=r,this.workers=function(t,e){return function(t){const e=[];for(let r=0;r<t;r++)e.push(r);return e}(e).map(()=>({init:t(),runningTasks:[]}))}(t,o),this.eventObservable=(0,i.multicast)(i.Observable.from(this.eventSubject)),Promise.all(this.workers.map(t=>t.init)).then(()=>this.eventSubject.next({type:a.PoolEventType.initialized,size:this.workers.length}),t=>{this.debug("Error while initializing pool worker:",t),this.eventSubject.error(t),this.initErrors.push(t)})}findIdlingWorker(){const{concurrency:t=1}=this.options;return this.workers.find(e=>e.runningTasks.length<t)}runPoolTask(t,e){return c(this,void 0,void 0,(function*(){const r=this.workers.indexOf(t)+1;this.debug(`Running task #${e.id} on worker #${r}...`),this.eventSubject.next({type:a.PoolEventType.taskStart,taskID:e.id,workerID:r});try{const n=yield e.run(yield t.init);this.debug(`Task #${e.id} completed successfully`),this.eventSubject.next({type:a.PoolEventType.taskCompleted,returnValue:n,taskID:e.id,workerID:r})}catch(t){this.debug(`Task #${e.id} failed`),this.eventSubject.next({type:a.PoolEventType.taskFailed,taskID:e.id,error:t,workerID:r})}}))}run(t,e){return c(this,void 0,void 0,(function*(){const r=(()=>c(this,void 0,void 0,(function*(){yield function(t){return new Promise(e=>setTimeout(e,t))}(0);try{yield this.runPoolTask(t,e)}finally{t.runningTasks=t.runningTasks.filter(t=>t!==r),this.isClosing||this.scheduleWork()}})))();t.runningTasks.push(r)}))}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const t=this.findIdlingWorker();if(!t)return;const e=this.taskQueue.shift();if(!e)return this.debug("Task queue is empty"),void this.eventSubject.next({type:a.PoolEventType.taskQueueDrained});this.run(t,e)}taskCompletion(t){return new Promise((e,r)=>{const n=this.events().subscribe(i=>{i.type===a.PoolEventType.taskCompleted&&i.taskID===t?(n.unsubscribe(),e(i.returnValue)):i.type===a.PoolEventType.taskFailed&&i.taskID===t?(n.unsubscribe(),r(i.error)):i.type===a.PoolEventType.terminated&&(n.unsubscribe(),r(Error("Pool has been terminated before task was run.")))})})}settled(t=!1){return c(this,void 0,void 0,(function*(){const e=()=>(function(t,e){return t.reduce((t,r)=>[...t,...e(r)],[])})(this.workers,t=>t.runningTasks),r=[],n=this.eventObservable.subscribe(t=>{t.type===a.PoolEventType.taskFailed&&r.push(t.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):t&&0===this.taskQueue.length?(yield(0,o.allSettled)(e()),r):(yield new Promise((t,e)=>{const r=this.eventObservable.subscribe({next(e){e.type===a.PoolEventType.taskQueueDrained&&(r.unsubscribe(),t())},error:e})}),yield(0,o.allSettled)(e()),n.unsubscribe(),r)}))}completed(t=!1){return c(this,void 0,void 0,(function*(){const e=this.settled(t),r=new Promise((t,r)=>{const n=this.eventObservable.subscribe({next(i){i.type===a.PoolEventType.taskQueueDrained?(n.unsubscribe(),t(e)):i.type===a.PoolEventType.taskFailed&&(n.unsubscribe(),r(i.error))},error:r})}),n=yield Promise.race([e,r]);if(n.length>0)throw n[0]}))}events(){return this.eventObservable}queue(t){const{maxQueuedJobs:e=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const r=()=>this.taskCompletion(i.id);let n;const i={id:this.nextTaskID++,run:t,cancel:()=>{-1!==this.taskQueue.indexOf(i)&&(this.taskQueue=this.taskQueue.filter(t=>t!==i),this.eventSubject.next({type:a.PoolEventType.taskCanceled,taskID:i.id}))},get then(){if(!n){const t=r();n=t.then.bind(t)}return n}};if(this.taskQueue.length>=e)throw Error("Maximum number of pool tasks queued. Refusing to queue another one.\nThis usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.");return this.debug(`Queueing task #${i.id}...`),this.taskQueue.push(i),this.eventSubject.next({type:a.PoolEventType.taskQueued,taskID:i.id}),this.scheduleWork(),i}terminate(t){return c(this,void 0,void 0,(function*(){this.isClosing=!0,t||(yield this.completed(!0)),this.eventSubject.next({type:a.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(t=>c(this,void 0,void 0,(function*(){return u.Thread.terminate(yield t.init)}))))}))}}function h(t,e){return new f(t,e)}f.EventType=a.PoolEventType,h.EventType=a.PoolEventType;const p=h;r.Pool=p},{debug:"jcLW","observable-fns":"cyO3","../ponyfills":"Ed0r","./implementation":"XK2w","./pool-types":"UYCO","./thread":"LBuu"}],PRGP:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createPromiseWithResolver=function(){let t,e=!1,r=n;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r()}]};const n=()=>void 0},{}],ZLGT:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerEventType=void 0;var n;t("../symbols");r.WorkerEventType=n,function(t){t.internalError="internalError",t.message="message",t.termination="termination"}(n||(r.WorkerEventType=n={}))},{"../symbols":"fmdM"}],zXl4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ObservablePromise=void 0;var n=t("observable-fns");const i=()=>void 0,o=t=>t,s=t=>Promise.resolve().then(t);function a(t){throw t}class u extends n.Observable{constructor(t){super(e=>{const r=this,n=Object.assign(Object.assign({},e),{complete(){e.complete(),r.onCompletion()},error(t){e.error(t),r.onError(t)},next(t){e.next(t),r.onNext(t)}});try{return this.initHasRun=!0,t(n)}catch(t){n.error(t)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const e of this.rejectionCallbacks)s(()=>e(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)s(()=>t(this.firstValue))}then(t,e){const r=t||o,n=e||a;let i=!1;return new Promise((t,e)=>{const o=r=>{if(!i){i=!0;try{t(n(r))}catch(t){e(t)}}};return this.initHasRun||this.subscribe({error:o}),"fulfilled"===this.state?t(r(this.firstValue)):"rejected"===this.state?(i=!0,t(n(this.rejection))):(this.fulfillmentCallbacks.push(e=>{try{t(r(e))}catch(t){o(t)}}),void this.rejectionCallbacks.push(o))})}catch(t){return this.then(void 0,t)}finally(t){const e=t||i;return this.then(t=>(e(),t),()=>e())}static from(t){return function(t){return t&&"function"==typeof t.then}(t)?new u(e=>{t.then(t=>{e.next(t),e.complete()},t=>{e.error(t)})}):super.from(t)}}r.ObservablePromise=u},{"observable-fns":"cyO3"}],qW1u:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isTransferDescriptor=function(t){return t&&"object"==typeof t&&t[n.$transferable]},r.Transfer=function(t,e){if(!e){if(!function(t){return!(!t||"object"!=typeof t)}(t))throw Error();e=[t]}return{[n.$transferable]:!0,send:t,transferables:e}};var n=t("./symbols")},{"./symbols":"fmdM"}],fUdt:[function(t,e,r){"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,r.MasterMessageType=n,function(t){t.run="run"}(n||(r.MasterMessageType=n={})),r.WorkerMessageType=i,function(t){t.error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"}(i||(r.WorkerMessageType=i={}))},{}],iMbm:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createProxyFunction=m,r.createProxyModule=function(t,e){const r={};for(const n of e)r[n]=m(t,n);return r};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("debug")),i=t("observable-fns"),o=t("../common"),s=t("../observable-promise"),a=t("../transferable"),u=t("../types/messages");const c=(0,n.default)("threads:master:messages");let l=1;const f=t=>Array.from(new Set(t)),h=t=>t&&t.type===u.WorkerMessageType.error,p=t=>t&&t.type===u.WorkerMessageType.result,d=t=>t&&t.type===u.WorkerMessageType.running;function g(t,e){return new i.Observable(r=>{let n;const i=s=>{if(c("Message from worker:",s.data),s.data&&s.data.uid===e)if(d(s.data))n=s.data.resultType;else if(p(s.data))"promise"===n?(void 0!==s.data.payload&&r.next((0,o.deserialize)(s.data.payload)),r.complete(),t.removeEventListener("message",i)):(s.data.payload&&r.next((0,o.deserialize)(s.data.payload)),s.data.complete&&(r.complete(),t.removeEventListener("message",i)));else if(h(s.data)){const e=(0,o.deserialize)(s.data.error);r.error(e),t.removeEventListener("message",i)}};return t.addEventListener("message",i),()=>t.removeEventListener("message",i)})}function y(t){if(0===t.length)return{args:[],transferables:[]};const e=[],r=[];for(const n of t)(0,a.isTransferDescriptor)(n)?(e.push((0,o.serialize)(n.send)),r.push(...n.transferables)):e.push((0,o.serialize)(n));return{args:e,transferables:0===r.length?r:f(r)}}function m(t,e){return(...r)=>{const n=l++,{args:o,transferables:a}=y(r),f={type:u.MasterMessageType.run,uid:n,method:e,args:o};c("Sending command to run function to worker:",f);try{t.postMessage(f,a)}catch(t){return s.ObservablePromise.from(Promise.reject(t))}return s.ObservablePromise.from((0,i.multicast)(g(t,n)))}}},{debug:"jcLW","observable-fns":"cyO3","../common":"kdjL","../observable-promise":"zXl4","../transferable":"qW1u","../types/messages":"fUdt"}],a83E:[function(t,e,r){t("process"),t("process");Object.defineProperty(r,"__esModule",{value:!0}),r.spawn=function(t,e){return l(this,void 0,void 0,(function*(){h("Initializing new thread");const r=(yield function(t,e,r){return l(this,void 0,void 0,(function*(){let n;const i=new Promise((t,i)=>{n=setTimeout(()=>i(Error(r)),e)}),o=yield Promise.race([t,i]);return clearTimeout(n),o}))}(m(t),e&&e.timeout?e.timeout:y,`Timeout: Did not receive an init message from worker after ${y}ms. Make sure the worker calls expose().`)).exposed,{termination:n,terminate:i}=_(t),o=v(t,n);if("function"===r.type)return b((0,c.createProxyFunction)(t),t,o,i);if("module"===r.type)return b((0,c.createProxyModule)(t,r.methods),t,o,i);{const t=r.type;throw Error(`Worker init message states unexpected type of expose(): ${t}`)}}))};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("debug")),i=t("observable-fns"),o=t("../common"),s=t("../promise"),a=t("../symbols"),u=t("../types/master"),c=t("./invocation-proxy");var l=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};const f=(0,n.default)("threads:master:messages"),h=(0,n.default)("threads:master:spawn"),p=(0,n.default)("threads:master:thread-utils"),d=t=>t&&"init"===t.type,g=t=>t&&"uncaughtError"===t.type,y=1e4;function m(t){return new Promise((e,r)=>{const n=i=>{f("Message from worker before finishing initialization:",i.data),d(i.data)?(t.removeEventListener("message",n),e(i.data)):g(i.data)&&(t.removeEventListener("message",n),r((0,o.deserialize)(i.data.error)))};t.addEventListener("message",n)})}function v(t,e){return new i.Observable(r=>{const n=t=>{const e={type:u.WorkerEventType.message,data:t.data};r.next(e)},i=t=>{p("Unhandled promise rejection event in thread:",t);const e={type:u.WorkerEventType.internalError,error:Error(t.reason)};r.next(e)};t.addEventListener("message",n),t.addEventListener("unhandledrejection",i),e.then(()=>{const e={type:u.WorkerEventType.termination};t.removeEventListener("message",n),t.removeEventListener("unhandledrejection",i),r.next(e),r.complete()})})}function _(t){const[e,r]=(0,s.createPromiseWithResolver)();return{terminate:()=>l(this,void 0,void 0,(function*(){p("Terminating worker"),yield t.terminate(),r()})),termination:e}}function b(t,e,r,n){const i=r.filter(t=>t.type===u.WorkerEventType.internalError).map(t=>t.error);return Object.assign(t,{[a.$errors]:i,[a.$events]:r,[a.$terminate]:n,[a.$worker]:e})}},{debug:"jcLW","observable-fns":"cyO3","../common":"kdjL","../promise":"PRGP","../symbols":"fmdM","../types/master":"ZLGT","./invocation-proxy":"iMbm",process:"pBGv"}],HfK0:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Pool",{enumerable:!0,get:function(){return i.Pool}}),Object.defineProperty(r,"spawn",{enumerable:!0,get:function(){return o.spawn}}),Object.defineProperty(r,"Thread",{enumerable:!0,get:function(){return s.Thread}}),r.Worker=void 0;var n=t("./implementation"),i=t("./pool"),o=t("./spawn"),s=t("./thread");const a=(0,n.selectWorkerImplementation)();r.Worker=a},{"./implementation":"XK2w","./pool":"EB3M","./spawn":"a83E","./thread":"LBuu"}],JZ8d:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}},{}],LkZ7:[function(t,e,r){arguments[3];var n=arguments[3];Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,o=s(t("./ponyfill.js"));function s(t){return t&&t.__esModule?t:{default:t}}i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==e?e:Function("return this")();var a=(0,o.default)(i),u=a;r.default=u},{"./ponyfill.js":"JZ8d"}],UALh:[function(t,e,r){"use strict";const n=t("symbol-observable").default;e.exports=t=>Boolean(t&&t[n]&&t===t[n]())},{"symbol-observable":"LkZ7"}],AZa4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={isWorkerRuntime:function(){return!("undefined"==typeof self||!self.postMessage)},postMessageToMaster:function(t,e){self.postMessage(t,e)},subscribeToMasterMessages:function(t){const e=e=>{t(e.data)};return self.addEventListener("message",e),()=>{self.removeEventListener("message",e)}}};r.default=n},{}],l5pR:[function(t,e,r){t("process");var n=t("process");Object.defineProperty(r,"__esModule",{value:!0}),r.expose=function(t){if(!u.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(f)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(f=!0,"function"==typeof t)u.default.subscribeToMasterMessages(e=>{h(e)&&!e.method&&_(e.uid,t,e.args.map(o.deserialize))}),function(){const t={type:a.WorkerMessageType.init,exposed:{type:"function"}};u.default.postMessageToMaster(t)}();else{if("object"!=typeof t||!t)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${t}`);u.default.subscribeToMasterMessages(e=>{h(e)&&e.method&&_(e.uid,t[e.method],e.args.map(o.deserialize))}),function(t){const e={type:a.WorkerMessageType.init,exposed:{type:"module",methods:t}};u.default.postMessageToMaster(e)}(Object.keys(t).filter(e=>"function"==typeof t[e]))}},Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return o.registerSerializer}}),Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return s.Transfer}});var i=c(t("is-observable")),o=t("../common"),s=t("../transferable"),a=t("../types/messages"),u=c(t("./implementation"));function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};let f=!1;const h=t=>t&&t.type===a.MasterMessageType.run,p=t=>(0,i.default)(t)||function(t){return t&&"object"==typeof t&&"function"==typeof t.subscribe}(t);function d(t){return(0,s.isTransferDescriptor)(t)?{payload:t.send,transferables:t.transferables}:{payload:t,transferables:void 0}}function g(t,e){const{payload:r,transferables:n}=d(e),i={type:a.WorkerMessageType.error,uid:t,error:(0,o.serialize)(r)};u.default.postMessageToMaster(i,n)}function y(t,e,r){const{payload:n,transferables:i}=d(r),o={type:a.WorkerMessageType.result,uid:t,complete:!!e||void 0,payload:n};u.default.postMessageToMaster(o,i)}function m(t,e){const r={type:a.WorkerMessageType.running,uid:t,resultType:e};u.default.postMessageToMaster(r)}function v(t){try{const e={type:a.WorkerMessageType.uncaughtError,error:(0,o.serialize)(t)};u.default.postMessageToMaster(e)}catch(t){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already. Latest error:",t)}}function _(t,e,r){return l(this,void 0,void 0,(function*(){let n;try{n=e(...r)}catch(e){return g(t,e)}const i=p(n)?"observable":"promise";if(m(t,i),p(n))n.subscribe(e=>y(t,!1,(0,o.serialize)(e)),e=>g(t,(0,o.serialize)(e)),()=>y(t,!0));else try{const e=yield n;y(t,!0,(0,o.serialize)(e))}catch(e){g(t,(0,o.serialize)(e))}}))}"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.default.isWorkerRuntime()&&(self.addEventListener("error",t=>{setTimeout(()=>v(t.error||t),250)}),self.addEventListener("unhandledrejection",t=>{const e=t.reason;e&&"string"==typeof e.message&&setTimeout(()=>v(e),250)})),void 0!==n&&"function"==typeof n.on&&u.default.isWorkerRuntime()&&(n.on("uncaughtException",t=>{setTimeout(()=>v(t),250)}),n.on("unhandledRejection",t=>{t&&"string"==typeof t.message&&setTimeout(()=>v(t),250)}))},{"is-observable":"UALh","../common":"kdjL","../transferable":"qW1u","../types/messages":"fUdt","./implementation":"AZa4",process:"pBGv"}],CqwR:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={registerSerializer:!0,expose:!0,DefaultSerializer:!0,Transfer:!0};Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return i.registerSerializer}}),Object.defineProperty(r,"expose",{enumerable:!0,get:function(){return s.expose}}),Object.defineProperty(r,"DefaultSerializer",{enumerable:!0,get:function(){return a.DefaultSerializer}}),Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return u.Transfer}});var i=t("./common"),o=t("./master/index");Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}}))}));var s=t("./worker/index"),a=t("./serializers"),u=t("./transferable")},{"./common":"kdjL","./master/index":"HfK0","./worker/index":"l5pR","./serializers":"z2GM","./transferable":"qW1u"}],dHPO:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=u(t("@babel/runtime/regenerator")),i=u(t("@babel/runtime/helpers/asyncToGenerator")),o=u(t("@babel/runtime/helpers/classCallCheck")),s=u(t("@babel/runtime/helpers/createClass"));t("threads/register");var a=t("threads");function u(t){return t&&t.__esModule?t:{default:t}}var c="undefined"!=typeof navigator?navigator.hardwareConcurrency:null,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;(0,o.default)(this,t);var r=new Worker("/decoder.worker.e63f7811.js");this.pool=(0,a.Pool)((function(){return(0,a.spawn)(r)}),e)}return(0,s.default)(t,[{key:"decode",value:function(){var t=(0,i.default)(n.default.mark((function t(e,r){var o=this;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,s){o.pool.queue(function(){var o=(0,i.default)(n.default.mark((function i(o){var a;return n.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o(e,r);case 3:a=n.sent,t(a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),s(n.t0);case 10:case"end":return n.stop()}}),i,null,[[0,7]])})));return function(t){return o.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){this.pool.terminate(!0)}}]),t}();r.default=l},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","threads/register":"IB1e",threads:"CqwR","./decoder.worker.js":[["decoder.worker.e63f7811.js","LHx9"],"decoder.worker.e63f7811.js.map","LHx9"]}],p5a1:[function(t,e,r){arguments[3];var n,i=arguments[3];r.fetch=c(i.fetch)&&c(i.ReadableStream),r.writableStream=c(i.WritableStream),r.abortController=c(i.AbortController),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(t){}function o(){if(void 0!==n)return n;if(i.XMLHttpRequest){n=new i.XMLHttpRequest;try{n.open("GET",i.XDomainRequest?"/":"https://example.com")}catch(t){n=null}}else n=null;return n}function s(t){var e=o();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var a=void 0!==i.ArrayBuffer,u=a&&c(i.ArrayBuffer.prototype.slice);function c(t){return"function"==typeof t}r.arraybuffer=r.fetch||a&&s("arraybuffer"),r.msstream=!r.fetch&&u&&s("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&a&&s("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!o()&&c(o().overrideMimeType),r.vbArray=c(i.VBArray),n=null},{}],Yj0v:[function(t,e,r){t("process");var n=t("process");void 0===n||!n.version||0===n.version.indexOf("v0.")||0===n.version.indexOf("v1.")&&0!==n.version.indexOf("v1.8.")?e.exports={nextTick:function(t,e,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return n.nextTick(t);case 2:return n.nextTick((function(){t.call(null,e)}));case 3:return n.nextTick((function(){t.call(null,e,r)}));case 4:return n.nextTick((function(){t.call(null,e,r,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return n.nextTick((function(){t.apply(null,o)}))}}}:e.exports=n},{process:"pBGv"}],Nqn4:[function(t,e,r){var n=t("buffer"),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},{buffer:"dskh"}],Q14w:[function(t,e,r){t("buffer").Buffer;var n=t("buffer").Buffer;function i(t){return Object.prototype.toString.call(t)}r.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},r.isBoolean=function(t){return"boolean"==typeof t},r.isNull=function(t){return null===t},r.isNullOrUndefined=function(t){return null==t},r.isNumber=function(t){return"number"==typeof t},r.isString=function(t){return"string"==typeof t},r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=function(t){return void 0===t},r.isRegExp=function(t){return"[object RegExp]"===i(t)},r.isObject=function(t){return"object"==typeof t&&null!==t},r.isDate=function(t){return"[object Date]"===i(t)},r.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},r.isFunction=function(t){return"function"==typeof t},r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=n.isBuffer},{buffer:"dskh"}],CQMM:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=t("util");function o(t,e,r){t.copy(e,r)}e.exports=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),r=this.head,i=0;r;)o(r.data,e,i),i+=r.data.length,r=r.next;return e},t}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":"Nqn4",util:"rDCW"}],lCUh:[function(t,e,r){"use strict";var n=t("process-nextick-args");function i(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":"Yj0v"}],jPmE:[function(t,e,r){t("process"),arguments[3],t("process");var n=arguments[3],i=t("process-nextick-args");function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){D(e,t)}}e.exports=_;var s,a=i.nextTick;_.WritableState=v;var u=Object.create(t("core-util-is"));u.inherits=t("inherits");var c={deprecate:t("util-deprecate")},l=t("./internal/streams/stream"),f=t("safe-buffer").Buffer,h=n.Uint8Array||function(){};function p(t){return f.from(t)}function d(t){return f.isBuffer(t)||t instanceof h}var g,y=t("./internal/streams/destroy");function m(){}function v(e,r){s=s||t("./_stream_duplex"),e=e||{};var n=r instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,a=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){P(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(e){if(s=s||t("./_stream_duplex"),!(g.call(_,this)||this instanceof s))return new _(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function b(t,e){var r=new Error("write after end");t.emit("error",r),i.nextTick(e,r)}function w(t,e,r,n){var o=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),i.nextTick(n,s),o=!1),o}function x(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r)),e}function E(t,e,r,n,i,o){if(!r){var s=x(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,a,n,i,o);return u}function S(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function C(t,e,r,n,o){--e.pendingcb,r?(i.nextTick(o,n),i.nextTick(k,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(o(n),t._writableState.errorEmitted=!0,t.emit("error",n),k(t,e))}function I(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function P(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(I(r),e)C(t,r,n,e,i);else{var o=O(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||T(t,r),n?a(M,t,r,o,i):M(t,r,o,i)}}function M(t,e,r,n){r||N(t,e),e.pendingcb--,n(),k(t,e)}function N(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function T(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,S(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(S(t,e,!1,e.objectMode?1:c.length,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function O(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function L(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function R(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,i.nextTick(L,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function k(t,e){var r=O(e);return r&&(R(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}function A(t,e,r){e.ending=!0,k(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function D(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}u.inherits(_,l),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(t){return!!g.call(this,t)||this===_&&t&&t._writableState instanceof v}})):g=function(t){return t instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&d(t);return o&&!f.isBuffer(t)&&(t=p(t)),"function"==typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=m),n.ended?b(this,r):(o||w(this,n,t,r))&&(n.pendingcb++,i=E(this,n,o,t,e,r)),i},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||T(this,t))},_.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||A(this,n,r)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.end(),e(t)}},{"process-nextick-args":"Yj0v","core-util-is":"Q14w",inherits:"Bm0n","util-deprecate":"yM1o","./internal/streams/stream":"ExO1","safe-buffer":"Nqn4","./internal/streams/destroy":"lCUh","./_stream_duplex":"Jcj8",process:"pBGv"}],Jcj8:[function(t,e,r){"use strict";var n=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=f;var o=Object.create(t("core-util-is"));o.inherits=t("inherits");var s=t("./_stream_readable"),a=t("./_stream_writable");o.inherits(f,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=a.prototype[l])}function f(t){if(!(this instanceof f))return new f(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},{"process-nextick-args":"Yj0v","core-util-is":"Q14w",inherits:"Bm0n","./_stream_readable":"YrHu","./_stream_writable":"jPmE"}],OUJr:[function(t,e,r){"use strict";var n=t("safe-buffer").Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=c,this.end=l,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=f,this.end=h,e=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function u(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function f(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}r.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=a(e[n]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":"Nqn4"}],YrHu:[function(t,e,r){arguments[3],t("process");var n=arguments[3],i=t("process"),o=t("process-nextick-args");e.exports=E;var s,a=t("isarray");E.ReadableState=x;t("events").EventEmitter;var u=function(t,e){return t.listeners(e).length},c=t("./internal/streams/stream"),l=t("safe-buffer").Buffer,f=n.Uint8Array||function(){};function h(t){return l.from(t)}function p(t){return l.isBuffer(t)||t instanceof f}var d=Object.create(t("core-util-is"));d.inherits=t("inherits");var g=t("util"),y=void 0;y=g&&g.debuglog?g.debuglog("stream"):function(){};var m,v=t("./internal/streams/BufferList"),_=t("./internal/streams/destroy");d.inherits(E,c);var b=["error","close","destroy","pause","resume"];function w(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function x(e,r){e=e||{};var n=r instanceof(s=s||t("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=t("string_decoder/").StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function E(e){if(s=s||t("./_stream_duplex"),!(this instanceof E))return new E(e);this._readableState=new x(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function S(t,e,r,n,i){var o,s=t._readableState;return null===e?(s.reading=!1,O(t,s)):(i||(o=I(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=h(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):C(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?C(t,s,e,!1):k(t,s)):C(t,s,e,!1))):n||(s.reading=!1)),P(s)}function C(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&L(t)),k(t,e)}function I(t,e){var r;return p(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function P(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(E.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=_.destroy,E.prototype._undestroy=_.undestroy,E.prototype._destroy=function(t,e){this.push(null),e(t)},E.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),r=!0),S(this,t,e,!1,r)},E.prototype.unshift=function(t){return S(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){return m||(m=t("string_decoder/").StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};var M=8388608;function N(t){return t>=M?t=M:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=N(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function O(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,L(t)}}function L(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(y("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(R,t):R(t))}function R(t){y("emit readable"),t.emit("readable"),G(t)}function k(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(A,t,e))}function A(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(y("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function D(t){return function(){var e=t._readableState;y("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&u(t,"data")&&(e.flowing=!0,G(t))}}function F(t){y("readable nexttick read 0"),t.read(0)}function j(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(B,t,e))}function B(t,e){e.reading||(y("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),G(t),e.flowing&&!e.reading&&t.read(0)}function G(t){var e=t._readableState;for(y("flow",e.flowing);e.flowing&&null!==t.read(););}function q(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=U(t,e.buffer,e.decoder),r);var r}function U(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?z(t,e):Y(t,e),n}function z(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0==(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function Y(t,e){var r=l.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0==(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function V(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick(X,e,t))}function X(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function W(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}E.prototype.read=function(t){y("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return y("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?V(this):L(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&V(this),null;var n,i=e.needReadable;return y("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&y("length less than watermark",i=!0),e.ended||e.reading?y("reading or ended",i=!1):i&&(y("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(r,e))),null===(n=t>0?q(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&V(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},E.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,y("pipe count=%d opts=%j",n.pipesCount,e);var s=e&&!1===e.end||t===i.stdout||t===i.stderr?m:a;function a(){y("onend"),t.end()}n.endEmitted?o.nextTick(s):r.once("end",s),t.on("unpipe",(function e(i,o){y("onunpipe"),i===r&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,y("cleanup"),t.removeListener("close",d),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",p),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",h),l=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||c())}));var c=D(r);t.on("drain",c);var l=!1,f=!1;function h(e){y("ondata"),f=!1,!1!==t.write(e)||f||((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==W(n.pipes,t))&&!l&&(y("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function p(e){y("onerror",e),m(),t.removeListener("error",p),0===u(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",g),m()}function g(){y("onfinish"),t.removeListener("close",d),m()}function m(){y("unpipe"),r.unpipe(t)}return r.on("data",h),w(t,"error",p),t.once("close",d),t.once("finish",g),t.emit("pipe",r),n.flowing||(y("pipe resume"),r.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=W(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},E.prototype.on=function(t,e){var r=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&L(this):o.nextTick(F,this))}return r},E.prototype.addListener=E.prototype.on,E.prototype.resume=function(){var t=this._readableState;return t.flowing||(y("resume"),t.flowing=!0,j(this,t)),this},E.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},E.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(y("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){y("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<b.length;o++)t.on(b[o],this.emit.bind(this,b[o]));return this._read=function(e){y("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),E._fromList=q},{"process-nextick-args":"Yj0v",isarray:"REa7",events:"FRpO","./internal/streams/stream":"ExO1","safe-buffer":"Nqn4","core-util-is":"Q14w",inherits:"Bm0n",util:"rDCW","./internal/streams/BufferList":"CQMM","./internal/streams/destroy":"lCUh","./_stream_duplex":"Jcj8","string_decoder/":"OUJr",process:"pBGv"}],wBib:[function(t,e,r){"use strict";e.exports=s;var n=t("./_stream_duplex"),i=Object.create(t("core-util-is"));function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){u(t,e,r)})):u(this,null,null)}function u(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},{"./_stream_duplex":"Jcj8","core-util-is":"Q14w",inherits:"Bm0n"}],IxGW:[function(t,e,r){"use strict";e.exports=o;var n=t("./_stream_transform"),i=Object.create(t("core-util-is"));function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=t("inherits"),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":"wBib","core-util-is":"Q14w",inherits:"Bm0n"}],JaqQ:[function(t,e,r){(r=e.exports=t("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_readable.js":"YrHu","./lib/_stream_writable.js":"jPmE","./lib/_stream_duplex.js":"Jcj8","./lib/_stream_transform.js":"wBib","./lib/_stream_passthrough.js":"IxGW"}],UxIR:[function(t,e,r){t("process"),t("buffer").Buffer,arguments[3];var n=t("process"),i=t("buffer").Buffer,o=arguments[3],s=t("./capability"),a=t("inherits"),u=t("readable-stream"),c=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=r.IncomingMessage=function(t,e,r,a){var c=this;if(u.Readable.call(c),c._mode=r,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){n.nextTick((function(){c.emit("close")}))})),"fetch"===r){if(c._fetchResponse=e,c.url=e.url,c.statusCode=e.status,c.statusMessage=e.statusText,e.headers.forEach((function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)})),s.writableStream){var l=new WritableStream({write:function(t){return new Promise((function(e,r){c._destroyed?r():c.push(new i(t))?e():c._resumeFetch=e}))},close:function(){o.clearTimeout(a),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void e.body.pipeTo(l).catch((function(t){o.clearTimeout(a),c._destroyed||c.emit("error",t)}))}catch(t){}}var f=e.body.getReader();!function t(){f.read().then((function(e){if(!c._destroyed){if(e.done)return o.clearTimeout(a),void c.push(null);c.push(new i(e.value)),t()}})).catch((function(t){o.clearTimeout(a),c._destroyed||c.emit("error",t)}))}()}else if(c._xhr=t,c._pos=0,c.url=t.responseURL,c.statusCode=t.status,c.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var r=e[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(e[2])):void 0!==c.headers[r]?c.headers[r]+=", "+e[2]:c.headers[r]=e[2],c.rawHeaders.push(e[1],e[2])}})),c._charset="x-user-defined",!s.overrideMimeType){var h=c.rawHeaders["mime-type"];if(h){var p=h.match(/;\s*charset=([^;])(;|$)/);p&&(c._charset=p[1].toLowerCase())}c._charset||(c._charset="utf-8")}};a(l,u.Readable),l.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},l.prototype._onXHRProgress=function(){var t=this,e=t._xhr,r=null;switch(t._mode){case"text:vbarray":if(e.readyState!==c.DONE)break;try{r=new o.VBArray(e.responseBody).toArray()}catch(t){}if(null!==r){t.push(new i(r));break}case"text":try{r=e.responseText}catch(e){t._mode="text:vbarray";break}if(r.length>t._pos){var n=r.substr(t._pos);if("x-user-defined"===t._charset){for(var s=new i(n.length),a=0;a<n.length;a++)s[a]=255&n.charCodeAt(a);t.push(s)}else t.push(n,t._charset);t._pos=r.length}break;case"arraybuffer":if(e.readyState!==c.DONE||!e.response)break;r=e.response,t.push(new i(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=e.response,e.readyState!==c.LOADING||!r)break;t.push(new i(new Uint8Array(r)));break;case"ms-stream":if(r=e.response,e.readyState!==c.LOADING)break;var u=new o.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(new i(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){t.push(null)},u.readAsArrayBuffer(r)}t._xhr.readyState===c.DONE&&"ms-stream"!==t._mode&&t.push(null)}},{"./capability":"p5a1",inherits:"Bm0n","readable-stream":"JaqQ",process:"pBGv",buffer:"dskh"}],AH4k:[function(t,e,r){var n=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(n.isBuffer(t)){for(var e=new Uint8Array(t.length),r=t.length,i=0;i<r;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:"dskh"}],yL7F:[function(t,e,r){t("buffer").Buffer,arguments[3],t("process");var n=t("buffer").Buffer,i=arguments[3],o=t("process"),s=t("./capability"),a=t("inherits"),u=t("./response"),c=t("readable-stream"),l=t("to-arraybuffer"),f=u.IncomingMessage,h=u.readyStates;function p(t,e){return s.fetch&&e?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&t?"arraybuffer":s.vbArray&&t?"text:vbarray":"text"}var d=e.exports=function(t){var e,r=this;c.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new n(t.auth).toString("base64")),Object.keys(t.headers).forEach((function(e){r.setHeader(e,t.headers[e])}));var i=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!s.abortController)i=!1,e=!0;else if("prefer-streaming"===t.mode)e=!1;else if("allow-wrong-content-type"===t.mode)e=!s.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");e=!0}r._mode=p(e,i),r._fetchTimer=null,r.on("finish",(function(){r._onFinish()}))};function g(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}}a(d,c.Writable),d.prototype.setHeader=function(t,e){var r=t.toLowerCase();-1===y.indexOf(r)&&(this._headers[r]={name:t,value:e})},d.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},d.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},d.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e=t._opts,r=t._headers,a=null;"GET"!==e.method&&"HEAD"!==e.method&&(a=s.arraybuffer?l(n.concat(t._body)):s.blobConstructor?new i.Blob(t._body.map((function(t){return l(t)})),{type:(r["content-type"]||{}).value||""}):n.concat(t._body).toString());var u=[];if(Object.keys(r).forEach((function(t){var e=r[t].name,n=r[t].value;Array.isArray(n)?n.forEach((function(t){u.push([e,t])})):u.push([e,n])})),"fetch"===t._mode){var c=null;if(s.abortController){var f=new AbortController;c=f.signal,t._fetchAbortController=f,"requestTimeout"in e&&0!==e.requestTimeout&&(t._fetchTimer=i.setTimeout((function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()}),e.requestTimeout))}i.fetch(t._opts.url,{method:t._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin",signal:c}).then((function(e){t._fetchResponse=e,t._connect()}),(function(e){i.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)}))}else{var p=t._xhr=new i.XMLHttpRequest;try{p.open(t._opts.method,t._opts.url,!0)}catch(e){return void o.nextTick((function(){t.emit("error",e)}))}"responseType"in p&&(p.responseType=t._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!e.withCredentials),"text"===t._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in e&&(p.timeout=e.requestTimeout,p.ontimeout=function(){t.emit("requestTimeout")}),u.forEach((function(t){p.setRequestHeader(t[0],t[1])})),t._response=null,p.onreadystatechange=function(){switch(p.readyState){case h.LOADING:case h.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(p.onprogress=function(){t._onXHRProgress()}),p.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{p.send(a)}catch(e){return void o.nextTick((function(){t.emit("error",e)}))}}}},d.prototype._onXHRProgress=function(){g(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},d.prototype._connect=function(){var t=this;t._destroyed||(t._response=new f(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",(function(e){t.emit("error",e)})),t.emit("response",t._response))},d.prototype._write=function(t,e,r){this._body.push(t),r()},d.prototype.abort=d.prototype.destroy=function(){this._destroyed=!0,i.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},d.prototype.end=function(t,e,r){"function"==typeof t&&(r=t,t=void 0),c.Writable.prototype.end.call(this,t,e,r)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var y=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]},{"./capability":"p5a1",inherits:"Bm0n","./response":"UxIR","readable-stream":"JaqQ","to-arraybuffer":"AH4k",buffer:"dskh",process:"pBGv"}],K5Tb:[function(t,e,r){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},{}],OpTI:[function(t,e,r){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],oWqx:[function(t,e,r){arguments[3];var n,i=arguments[3];!function(t){var o="object"==typeof r&&r&&!r.nodeType&&r,s="object"==typeof e&&e&&!e.nodeType&&e,a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self!==a||(t=a);var u,c,l=2147483647,f=36,h=1,p=26,d=38,g=700,y=72,m=128,v="-",_=/^xn--/,b=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=f-h,S=Math.floor,C=String.fromCharCode;function I(t){throw new RangeError(x[t])}function P(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function M(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+P((t=t.replace(w,".")).split("."),e).join(".")}function N(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function T(t){return P(t,(function(t){var e="";return t>65535&&(e+=C((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+C(t)})).join("")}function O(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function L(t,e,r){var n=0;for(t=r?S(t/g):t>>1,t+=S(t/e);t>E*p>>1;n+=f)t=S(t/E);return S(n+(E+1)*t/(t+d))}function R(t){var e,r,n,i,o,s,a,u,c,d,g,_=[],b=t.length,w=0,x=m,E=y;for((r=t.lastIndexOf(v))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&I("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=w,s=1,a=f;i>=b&&I("invalid-input"),((u=(g=t.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:f)>=f||u>S((l-w)/s))&&I("overflow"),w+=u*s,!(u<(c=a<=E?h:a>=E+p?p:a-E));a+=f)s>S(l/(d=f-c))&&I("overflow"),s*=d;E=L(w-o,e=_.length+1,0==o),S(w/e)>l-x&&I("overflow"),x+=S(w/e),w%=e,_.splice(w++,0,x)}return T(_)}function k(t){var e,r,n,i,o,s,a,u,c,d,g,_,b,w,x,E=[];for(_=(t=N(t)).length,e=m,r=0,o=y,s=0;s<_;++s)(g=t[s])<128&&E.push(C(g));for(n=i=E.length,i&&E.push(v);n<_;){for(a=l,s=0;s<_;++s)(g=t[s])>=e&&g<a&&(a=g);for(a-e>S((l-r)/(b=n+1))&&I("overflow"),r+=(a-e)*b,e=a,s=0;s<_;++s)if((g=t[s])<e&&++r>l&&I("overflow"),g==e){for(u=r,c=f;!(u<(d=c<=o?h:c>=o+p?p:c-o));c+=f)x=u-d,w=f-d,E.push(C(O(d+x%w,0))),u=S(x/w);E.push(C(O(u,0))),o=L(r,b,n==i),r=0,++n}++r,++e}return E.join("")}if(u={version:"1.4.1",ucs2:{decode:N,encode:T},decode:R,encode:k,toASCII:function(t){return M(t,(function(t){return b.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return M(t,(function(t){return _.test(t)?R(t.slice(4).toLowerCase()):t}))}},"function"==typeof n&&"object"==typeof n.amd&&n.amd)n("punycode",(function(){return u}));else if(o&&s)if(e.exports==o)s.exports=u;else for(c in u)u.hasOwnProperty(c)&&(o[c]=u[c]);else t.punycode=u}(this)},{}],YsIc:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],J6GP:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,g=t[l].replace(a,"%20"),y=g.indexOf(r);y>=0?(f=g.substr(0,y),h=g.substr(y+1)):(f=g,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),n(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],bvhO:[function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+r;return i(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],fk5h:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":"J6GP","./encode":"bvhO"}],Mej7:[function(t,e,r){"use strict";var n=t("punycode"),i=t("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=_,r.resolve=function(t,e){return _(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},r.format=function(t){return i.isString(t)&&(t=_(t)),t instanceof o?t.format():o.prototype.format.call(t)},r.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=t("querystring");function _(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var _=t=c.join(a);if(_=_.trim(),!r&&1===t.split("#").length){var b=u.exec(_);if(b)return this.path=_,this.href=_,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(_);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,_=_.substr(w.length)}if(r||w||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||w&&y[w]||(_=_.substr(2),this.slashes=!0)}if(!y[w]&&(E||w&&!m[w])){for(var S,C,I=-1,P=0;P<h.length;P++)-1!==(M=_.indexOf(h[P]))&&(-1===I||M<I)&&(I=M);for(-1!==(C=-1===I?_.lastIndexOf("@"):_.lastIndexOf("@",I))&&(S=_.slice(0,C),_=_.slice(C+1),this.auth=decodeURIComponent(S)),I=-1,P=0;P<f.length;P++){var M;-1!==(M=_.indexOf(f[P]))&&(-1===I||M<I)&&(I=M)}-1===I&&(I=_.length),this.host=_.slice(0,I),_=_.slice(I),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var T=this.hostname.split(/\./),O=(P=0,T.length);P<O;P++){var L=T[P];if(L&&!L.match(p)){for(var R="",k=0,A=L.length;k<A;k++)L.charCodeAt(k)>127?R+="x":R+=L[k];if(!R.match(p)){var D=T.slice(0,P),F=T.slice(P+1),j=L.match(d);j&&(D.push(j[1]),F.unshift(j[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=n.toASCII(this.hostname));var B=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+B,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[x])for(P=0,O=l.length;P<O;P++){var q=l[P];if(-1!==_.indexOf(q)){var U=encodeURIComponent(q);U===q&&(U=escape(q)),_=_.split(q).join(U)}}var z=_.indexOf("#");-1!==z&&(this.hash=_.substr(z),_=_.slice(0,z));var Y=_.indexOf("?");if(-1!==Y?(this.search=_.substr(Y),this.query=_.substr(Y+1),e&&(this.query=v.parse(this.query)),_=_.slice(0,Y)):e&&(this.search="",this.query={}),_&&(this.pathname=_),m[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var V=this.search||"";this.path=B+V}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=t[l])}return m[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!m[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var p=f[h];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||y[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||r.host&&t.pathname,x=w,E=r.pathname&&r.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!m[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),w=w&&(""===d[0]||""===E[0])),b)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search))return S&&(r.hostname=r.host=E.shift(),(N=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=N.shift(),r.host=r.hostname=N.shift())),r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var C=E.slice(-1)[0],I=(r.host||t.host||E.length>1)&&("."===C||".."===C)||""===C,P=0,M=E.length;M>=0;M--)"."===(C=E[M])?E.splice(M,1):".."===C?(E.splice(M,1),P++):P&&(E.splice(M,1),P--);if(!w&&!x)for(;P--;P)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var N,T=""===E[0]||E[0]&&"/"===E[0].charAt(0);return S&&(r.hostname=r.host=T?"":E.length?E.shift():"",(N=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=N.shift(),r.host=r.hostname=N.shift())),(w=w||r.host&&E.length)&&!T&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:"oWqx","./util":"YsIc",querystring:"fk5h"}],KKrj:[function(t,e,r){arguments[3];var n=arguments[3],i=t("./lib/request"),o=t("./lib/response"),s=t("xtend"),a=t("builtin-status-codes"),u=t("url"),c=r;c.request=function(t,e){t="string"==typeof t?u.parse(t):s(t);var r=-1===n.location.protocol.search(/^https?:$/)?"http:":"",o=t.protocol||r,a=t.hostname||t.host,c=t.port,l=t.path||"/";a&&-1!==a.indexOf(":")&&(a="["+a+"]"),t.url=(a?o+"//"+a:"")+(c?":"+c:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new i(t);return e&&f.on("response",e),f},c.get=function(t,e){var r=c.request(t,e);return r.end(),r},c.ClientRequest=i,c.IncomingMessage=o.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=a,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},{"./lib/request":"yL7F","./lib/response":"UxIR",xtend:"K5Tb","builtin-status-codes":"OpTI",url:"Mej7"}],wVMl:[function(t,e,r){var n=t("http"),i=t("url"),o=e.exports;for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);function a(t){if("string"==typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=a(t),n.request.call(this,t,e)},o.get=function(t,e){return t=a(t),n.get.call(this,t,e)}},{http:"KKrj",url:"Mej7"}],cUx7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeFetchSource=x,r.makeXHRSource=E,r.makeHttpSource=S,r.makeRemoteSource=function(t,e){var r=e.forceXHR;if("function"==typeof fetch&&!r)return x(t,e);if("undefined"!=typeof XMLHttpRequest)return E(t,e);if(f.default.get)return S(t,e);throw new Error("No remote source available")},r.makeBufferSource=function(t){return{fetch:function(e,r){return(0,u.default)(o.default.mark((function n(){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.slice(e,e+r));case 1:case"end":return n.stop()}}),n)})))()}}},r.makeFileSource=function(t){var e=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new Promise((function(n,i){(0,l.open)(t,e,r,(function(t,e){t?i(t):n(e)}))}))}(t,"r");return{fetch:function(t,r){return(0,u.default)(o.default.mark((function n(){var i,s,a;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:return i=n.sent,n.next=5,I(i,c.Buffer.alloc(r),0,r,t);case 5:return s=n.sent,a=s.buffer,n.abrupt("return",a.buffer);case 8:case"end":return n.stop()}}),n)})))()},close:function(){return(0,u.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return r=t.sent,t.next=5,C(r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()}}},r.makeFileReaderSource=function(t){return{fetch:function(e,r){return(0,u.default)(o.default.mark((function n(){return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,i){var o=t.slice(e,e+r),s=new FileReader;s.onload=function(t){return n(t.target.result)},s.onerror=i,s.readAsArrayBuffer(o)})));case 1:case"end":return n.stop()}}),n)})))()}}};var n=d(t("@babel/runtime/helpers/slicedToArray")),i=d(t("@babel/runtime/helpers/defineProperty")),o=d(t("@babel/runtime/regenerator")),s=d(t("@babel/runtime/helpers/classCallCheck")),a=d(t("@babel/runtime/helpers/createClass")),u=d(t("@babel/runtime/helpers/asyncToGenerator")),c=t("buffer"),l=t("fs"),f=d(t("http")),h=d(t("https")),p=d(t("url"));function d(t){return t&&t.__esModule?t:{default:t}}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){(0,i.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){var n=e+r,i=new ArrayBuffer(r),o=new Uint8Array(i),s=!0,a=!1,u=void 0;try{for(var c,l=t[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var f=c.value,h=f.offset-e,p=f.top-n,d=0,g=0,y=void 0;h<0?d=-h:h>0&&(g=h),p<0?y=f.length-d:p>0&&(y=n-f.offset-d);var m=new Uint8Array(f.data,d,y);o.set(m,g)}}catch(t){a=!0,u=t}finally{try{s||null==l.return||l.return()}finally{if(a)throw u}}return i}function v(t){if(0===t.length)return[];var e=[],r=[];e.push(r);for(var n=0;n<t.length;++n)0===n||t[n]===t[n-1]+1?r.push(t[n]):(r=[t[n]],e.push(r));return e}function _(t){return b.apply(this,arguments)}function b(){return(b=(0,u.default)(o.default.mark((function t(e){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=function(){function t(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blockSize,n=void 0===r?65536:r;(0,s.default)(this,t),this.retrievalFunction=e,this.blockSize=n,this.blockRequests=new Map,this.blocks=new Map,this.blockIdsAwaitingRequest=null}return(0,a.default)(t,[{key:"fetch",value:function(){var t=(0,u.default)(o.default.mark((function t(e,r){var n,i,s,a,c,l,f,h,p,d,g,y,b,w,x,E,S,C,I,P,M,N,T=this,O=arguments;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=O.length>2&&void 0!==O[2]&&O[2],i=e+r,s=Math.floor(e/this.blockSize)*this.blockSize,a=[],c=[],l=[],f=s;f<i;f+=this.blockSize)h=Math.floor(f/this.blockSize),this.blocks.has(h)||this.blockRequests.has(h)||c.push(h),this.blockRequests.has(h)&&l.push(this.blockRequests.get(h)),a.push(h);if(this.blockIdsAwaitingRequest)for(p=0;p<c.length;++p)d=c[p],this.blockIdsAwaitingRequest.add(d);else this.blockIdsAwaitingRequest=new Set(c);if(n){t.next=11;break}return t.next=11,_();case 11:if(!this.blockIdsAwaitingRequest){t.next=34;break}for(g=v(Array.from(this.blockIdsAwaitingRequest).sort()),y=!0,b=!1,w=void 0,t.prev=16,x=function(){for(var t=S.value,e=T.requestData(t[0]*T.blockSize,t.length*T.blockSize),r=function(r){var n=t[r];T.blockRequests.set(n,(0,u.default)(o.default.mark((function t(){var i,s,a,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:i=t.sent,s=r*T.blockSize,a=Math.min(s+T.blockSize,i.data.byteLength),u=i.data.slice(s,a),T.blockRequests.delete(n),T.blocks.set(n,{data:u,offset:i.offset+s,length:u.byteLength,top:i.offset+a});case 8:case"end":return t.stop()}}),t)})))())},n=0;n<t.length;++n)r(n)},E=g[Symbol.iterator]();!(y=(S=E.next()).done);y=!0)x();t.next=25;break;case 21:t.prev=21,t.t0=t.catch(16),b=!0,w=t.t0;case 25:t.prev=25,t.prev=26,y||null==E.return||E.return();case 28:if(t.prev=28,!b){t.next=31;break}throw w;case 31:return t.finish(28);case 32:return t.finish(25);case 33:this.blockIdsAwaitingRequest=null;case 34:for(C=[],I=0,P=c;I<P.length;I++)M=P[I],this.blockRequests.has(M)&&C.push(this.blockRequests.get(M));return t.next=38,Promise.all(C);case 38:return t.next=40,Promise.all(l);case 40:return N=a.map((function(t){return T.blocks.get(t)})),t.abrupt("return",m(N,e,r));case 42:case"end":return t.stop()}}),t,this,[[16,21,25,33],[26,,28,32]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"requestData",value:function(){var t=(0,u.default)(o.default.mark((function t(e,r){var n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.retrievalFunction(e,r);case 2:return(n=t.sent).length?n.length!==n.data.byteLength&&(n.data=n.data.slice(0,n.length)):n.length=n.data.byteLength,n.top=n.offset+n.length,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]),t}();function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.headers,n=void 0===r?{}:r,i=e.blockSize;return new w(function(){var e=(0,u.default)(o.default.mark((function e(r,i){var s,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:y({},n,{Range:"bytes=".concat(r,"-").concat(r+i-1)})});case 2:if((s=e.sent).ok){e.next=7;break}throw new Error("Error fetching data.");case 7:if(206!==s.status){e.next=21;break}if(!s.arrayBuffer){e.next=14;break}return e.next=11,s.arrayBuffer();case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,s.buffer();case 16:e.t0=e.sent.buffer;case 17:return a=e.t0,e.abrupt("return",{data:a,offset:r,length:i});case 21:if(!s.arrayBuffer){e.next=27;break}return e.next=24,s.arrayBuffer();case 24:e.t1=e.sent,e.next=30;break;case 27:return e.next=29,s.buffer();case 29:e.t1=e.sent.buffer;case 30:return u=e.t1,e.abrupt("return",{data:u,offset:0,length:u.byteLength});case 32:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{blockSize:i})}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.headers,i=void 0===r?{}:r,s=e.blockSize;return new w(function(){var e=(0,u.default)(o.default.mark((function e(r,s){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="arraybuffer";for(var u=y({},i,{Range:"bytes=".concat(r,"-").concat(r+s-1)}),c=0,l=Object.entries(u);c<l.length;c++){var f=(0,n.default)(l[c],2),h=f[0],p=f[1];a.setRequestHeader(h,p)}a.onload=function(){var t=a.response;206===a.status?e({data:t,offset:r,length:s}):e({data:t,offset:0,length:t.byteLength})},a.onerror=o,a.send()})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{blockSize:s})}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.headers,n=void 0===r?{}:r,i=e.blockSize;return new w(function(){var e=(0,u.default)(o.default.mark((function e(r,i){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var s=p.default.parse(t);("http:"===s.protocol?f.default:h.default).get(y({},s,{headers:y({},n,{Range:"bytes=".concat(r,"-").concat(r+i-1)})}),(function(t){var n=[];t.on("data",(function(t){n.push(t)})),t.on("end",(function(){var t=c.Buffer.concat(n).buffer;e({data:t,offset:r,length:t.byteLength})}))})).on("error",o)})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),{blockSize:i})}function C(t){return new Promise((function(e,r){(0,l.close)(t,(function(t){t?r(t):e()}))}))}function I(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return new Promise((function(t,r){l.read.apply(void 0,e.concat([function(e,n,i){e?r(e):t({bytesRead:n,buffer:i})}]))}))}},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/asyncToGenerator":"agGE",buffer:"dskh",fs:"rDCW",http:"KKrj",https:"wVMl",url:"Mej7"}],FOZT:[function(t,e,r){"use strict";function n(t){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}Object.defineProperty(r,"__esModule",{value:!0}),r.assign=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},r.chunk=function(t,e){for(var r=[],n=t.length,i=0;i<n;i+=e){for(var o=[],s=i;s<i+e;s++)o.push(t[s]);r.push(o)}return r},r.endsWith=function(t,e){return!(t.length<e.length)&&t.substr(t.length-e.length)===e},r.forEach=function(t,e){for(var r=t.length,n=0;n<r;n++)e(t[n],n)},r.invert=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e},r.range=function(t){for(var e=[],r=0;r<t;r++)e.push(r);return e},r.times=function(t,e){for(var r=[],n=0;n<t;n++)r.push(e(n));return r},r.toArray=n,r.toArrayRecursively=function t(e){return e.length?n(e).map(t):e}},{}],BGyE:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.writeGeotiff=function(t,e){var r,o,s,u;"number"==typeof t[0]?(r=e.height||e.ImageLength,s=e.width||e.ImageWidth,o=t.length/(r*s),u=t):(o=t.length,r=t[0].length,s=t[0][0].length,u=[],(0,i.times)(r,(function(e){(0,i.times)(s,(function(r){(0,i.times)(o,(function(n){u.push(t[n][e][r])}))}))}))),e.ImageLength=r,delete e.height,e.ImageWidth=s,delete e.width,e.BitsPerSample||(e.BitsPerSample=(0,i.times)(o,(function(){return 8}))),y.forEach((function(t){var r=t[0];if(!e[r]){var n=t[1];e[r]=n}})),e.PhotometricInterpretation||(e.PhotometricInterpretation=3===e.BitsPerSample.length?2:1),e.SamplesPerPixel||(e.SamplesPerPixel=[o]),e.StripByteCounts||(e.StripByteCounts=[o*r*s]),e.ModelPixelScale||(e.ModelPixelScale=[360/s,180/r,0]),e.SampleFormat||(e.SampleFormat=(0,i.times)(o,(function(){return 1})));var c=Object.keys(e).filter((function(t){return(0,i.endsWith)(t,"GeoKey")})).sort((function(t,e){return a[t]-a[e]}));if(!e.GeoKeyDirectory){var l=[1,1,0,c.length];c.forEach((function(t){var r,i,o,s=Number(a[t]);l.push(s),"SHORT"===n.fieldTagTypes[s]?(r=1,i=0,o=e[t]):"GeogCitationGeoKey"===t?(r=e.GeoAsciiParams.length,i=Number(a.GeoAsciiParams),o=0):console.log("[geotiff.js] couldn't get TIFFTagLocation for ".concat(t)),l.push(i),l.push(r),l.push(o)})),e.GeoKeyDirectory=l}for(var f in c)c.hasOwnProperty(f)&&delete e[f];["Compression","ExtraSamples","GeographicTypeGeoKey","GTModelTypeGeoKey","GTRasterTypeGeoKey","ImageLength","ImageWidth","PhotometricInterpretation","PlanarConfiguration","ResolutionUnit","SamplesPerPixel","XPosition","YPosition"].forEach((function(t){e[t]&&(e[t]=g(e[t]))}));var h=d(e);return p(u,s,r,h)};var n=t("./globals"),i=t("./utils"),o=(0,i.invert)(n.fieldTagNames),s=(0,i.invert)(n.geoKeyNames),a={};(0,i.assign)(a,o),(0,i.assign)(a,s);var u=(0,i.invert)(n.fieldTypeNames),c=1e3,l={nextZero:function(t,e){for(var r=e;0!==t[r];)r++;return r},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(t,e){var r=l.ui8;return r[0]=t[e+1],r[1]=t[e+0],l.i16[0]},readInt:function(t,e){var r=l.ui8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e+0],l.i32[0]},readUint:function(t,e){var r=l.ui8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e+0],l.ui32[0]},readASCII:function(t,e,r){return r.map((function(r){return String.fromCharCode(t[e+r])})).join("")},readFloat:function(t,e){var r=l.ui8;return(0,i.times)(4,(function(n){r[n]=t[e+3-n]})),l.fl32[0]},readDouble:function(t,e){var r=l.ui8;return(0,i.times)(8,(function(n){r[n]=t[e+7-n]})),l.fl64[0]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255},writeASCII:function(t,e,r){(0,i.times)(r.length,(function(n){t[e+n]=r.charCodeAt(n)}))},ui8:new Uint8Array(8)};l.fl64=new Float64Array(l.ui8.buffer),l.writeDouble=function(t,e,r){l.fl64[0]=r,(0,i.times)(8,(function(r){t[e+r]=l.ui8[7-r]}))};var f=function(t,e,r,o){var s=r,a=Object.keys(o).filter((function(t){return null!=t&&"undefined"!==t}));t.writeUshort(e,s,a.length);var c=(s+=2)+12*a.length+4,l=!0,f=!1,h=void 0;try{for(var p,d=function(){var r=p.value,a=null;"number"==typeof r?a=r:"string"==typeof r&&(a=parseInt(r,10));var l=n.fieldTagTypes[a],f=u[l];if(null==l||void 0===l||void 0===l)throw new Error("unknown type of tag: ".concat(a));var h=o[r];if(void 0===h)throw new Error("failed to get value for key ".concat(r));"ASCII"===l&&"string"==typeof h&&!1===(0,i.endsWith)(h,"\0")&&(h+="\0");var d=h.length;t.writeUshort(e,s,a),s+=2,t.writeUshort(e,s,f),s+=2,t.writeUint(e,s,d);var g=[-1,1,1,2,4,8,0,0,0,0,0,0,8][f]*d,y=s+=4;g>4&&(t.writeUint(e,s,c),y=c),"ASCII"===l?t.writeASCII(e,y,h):"SHORT"===l?(0,i.times)(d,(function(r){t.writeUshort(e,y+2*r,h[r])})):"LONG"===l?(0,i.times)(d,(function(r){t.writeUint(e,y+4*r,h[r])})):"RATIONAL"===l?(0,i.times)(d,(function(r){t.writeUint(e,y+8*r,Math.round(1e4*h[r])),t.writeUint(e,y+8*r+4,1e4)})):"DOUBLE"===l&&(0,i.times)(d,(function(r){t.writeDouble(e,y+8*r,h[r])})),g>4&&(c+=g+=1&g),s+=4},g=a[Symbol.iterator]();!(l=(p=g.next()).done);l=!0)d()}catch(t){f=!0,h=t}finally{try{l||null==g.return||g.return()}finally{if(f)throw h}}return[s,c]},h=function(t){var e=new Uint8Array(c),r=4,n=l;e[0]=77,e[1]=77,e[3]=42;var i=8;if(n.writeUint(e,r,i),r+=4,t.forEach((function(r,o){var s=f(n,e,i,r);i=s[1],o<t.length-1&&n.writeUint(e,s[0],i)})),e.slice)return e.slice(0,i).buffer;for(var o=new Uint8Array(i),s=0;s<i;s++)o[s]=e[s];return o.buffer},p=function(t,e,r,n){if(null==r)throw new Error("you passed into encodeImage a width of type ".concat(r));if(null==e)throw new Error("you passed into encodeImage a width of type ".concat(e));var o={256:[e],257:[r],273:[c],278:[r],305:"geotiff.js"};if(n)for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);var a=new Uint8Array(h([o])),u=new Uint8Array(t),l=o[277],f=new Uint8Array(c+e*r*l);return(0,i.times)(a.length,(function(t){f[t]=a[t]})),(0,i.forEach)(u,(function(t,e){f[c+e]=t})),f.buffer},d=function(t){var e={};for(var r in t)"StripOffsets"!==r&&(a[r]||console.error(r,"not in name2code:",Object.keys(a)),e[a[r]]=t[r]);return e},g=function(t){return Array.isArray(t)?t:[t]},y=[["Compression",1],["PlanarConfiguration",1],["XPosition",0],["YPosition",0],["ResolutionUnit",1],["ExtraSamples",0],["GeoAsciiParams","WGS 84\0"],["ModelTiepoint",[0,0,0,-180,90,0]],["GTModelTypeGeoKey",2],["GTRasterTypeGeoKey",1],["GeographicTypeGeoKey",4326],["GeogCitationGeoKey","WGS 84"]]},{"./globals":"j27V","./utils":"FOZT"}],bsJs:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromUrl=function(t){return L.apply(this,arguments)},r.fromArrayBuffer=function(t){return R.apply(this,arguments)},r.fromFile=function(t){return k.apply(this,arguments)},r.fromBlob=function(t){return A.apply(this,arguments)},r.fromUrls=function(t){return D.apply(this,arguments)},r.writeArrayBuffer=function(t,e){return F.apply(this,arguments)},Object.defineProperty(r,"Pool",{enumerable:!0,get:function(){return g.default}}),r.rgb=r.globals=r.MultiGeoTIFF=r.default=r.GeoTIFF=void 0;var n=x(t("@babel/runtime/helpers/possibleConstructorReturn")),i=x(t("@babel/runtime/helpers/getPrototypeOf")),o=x(t("@babel/runtime/helpers/inherits")),s=x(t("@babel/runtime/regenerator")),a=x(t("@babel/runtime/helpers/defineProperty")),u=x(t("@babel/runtime/helpers/slicedToArray")),c=x(t("@babel/runtime/helpers/asyncToGenerator")),l=x(t("@babel/runtime/helpers/classCallCheck")),f=x(t("@babel/runtime/helpers/createClass")),h=x(t("./geotiffimage")),p=x(t("./dataview64")),d=x(t("./dataslice")),g=x(t("./pool")),y=t("./source"),m=w(t("./globals"));r.globals=m;var v=t("./geotiffwriter"),_=w(t("./rgb"));function b(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return b=function(){return t},t}function w(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=b();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function x(t){return t&&t.__esModule?t:{default:t}}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C(t){switch(t){case m.fieldTypes.BYTE:case m.fieldTypes.ASCII:case m.fieldTypes.SBYTE:case m.fieldTypes.UNDEFINED:return 1;case m.fieldTypes.SHORT:case m.fieldTypes.SSHORT:return 2;case m.fieldTypes.LONG:case m.fieldTypes.SLONG:case m.fieldTypes.FLOAT:case m.fieldTypes.IFD:return 4;case m.fieldTypes.RATIONAL:case m.fieldTypes.SRATIONAL:case m.fieldTypes.DOUBLE:case m.fieldTypes.LONG8:case m.fieldTypes.SLONG8:case m.fieldTypes.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(t))}}function I(t){var e=t.GeoKeyDirectory;if(!e)return null;for(var r={},n=4;n<=4*e[3];n+=4){var i=m.geoKeyNames[e[n]],o=e[n+1]?m.fieldTagNames[e[n+1]]:null,s=e[n+2],a=e[n+3],u=null;if(o){if(null==(u=t[o]))throw new Error("Could not get value of geoKey '".concat(i,"'."));"string"==typeof u?u=u.substring(a,a+s-1):u.subarray&&(u=u.subarray(a,a+s-1))}else u=a;r[i]=u}return r}function P(t,e,r,n){var i=null,o=null,s=C(e);switch(e){case m.fieldTypes.BYTE:case m.fieldTypes.ASCII:case m.fieldTypes.UNDEFINED:i=new Uint8Array(r),o=t.readUint8;break;case m.fieldTypes.SBYTE:i=new Int8Array(r),o=t.readInt8;break;case m.fieldTypes.SHORT:i=new Uint16Array(r),o=t.readUint16;break;case m.fieldTypes.SSHORT:i=new Int16Array(r),o=t.readInt16;break;case m.fieldTypes.LONG:case m.fieldTypes.IFD:i=new Uint32Array(r),o=t.readUint32;break;case m.fieldTypes.SLONG:i=new Int32Array(r),o=t.readInt32;break;case m.fieldTypes.LONG8:case m.fieldTypes.IFD8:i=new Array(r),o=t.readUint64;break;case m.fieldTypes.SLONG8:i=new Array(r),o=t.readInt64;break;case m.fieldTypes.RATIONAL:i=new Uint32Array(2*r),o=t.readUint32;break;case m.fieldTypes.SRATIONAL:i=new Int32Array(2*r),o=t.readInt32;break;case m.fieldTypes.FLOAT:i=new Float32Array(r),o=t.readFloat32;break;case m.fieldTypes.DOUBLE:i=new Float64Array(r),o=t.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(e))}if(e!==m.fieldTypes.RATIONAL&&e!==m.fieldTypes.SRATIONAL)for(var a=0;a<r;++a)i[a]=o.call(t,n+a*s);else for(var u=0;u<r;u+=2)i[u]=o.call(t,n+u*s),i[u+1]=o.call(t,n+(u*s+4));return e===m.fieldTypes.ASCII?String.fromCharCode.apply(null,i):i}r.rgb=_;var M=function(){function t(){(0,l.default)(this,t)}return(0,f.default)(t,[{key:"readRasters",value:function(){var t=(0,c.default)(s.default.mark((function t(){var e,r,n,i,o,a,c,l,f,h,p,d,g,y,m,v,_,b,w,x,E,C,I,P,M,N,T,O,L,R,k,A,D,F,j,B,G,q,U,z=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=z.length>0&&void 0!==z[0]?z[0]:{},r=e.window,n=e.width,i=e.height,o=e.resX,a=e.resY,c=e.bbox,t.next=5,this.getImage();case 5:return l=t.sent,f=l,t.next=9,this.getImageCount();case 9:if(h=t.sent,p=l.getBoundingBox(),!r||!c){t.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!n&&!i){t.next=24;break}if(r&&(d=l.getOrigin(),g=(0,u.default)(d,2),y=g[0],m=g[1],v=l.getResolution(),_=(0,u.default)(v,2),b=_[0],w=_[1],c=[y+r[0]*b,m+r[1]*w,y+r[2]*b,m+r[3]*w]),x=c||p,!n){t.next=20;break}if(!o){t.next=19;break}throw new Error("Both width and resX passed");case 19:o=(x[2]-x[0])/n;case 20:if(!i){t.next=24;break}if(!a){t.next=23;break}throw new Error("Both width and resY passed");case 23:a=(x[3]-x[1])/i;case 24:if(!o&&!a){t.next=48;break}E=[],C=0;case 27:if(!(C<h)){t.next=36;break}return t.next=30,this.getImage(C);case 30:I=t.sent,P=I.fileDirectory,M=P.SubfileType,N=P.NewSubfileType,(0===C||2===M||1&N)&&E.push(I);case 33:++C,t.next=27;break;case 36:E.sort((function(t,e){return t.getWidth()-e.getWidth()})),T=0;case 38:if(!(T<E.length)){t.next=48;break}if(O=E[T],L=(p[2]-p[0])/O.getWidth(),R=(p[3]-p[1])/O.getHeight(),f=O,!(o&&o>L||a&&a>R)){t.next=45;break}return t.abrupt("break",48);case 45:++T,t.next=38;break;case 48:return k=r,c&&(A=l.getOrigin(),D=(0,u.default)(A,2),F=D[0],j=D[1],B=f.getResolution(l),G=(0,u.default)(B,2),q=G[0],U=G[1],k=[Math.round((c[0]-F)/q),Math.round((c[1]-j)/U),Math.round((c[2]-F)/q),Math.round((c[3]-j)/U)],k=[Math.min(k[0],k[2]),Math.min(k[1],k[3]),Math.max(k[0],k[2]),Math.max(k[1],k[3])]),t.abrupt("return",f.readRasters(S({},e,{window:k})));case 51:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),N=function(t){function e(t,r,o,s){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,l.default)(this,e),(a=(0,n.default)(this,(0,i.default)(e).call(this))).source=t,a.littleEndian=r,a.bigTiff=o,a.firstIFDOffset=s,a.cache=u.cache||!1,a.fileDirectories=null,a.fileDirectoriesParsing=null,a.ghostValues=null,a}return(0,o.default)(e,t),(0,f.default)(e,[{key:"getSlice",value:function(){var t=(0,c.default)(s.default.mark((function t(e,r){var n;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.bigTiff?4048:1024,t.t0=d.default,t.next=4,this.source.fetch(e,void 0!==r?r:n);case 4:return t.t1=t.sent,t.t2=e,t.t3=this.littleEndian,t.t4=this.bigTiff,t.abrupt("return",new t.t0(t.t1,t.t2,t.t3,t.t4));case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"parseFileDirectories",value:function(){var t=(0,c.default)(s.default.mark((function t(){var e,r,n,i,o,a,u,c,l,f,h,p,d,g,y,v,_,b,w,x;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.firstIFDOffset,r=this.bigTiff?8:2,n=this.bigTiff?20:12,i=[];case 4:if(0===e){t.next=48;break}return t.next=7,this.getSlice(e);case 7:if(o=t.sent,a=this.bigTiff?o.readUint64(e):o.readUint16(e),u=a*n+(this.bigTiff?16:6),o.covers(e,u)){t.next=14;break}return t.next=13,this.getSlice(e,u);case 13:o=t.sent;case 14:c={},l=e+(this.bigTiff?8:2),f=0;case 17:if(!(f<a)){t.next=44;break}if(h=o.readUint16(l),p=o.readUint16(l+2),d=this.bigTiff?o.readUint64(l+4):o.readUint32(l+4),g=void 0,y=void 0,v=C(p),_=l+(this.bigTiff?12:8),!(v*d<=(this.bigTiff?8:4))){t.next=29;break}g=P(o,p,d,_),t.next=39;break;case 29:if(b=o.readOffset(_),w=C(p)*d,!o.covers(b,w)){t.next=35;break}g=P(o,p,d,b),t.next=39;break;case 35:return t.next=37,this.getSlice(b,w);case 37:x=t.sent,g=P(x,p,d,b);case 39:y=1===d&&-1===m.arrayFields.indexOf(h)&&p!==m.fieldTypes.RATIONAL&&p!==m.fieldTypes.SRATIONAL?g[0]:g,c[m.fieldTagNames[h]]=y;case 41:l+=n,++f,t.next=17;break;case 44:i.push([c,I(c)]),e=o.readOffset(e+r+n*a),t.next=4;break;case 48:return t.abrupt("return",i);case 49:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getImage",value:function(){var t=(0,c.default)(s.default.mark((function t(){var e,r,n=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:0,this.fileDirectories){t.next=6;break}return this.fileDirectoriesParsing||(this.fileDirectoriesParsing=this.parseFileDirectories()),t.next=5,this.fileDirectoriesParsing;case 5:this.fileDirectories=t.sent;case 6:if(r=this.fileDirectories[e]){t.next=9;break}throw new RangeError("Invalid image index");case 9:return t.abrupt("return",new h.default(r[0],r[1],this.dataView,this.littleEndian,this.cache,this.source));case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var t=(0,c.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.fileDirectories){t.next=5;break}return this.fileDirectoriesParsing||(this.fileDirectoriesParsing=this.parseFileDirectories()),t.next=4,this.fileDirectoriesParsing;case 4:this.fileDirectories=t.sent;case 5:return t.abrupt("return",this.fileDirectories.length);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getGhostValues",value:function(){var t=(0,c.default)(s.default.mark((function t(){var e,r,n,i,o,a,c,l,f=this;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.bigTiff?16:8,!this.ghostValues){t.next=3;break}return t.abrupt("return",this.ghostValues);case 3:return n=(r="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,t.next=7,this.getSlice(e,n);case 7:if(i=t.sent,r!==P(i,m.fieldTypes.ASCII,r.length,e)){t.next=19;break}if(o=P(i,m.fieldTypes.ASCII,n,e),a=o.split("\n")[0],!((c=Number(a.split("=")[1].split(" ")[0])+a.length)>n)){t.next=16;break}return t.next=15,this.getSlice(e,c);case 15:i=t.sent;case 16:l=P(i,m.fieldTypes.ASCII,c,e),this.ghostValues={},l.split("\n").filter((function(t){return t.length>0})).map((function(t){return t.split("=")})).forEach((function(t){var e=(0,u.default)(t,2),r=e[0],n=e[1];f.ghostValues[r]=n}));case 19:return t.abrupt("return",this.ghostValues);case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:function(){var t=(0,c.default)(s.default.mark((function t(r,n){var i,o,a,u,c,l,f;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.fetch(0,1024);case 2:if(i=t.sent,o=new p.default(i),18761!==(a=o.getUint16(0,0))){t.next=9;break}u=!0,t.next=14;break;case 9:if(19789!==a){t.next=13;break}u=!1,t.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(c=o.getUint16(2,u))){t.next=19;break}l=!1,t.next=27;break;case 19:if(43!==c){t.next=26;break}if(l=!0,8===o.getUint16(4,u)){t.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:t.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return f=l?o.getUint64(8,u):o.getUint32(4,u),t.abrupt("return",new e(r,u,l,f,n));case 29:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}]),e}(M);r.GeoTIFF=N;var T=N;r.default=T;var O=function(t){function e(t,r){var o;return(0,l.default)(this,e),(o=(0,n.default)(this,(0,i.default)(e).call(this))).mainFile=t,o.overviewFiles=r,o.imageFiles=[t].concat(r),o.fileDirectoriesPerFile=null,o.fileDirectoriesPerFileParsing=null,o.imageCount=null,o}return(0,o.default)(e,t),(0,f.default)(e,[{key:"parseFileDirectoriesPerFile",value:function(){var t=(0,c.default)(s.default.mark((function t(){var e;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[this.mainFile.parseFileDirectories()].concat(this.overviewFiles.map((function(t){return t.parseFileDirectories()}))),t.next=3,Promise.all(e);case 3:return this.fileDirectoriesPerFile=t.sent,t.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getImage",value:function(){var t=(0,c.default)(s.default.mark((function t(){var e,r,n,i,o,a=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:0,this.fileDirectoriesPerFile){t.next=6;break}return this.fileDirectoriesPerFileParsing||(this.fileDirectoriesPerFileParsing=this.parseFileDirectoriesPerFile()),t.next=5,this.fileDirectoriesPerFileParsing;case 5:this.fileDirectoriesPerFile=t.sent;case 6:r=e,n=0;case 8:if(!(n<this.fileDirectoriesPerFile.length)){t.next=17;break}if(i=this.fileDirectoriesPerFile[n],!(r<i.length)){t.next=13;break}return o=this.imageFiles[n],t.abrupt("return",new h.default(i[r][0],i[r][1],o.dataView,o.littleEndian,o.cache,o.source));case 13:r-=i.length;case 14:++n,t.next=8;break;case 17:throw new RangeError("Invalid image index");case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var t=(0,c.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.fileDirectoriesPerFile){t.next=5;break}return this.fileDirectoriesPerFileParsing||(this.fileDirectoriesPerFileParsing=this.parseFileDirectoriesPerFile()),t.next=4,this.fileDirectoriesPerFileParsing;case 4:this.fileDirectoriesPerFile=t.sent;case 5:return t.abrupt("return",this.fileDirectoriesPerFile.reduce((function(t,e){return t+e.length}),0));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),e}(M);function L(){return(L=(0,c.default)(s.default.mark((function t(e){var r,n=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},t.abrupt("return",N.fromSource((0,y.makeRemoteSource)(e,r)));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(){return(R=(0,c.default)(s.default.mark((function t(e){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.fromSource((0,y.makeBufferSource)(e)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=(0,c.default)(s.default.mark((function t(e){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.fromSource((0,y.makeFileSource)(e)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=(0,c.default)(s.default.mark((function t(e){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.fromSource((0,y.makeFileReaderSource)(e)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return(D=(0,c.default)(s.default.mark((function t(e){var r,n,i,o,a=arguments;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:[],n=a.length>2&&void 0!==a[2]?a[2]:{},t.next=4,N.fromSource((0,y.makeRemoteSource)(e,n));case 4:return i=t.sent,t.next=7,Promise.all(r.map((function(t){return N.fromSource((0,y.makeRemoteSource)(t,n))})));case 7:return o=t.sent,t.abrupt("return",new O(i,o));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return(F=(0,c.default)(s.default.mark((function t(e,r){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.writeGeotiff)(e,r));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}r.MultiGeoTIFF=O},{"@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","./geotiffimage":"eOWo","./dataview64":"dqpX","./dataslice":"dGLV","./pool":"dHPO","./source":"cUx7","./globals":"j27V","./geotiffwriter":"BGyE","./rgb":"fpBl"}],epB2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./geotiff");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})}))},{"./geotiff":"bsJs"}]},{},["epB2"])},SLVX:function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}r.d(e,"a",(function(){return n}))},"UB+q":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return v}));var n=r("iceZ"),i=r.n(n),o=r("3Cr/"),s=r("zY86"),a=r("zqkD"),u=r("AHNb"),c=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};let l=!1;const f=t=>t&&t.type===a.a.run,h=t=>i()(t)||function(t){return t&&"object"==typeof t&&"function"==typeof t.subscribe}(t);function p(t){return Object(s.a)(t)?{payload:t.send,transferables:t.transferables}:{payload:t,transferables:void 0}}function d(t,e){const{payload:r,transferables:n}=p(e),i={type:a.b.error,uid:t,error:Object(o.b)(r)};u.a.postMessageToMaster(i,n)}function g(t,e,r){const{payload:n,transferables:i}=p(r),o={type:a.b.result,uid:t,complete:!!e||void 0,payload:n};u.a.postMessageToMaster(o,i)}function y(t){try{const e={type:a.b.uncaughtError,error:Object(o.b)(t)};u.a.postMessageToMaster(e)}catch(t){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already. Latest error:",t)}}function m(t,e,r){return c(this,void 0,void 0,(function*(){let n;try{n=e(...r)}catch(e){return d(t,e)}const i=h(n)?"observable":"promise";if(function(t,e){const r={type:a.b.running,uid:t,resultType:e};u.a.postMessageToMaster(r)}(t,i),h(n))n.subscribe(e=>g(t,!1,Object(o.b)(e)),e=>d(t,Object(o.b)(e)),()=>g(t,!0));else try{const e=yield n;g(t,!0,Object(o.b)(e))}catch(e){d(t,Object(o.b)(e))}}))}function v(t){if(!u.a.isWorkerRuntime())throw Error("expose() called in the master thread.");if(l)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(l=!0,"function"==typeof t)u.a.subscribeToMasterMessages(e=>{f(e)&&!e.method&&m(e.uid,t,e.args.map(o.a))}),function(){const t={type:a.b.init,exposed:{type:"function"}};u.a.postMessageToMaster(t)}();else{if("object"!=typeof t||!t)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${t}`);u.a.subscribeToMasterMessages(e=>{f(e)&&e.method&&m(e.uid,t[e.method],e.args.map(o.a))}),function(t){const e={type:a.b.init,exposed:{type:"module",methods:t}};u.a.postMessageToMaster(e)}(Object.keys(t).filter(e=>"function"==typeof t[e]))}}"undefined"!=typeof self&&"function"==typeof self.addEventListener&&u.a.isWorkerRuntime()&&(self.addEventListener("error",t=>{setTimeout(()=>y(t.error||t),250)}),self.addEventListener("unhandledrejection",t=>{const e=t.reason;e&&"string"==typeof e.message&&setTimeout(()=>y(e),250)})),void 0!==t&&"function"==typeof t.on&&u.a.isWorkerRuntime()&&(t.on("uncaughtException",t=>{setTimeout(()=>y(t),250)}),t.on("unhandledRejection",t=>{t&&"string"==typeof t.message&&setTimeout(()=>y(t),250)}))}).call(this,r("8oxB"))},"WVt+":function(t,e,r){!function(t){"use strict";function e(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.bbox,i=r.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&C(n),i&&I(i);var o={type:"Feature"};return i&&(o.id=i),n&&(o.bbox=n),o.properties=e||{},o.geometry=t,o}function r(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var i,s=r.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");switch(s&&C(s),t){case"Point":i=n(e).geometry;break;case"LineString":i=a(e).geometry;break;case"Polygon":i=o(e).geometry;break;case"MultiPoint":i=f(e).geometry;break;case"MultiLineString":i=l(e).geometry;break;case"MultiPolygon":i=h(e).geometry;break;default:throw new Error(t+" is invalid")}return s&&(i.bbox=s),i}function n(t,r,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!E(t[0])||!E(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},r,n)}function i(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return n(t,e)})),r)}function o(t,r,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===i&&0===s&&!E(o[0][0])||!E(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},r,n)}function s(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return o(t,e)})),r)}function a(t,r,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!E(t[0][1])||!E(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},r,n)}function u(t,e,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map((function(t){return a(t,e)})),r)}function c(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");r&&C(r),n&&I(n);var i={type:"FeatureCollection"};return n&&(i.id=n),r&&(i.bbox=r),i.features=t,i}function l(t,r,n){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},r,n)}function f(t,r,n){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},r,n)}function h(t,r,n){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},r,n)}function p(t,r,n){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},r,n)}function d(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function g(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=Eo[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t*r}function y(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var r=Eo[e||"kilometers"];if(!r)throw new Error(e+" units is invalid");return t/r}function m(t,e){return _(y(t,e))}function v(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function b(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function w(t,e,r){if(null==t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(y(t,e),r||"kilometers")}function x(t,e,r){if(null==t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var n=Co[e||"meters"];if(!n)throw new Error("invalid original units");var i=Co[r||"kilometers"];if(!i)throw new Error("invalid final units");return t/n*i}function E(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function C(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!E(t))throw new Error("bbox must only contain numbers")}))}function I(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function P(t,e,r){if(null!==t)for(var n,i,o,s,a,u,c,l,f=0,h=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,m=0;m<y;m++){a=(l=!!(c=d?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<a;v++){var _=0,b=0;if(null!==(s=l?c.geometries[v]:c)){u=s.coordinates;var w=s.type;switch(f=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(u,h,m,_,b),h++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++)e(u[n],h,m,_,b),h++,"MultiPoint"===w&&_++;"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(i=0;i<u[n].length-f;i++)e(u[n][i],h,m,_,b),h++;"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for("MultiPolygon"===w&&(b=0),i=0;i<u[n].length;i++){for(o=0;o<u[n][i].length-f;o++)e(u[n][i][o],h,m,_,b),h++;b++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)P(s.geometries[n],e,r);break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,r,n){var i=r;return P(t,(function(t,n,o,s,a){i=0===n&&void 0===r?t:e(i,t,n,o,s,a)}),n),i}function N(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length;r++)e(t.features[r].properties,r);break;case"Feature":e(t.properties,0)}}function T(t,e,r){var n=r;return N(t,(function(t,i){n=0===i&&void 0===r?t:e(n,t,i)})),n}function O(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)e(t.features[r],r)}function L(t,e,r){var n=r;return O(t,(function(t,i){n=0===i&&void 0===r?t:e(n,t,i)})),n}function R(t){var e=[];return P(t,(function(t){e.push(t)})),e}function k(t,e){var r,n,i,o,s,a,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(r=0;r<g;r++){for(a=p?t.features[r].geometry:d?t.geometry:t,c=p?t.features[r].properties:d?t.properties:{},l=p?t.features[r].bbox:d?t.bbox:void 0,f=p?t.features[r].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,h,c,l,f);break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)e(o.geometries[n],h,c,l,f);break;default:throw new Error("Unknown Geometry Type")}else e(null,h,c,l,f);h++}}function A(t,e,r){var n=r;return k(t,(function(t,i,o,s,a){n=0===i&&void 0===r?t:e(n,t,i,o,s,a)})),n}function D(t,r){k(t,(function(t,n,i,o,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void r(e(t,i,{bbox:o,id:s}),n,0)}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}t.coordinates.forEach((function(t,o){r(e({type:a,coordinates:t},i),n,o)}))}))}function F(t,e,r){var n=r;return D(t,(function(t,i,o){n=0===i&&0===o&&void 0===r?t:e(n,t,i,o)})),n}function j(t,e){D(t,(function(t,r,n){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&M(t,(function(o,s,u,c,l,f){var h=a([o,s],t.properties);return e(h,r,n,f,i),i++,s}))}}))}function B(t,e,r){var n=r,i=!1;return j(t,(function(t,o,s,a,u){n=!1===i&&void 0===r?t:e(n,t,o,s,a,u),i=!0})),n}function G(t,e){if(!t)throw new Error("geojson is required");D(t,(function(t,r,n){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,r,n,0,0);break;case"Polygon":for(var s=0;s<o.length;s++)e(a(o[s],t.properties),r,n,s)}}}))}function q(t,e,r){var n=r;return G(t,(function(t,i,o,s){n=0===i&&void 0===r?t:e(n,t,i,o,s)})),n}function U(t){var e=[1/0,1/0,-1/0,-1/0];return P(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function z(t){if(!t)throw new Error("obj is required");var e=Y(t);if(e.length>1&&E(e[0])&&E(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function Y(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return V(e),e;throw new Error("No valid coordinates")}function V(t){if(t.length>1&&E(t[0])&&E(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return V(t[0]);throw new Error("coordinates must only contain numbers")}function X(t,e,r){if(!e||!r)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.type)}function W(t,e,r){if(!t)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+t.geometry.type)}function H(t,e,r){if(!t)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0;n<t.features.length;n++){var i=t.features[n];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+r+": must be a "+e+", given "+i.geometry.type)}}function K(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function Z(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function J(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function Q(t,e,r){r=r||{};for(var n=Object.keys(No),i=0;i<n.length;i++){var o=n[i],s=r[o];s=null!=s?s:No[o],To[o]=s}To.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],r=0;return t.rows,t.cols,t.cells.forEach((function(n,i){n.forEach((function(n,o){if(void 0!==n&&!function(t){return 5===t.cval||10===t.cval}(n)&&!tt(n)){var s=function(t,e,r){var n,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],f=(t[e][r],t[e][r]),h=f.cval,p=rt(f,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h]);a.push([r+p[0],e+p[1]]),p=rt(f,o=l[h]),a.push([r+p[0],e+p[1]]),et(f);for(var d=r+u[h],g=e+c[h],y=h;d>=0&&g>=0&&g<s&&(d!=r||g!=e)&&void 0!==(f=t[g][d]);){if(0===(h=f.cval)||15===h)return{path:a,info:"mergeable"};o=l[h],n=u[h],i=c[h],5!==h&&10!==h||(5===h?f.flipped?-1===c[y]?(o="left",n=-1,i=0):(o="right",n=1,i=0):-1===u[y]&&(o="bottom",n=0,i=-1):10===h&&(f.flipped?-1===u[y]?(o="top",n=0,i=1):(o="bottom",n=0,i=-1):1===c[y]&&(o="left",n=-1,i=0))),p=rt(f,o),a.push([d+p[0],g+p[1]]),et(f),d+=n,g+=i,y=h}return{path:a,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var u=s.path[s.path.length-1][0],c=s.path[s.path.length-1][1],l=r-1;l>=0;l--)if(Math.abs(e[l][0][0]-u)<=1e-7&&Math.abs(e[l][0][1]-c)<=1e-7){for(var f=s.path.length-2;f>=0;--f)e[l].unshift(s.path[f]);a=!0;break}a||(e[r++]=s.path)}}))})),e}(function(t,e){for(var r=t.length-1,n=t[0].length-1,i={rows:r,cols:n,cells:[]},o=0;o<r;++o){i.cells[o]=[];for(var s=0;s<n;++s){var a=0,u=t[o+1][s],c=t[o+1][s+1],l=t[o][s+1],f=t[o][s];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(f))){a|=u>=e?8:0,a|=c>=e?4:0,a|=l>=e?2:0;var h,p,d,g,y=!1;if(5==(a|=f>=e?1:0)||10===a){var m=(u+c+l+f)/4;5===a&&m<e?(a=10,y=!0):10===a&&m<e&&(a=5,y=!0)}0!==a&&15!==a&&(h=p=d=g=.5,1===a?(d=1-$(e,u,f),p=1-$(e,l,f)):2===a?(p=$(e,f,l),g=1-$(e,c,l)):3===a?(d=1-$(e,u,f),g=1-$(e,c,l)):4===a?(h=$(e,u,c),g=$(e,l,c)):5===a?(h=$(e,u,c),g=$(e,l,c),p=1-$(e,l,f),d=1-$(e,u,f)):6===a?(p=$(e,f,l),h=$(e,u,c)):7===a?(d=1-$(e,u,f),h=$(e,u,c)):8===a?(d=$(e,f,u),h=1-$(e,c,u)):9===a?(p=1-$(e,l,f),h=1-$(e,c,u)):10===a?(h=1-$(e,c,u),g=1-$(e,c,l),p=$(e,f,l),d=$(e,f,u)):11===a?(h=1-$(e,c,u),g=1-$(e,c,l)):12===a?(d=$(e,f,u),g=$(e,l,c)):13===a?(p=1-$(e,l,f),g=$(e,l,c)):14===a?(d=$(e,f,u),p=$(e,f,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:y,top:h,right:g,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof To.successCallback&&To.successCallback(a),a}function $(t,e,r){return(t-e)/(r-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function rt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function nt(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function it(t,e){if(!(this instanceof it))return new it(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function ot(t,e){st(t,0,t.children.length,e,t)}function st(t,e,r,n,i){i||(i=dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],at(i,t.leaf?n(o):o);return i}function at(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ut(t,e){return t.minX-e.minX}function ct(t,e){return t.minY-e.minY}function lt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ft(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ht(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function pt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gt(t,e,r,n,i){for(var o,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=n||(o=e+Math.ceil((r-e)/n/2)*n,Oo(t,o,e,r,i),s.push(e,o,o,r))}function yt(t,e){return t(e={exports:{}},e.exports),e.exports}function mt(t,e){if(!(this instanceof mt))return new mt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function vt(t,e,r){e=Math.max(0,void 0===e?2:e),r=r||0;for(var n,i=function(t){for(var e=t[0],r=t[0],n=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>n[0]&&(n=s),s[1]<r[1]&&(r=s),s[1]>i[1]&&(i=s)}var a=[e,r,n,i],u=a.slice();for(o=0;o<t.length;o++)Yo(t[o],a)||u.push(t[o]);var c=Go(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=Lo(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),n=Et(u,n),s.push(n)}var c=Lo(16);for(a=0;a<s.length;a++)c.insert(xt(s[a]));for(var l=e*e,f=r*r;s.length;){var h=s.shift(),p=h.p,d=h.next.p,g=St(p,d);if(!(g<f)){var y=g/l;(u=function(t,e,r,n,i,o,s){for(var a=new Uo(null,_t),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],f=u.leaf?Ct(l,r,n):function(t,e,r){if(bt(t,r)||bt(e,r))return 0;var n=It(t[0],t[1],e[0],e[1],r.minX,r.minY,r.maxX,r.minY);if(0===n)return 0;var i=It(t[0],t[1],e[0],e[1],r.minX,r.minY,r.minX,r.maxY);if(0===i)return 0;var o=It(t[0],t[1],e[0],e[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var s=It(t[0],t[1],e[0],e[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===s?0:Math.min(n,i,o,s)}(r,n,l);f>o||a.push({node:l,dist:f})}for(;a.length&&!a.peek().node.children;){var h=a.pop(),p=h.node,d=Ct(p,e,r),g=Ct(p,n,i);if(h.dist<d&&h.dist<g&&wt(r,p,s)&&wt(n,p,s))return p}(u=a.pop())&&(u=u.node)}return null}(o,h.prev.p,p,d,h.next.next.p,y,c))&&Math.min(St(u,p),St(u,d))<=y&&(s.push(h),s.push(Et(u,h)),o.remove(u),c.remove(h),c.insert(xt(h)),c.insert(xt(h.next)))}}h=n;var m=[];do{m.push(h.p),h=h.next}while(h!==n);return m.push(h.p),m}function _t(t,e){return t.dist-e.dist}function bt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function wt(t,e,r){for(var n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=r.search({minX:n,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(function(t,e,r,n){return t!==n&&e!==r&&Vo(t,e,r)>0!=Vo(t,e,n)>0&&Vo(r,n,t)>0!=Vo(r,n,e)>0}(a[u].p,a[u].next.p,t,e))return!1;return!0}function xt(t){var e=t.p,r=t.next.p;return t.minX=Math.min(e[0],r[0]),t.minY=Math.min(e[1],r[1]),t.maxX=Math.max(e[0],r[0]),t.maxY=Math.max(e[1],r[1]),t}function Et(t,e){var r={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(r.next=e.next,r.prev=e,e.next.prev=r,e.next=r):(r.prev=r,r.next=r),r}function St(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Ct(t,e,r){var n=e[0],i=e[1],o=r[0]-n,s=r[1]-i;if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(n=r[0],i=r[1]):a>0&&(n+=o*a,i+=s*a)}return(o=t[0]-n)*o+(s=t[1]-i)*s}function It(t,e,r,n,i,o,s,a){var u,c,l,f,h=r-t,p=n-e,d=s-i,g=a-o,y=t-i,m=e-o,v=h*h+p*p,_=h*d+p*g,b=d*d+g*g,w=h*y+p*m,x=d*y+g*m,E=v*b-_*_,S=E,C=E;0===E?(c=0,S=1,f=x,C=b):(f=v*x-_*w,(c=_*x-b*w)<0?(c=0,f=x,C=b):c>S&&(c=S,f=x+_,C=b)),f<0?(f=0,-w<0?c=0:-w>v?c=S:(c=-w,S=v)):f>C&&(f=C,-w+_<0?c=0:-w+_>v?c=S:(c=-w+_,S=v));var I=(1-(l=0===f?0:f/C))*i+l*s-((1-(u=0===c?0:c/S))*t+u*r),P=(1-l)*o+l*a-((1-u)*e+u*n);return I*I+P*P}function Pt(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.concavity||1/0,n=[];if(P(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var i=Xo(n,r);return i.length>3?o([i]):null}function Mt(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=z(t),o=Y(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,a))return!1;"Polygon"===s&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(Nt(i,o[u][0],n)){for(var l=!1,f=1;f<o[u].length&&!l;)Nt(i,o[u][f],!n)&&(l=!0),f++;l||(c=!0)}return c}function Nt(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0)return!r;a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s&&(n=!n)}return n}function Tt(t,e){var r=[];return k(e,(function(e){O(t,(function(t){Mt(t,e)&&r.push(t)}))})),c(r)}function Ot(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var r=!1;return c(function(t){if(t.length<3)return[];t.sort(Rt);for(var e,r,n,i,o,s,a=t.length-1,u=t[a].x,c=t[0].x,l=t[a].y,f=l;a--;)t[a].y<l&&(l=t[a].y),t[a].y>f&&(f=t[a].y);var h,p=c-u,d=f-l,g=p>d?p:d,y=.5*(c+u),m=.5*(f+l),v=[new Lt({x:y-20*g,y:m-g,__sentinel:!0},{x:y,y:m+20*g,__sentinel:!0},{x:y+20*g,y:m-g,__sentinel:!0})],_=[],b=[];for(a=t.length;a--;){for(b.length=0,h=v.length;h--;)(p=t[a].x-v[h].x)>0&&p*p>v[h].r?(_.push(v[h]),v.splice(h,1)):p*p+(d=t[a].y-v[h].y)*d>v[h].r||(b.push(v[h].a,v[h].b,v[h].b,v[h].c,v[h].c,v[h].a),v.splice(h,1));for(kt(b),h=b.length;h;)r=b[--h],e=b[--h],n=t[a],i=r.x-e.x,o=r.y-e.y,s=2*(i*(n.y-r.y)-o*(n.x-r.x)),Math.abs(s)>1e-12&&v.push(new Lt(e,r,n))}for(Array.prototype.push.apply(_,v),a=_.length;a--;)(_[a].a.__sentinel||_[a].b.__sentinel||_[a].c.__sentinel)&&_.splice(a,1);return _}(t.features.map((function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?n.z=t.properties[e]:3===t.geometry.coordinates.length&&(r=!0,n.z=t.geometry.coordinates[2]),n}))).map((function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],i=[t.c.x,t.c.y],s={};return r?(e.push(t.a.z),n.push(t.b.z),i.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,n,i,e]],s)})))}function Lt(t,e,r){this.a=t,this.b=e,this.c=r;var n,i,o=e.x-t.x,s=e.y-t.y,a=r.x-t.x,u=r.y-t.y,c=o*(t.x+e.x)+s*(t.y+e.y),l=a*(t.x+r.x)+u*(t.y+r.y),f=2*(o*(r.y-e.y)-s*(r.x-e.x));this.x=(u*c-s*l)/f,this.y=(o*l-a*c)/f,n=this.x-t.x,i=this.y-t.y,this.r=n*n+i*i}function Rt(t,e){return e.x-t.x}function kt(t){var e,r,n,i,o,s=t.length;t:for(;s;)for(r=t[--s],e=t[--s],n=s;n;)if(o=t[--n],i=t[--n],e===i&&r===o||e===o&&r===i){t.splice(s,2),t.splice(n,2),s-=2;continue t}}function At(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.units,i=z(t),o=z(e),s=b(o[1]-i[1]),a=b(o[0]-i[0]),u=b(i[1]),c=b(o[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return g(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n)}function Dt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ft(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}})),e.features=t.features.map((function(t){return Ft(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return jt(t);default:throw new Error("unknown GeoJSON type")}}function Ft(t){var e={type:"Feature"};return Object.keys(t).forEach((function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}})),e.properties=function t(e){var r={};return e?(Object.keys(e).forEach((function(n){var i=e[n];"object"==typeof i?null===i?r[n]=null:i.length?r[n]=i.map((function(t){return t})):r[n]=t(i):r[n]=i})),r):r}(t.properties),e.geometry=jt(t.geometry),e}function jt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return jt(t)})),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map((function(e){return t(e)}))}(t.coordinates),e)}function Bt(t,e){function r(t,e){e.length&&e.pop();for(var r=u[t<0?~t:t],n=0,i=r.length;n<i;++n)e.push(a(r[n],n));t<0&&Zo(e,i)}function n(t){return a(t)}function i(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}var a=Ko(t.transform),u=t.arcs;return function t(e){var r,o=e.type;switch(o){case"GeometryCollection":return{type:o,geometries:e.geometries.map(t)};case"Point":r=n(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(n);break;case"LineString":r=i(e.arcs);break;case"MultiLineString":r=e.arcs.map(i);break;case"Polygon":r=s(e.arcs);break;case"MultiPolygon":r=e.arcs.map(s);break;default:return null}return{type:o,coordinates:r}}(e)}function Gt(t,e){function r(t){t.forEach((function(e){e.forEach((function(e){(i[e=e<0?~e:e]||(i[e]=[])).push(t)}))})),o.push(t)}function n(e){return function(t){for(var e,r=-1,n=t.length,i=t[n-1],o=0;++r<n;)e=i,i=t[r],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Bt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var i={},o=[],s=[];return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":r(e.arcs);break;case"MultiPolygon":e.arcs.forEach(r)}})),o.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,s.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){i[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),o.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:s.map((function(e){var r,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){i[t<0?~t:t].length<2&&o.push(t)}))}))})),(r=(o=Jo(t,o)).length)>1)for(var s,a,u=1,c=n(o[0]);u<r;++u)(s=n(o[u]))>c&&(a=o[0],o[0]=o[u],o[u]=a,c=s);return o}))}}function qt(t,e,r){for(var n,i=e+(r---e>>1);e<i;++e,--r)n=t[e],t[e]=t[r],t[r]=n}function Ut(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(zt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?zt:Yt)(t)}function zt(t){var e,r=Yt(t.geometry);for(e in null!=t.id&&(r.id=t.id),null!=t.bbox&&(r.bbox=t.bbox),t.properties){r.properties=t.properties;break}return r}function Yt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Yt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Vt(t){var e,r=t[0],n=t[1];return n<r&&(e=r,r=n,n=e),r+31*n}function Xt(t,e){var r,n=t[0],i=t[1],o=e[0],s=e[1];return i<n&&(r=n,n=i,i=r),s<o&&(r=o,o=s,s=r),n===o&&i===s}function Wt(t){return t[0].toString()+","+t[1].toString()}function Ht(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Dt(t));var n=function(t){var e={};D(t,(function(t){e[t.geometry.type]=!0}));var r=Object.keys(e);return 1===r.length?r[0]:null}(t);if(!n)throw new Error("geojson must be homogenous");switch(n){case"LineString":return function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Dt(t));var n=[],i=q(t,(function(t,e){return function(t,e){var r,n=t.geometry.coordinates,i=e.geometry.coordinates,o=Wt(n[0]),s=Wt(n[n.length-1]),u=Wt(i[0]),c=Wt(i[i.length-1]);if(o===c)r=i.concat(n.slice(1));else if(u===s)r=n.concat(i.slice(1));else if(o===u)r=n.slice(1).reverse().concat(i);else{if(s!==c)return null;r=n.concat(i.reverse().slice(1))}return a(r)}(t,e)||(n.push(t),e)}));return i&&n.push(i),n.length?1===n.length?n[0]:l(n.map((function(t){return t.coordinates}))):null}(t,e);case"Polygon":return function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if("FeatureCollection"!==J(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==r&&void 0!==r||(t=Dt(t));var n=[];D(t,(function(t){n.push(t.geometry)}));var i=ss({geoms:p(n).geometry});return Qo(i,i.objects.geoms.geometries)}(t,e);default:throw new Error(n+" is not supported")}}function Kt(t,r){var n="object"==typeof r?r.mutate:r;if(!t)throw new Error("geojson is required");var i=J(t),o=[];switch(i){case"LineString":o=Zt(t);break;case"MultiLineString":case"Polygon":Y(t).forEach((function(t){o.push(Zt(t))}));break;case"MultiPolygon":Y(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Zt(t))})),o.push(e)}));break;case"Point":return t;case"MultiPoint":var s={};Y(t).forEach((function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)}));break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=o,t):{type:i,coordinates:o}:!0===n?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function Zt(t){var e=Y(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var r,n,i,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)r=e[a-1],n=e[a],function(t,e,r){var n=r[0],i=r[1],o=t[0],s=t[1],a=e[0],u=e[1],c=a-o,l=u-s;return(n-o)*l-(i-s)*c==0&&(Math.abs(c)>=Math.abs(l)?c>0?o<=n&&n<=a:a<=n&&n<=o:l>0?s<=i&&i<=u:u<=i&&i<=s)}(r,i=e[a+1],n)||o.push(n);return o.push(i),o}function Jt(t,e){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n}function Qt(t,e,r){var n=e.x,i=e.y,o=r.x-n,s=r.y-i;if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-i)*s)/(o*o+s*s);a>1?(n=r.x,i=r.y):a>0&&(n+=o*a,i+=s*a)}return(o=t.x-n)*o+(s=t.y-i)*s}function $t(t,e,r){if(t.length<=2)return t;var n=void 0!==e?e*e:1;return function(t,e){var r=t.length-1,n=[t[0]];return function t(e,r,n,i,o){for(var s,a=i,u=r+1;u<n;u++){var c=Qt(e[u],e[r],e[n]);c>a&&(s=u,a=c)}a>i&&(s-r>1&&t(e,r,s,i,o),o.push(e[s]),n-s>1&&t(e,s,n,i,o))}(t,0,r,e,n),n.push(t[r]),n}(t=r?t:function(t,e){for(var r,n=t[0],i=[n],o=1,s=t.length;o<s;o++)Jt(r=t[o],n)>e&&(i.push(r),n=r);return n!==r&&i.push(r),i}(t,n),n)}function te(t,e,r){return $t(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,r).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function ee(t,e,r){return t.map((function(t){var n=t.map((function(t){return{x:t[0],y:t[1]}}));if(n.length<4)throw new Error("invalid polygon");for(var i=$t(n,e,r).map((function(t){return[t.x,t.y]}));!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(i);)i=$t(n,e-=.01*e,r).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function re(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.resolution||1e4,n=e.sharpness||.85;if(!t)throw new Error("line is required");if(!E(r))throw new Error("resolution must be an number");if(!E(n))throw new Error("sharpness must be an number");for(var i=[],o=new as({points:K(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),duration:r,sharpness:n}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2==0&&i.push([u.x,u.y])}return a(i,t.properties)}function ne(t){C(t);var e=Number(t[0]),r=Number(t[1]),n=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,r];return o([[s,[n,r],[n,i],[e,i],s]])}function ie(t){return ne(U(t))}function oe(t){var e=t[0],r=t[1],n=t[2],i=t[3];if(At(t.slice(0,2),[n,r])>=At(t.slice(0,2),[e,i])){var o=(r+i)/2;return[e,o-(n-e)/2,n,o+(n-e)/2]}var s=(e+n)/2;return[s-(i-r)/2,r,s+(i-r)/2,i]}function se(t,e,r,i){if(!S(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties,a=z(t),u=b(a[0]),c=b(a[1]),l=b(r),f=y(e,o),h=Math.asin(Math.sin(c)*Math.cos(f)+Math.cos(c)*Math.sin(f)*Math.cos(l));return n([_(u+Math.atan2(Math.sin(l)*Math.sin(f)*Math.cos(c),Math.cos(f)-Math.sin(c)*Math.sin(h))),_(h)],s)}function ae(t,e,r){var n=(r=r||{}).steps||64,i=r.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof n)throw new Error("steps must be a number");n=n||64,i=i||t.properties||{};for(var s=[],a=0;a<n;a++)s.push(se(t,e,-360*a/n,r).geometry.coordinates);return s.push(s[0]),o([s],i)}function ue(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");if(!0===r.final)return function(t,e){var r=ue(e,t);return(r+180)%360}(t,e);var n=z(t),i=z(e),o=b(n[0]),s=b(i[0]),a=b(n[1]),u=b(i[1]),c=Math.sin(s-o)*Math.cos(u),l=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return _(Math.atan2(c,l))}function ce(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.properties;if(!t)throw new Error("geojson is required");var i=U(t);return n([(i[0]+i[2])/2,(i[1]+i[3])/2],r)}function le(t,e){var r=0,i=0,o=0;return P(t,(function(t){r+=t[0],i+=t[1],o++}),!0),n([r/o,i/o],e)}function fe(t){var e=[];return"FeatureCollection"===t.type?O(t,(function(t){P(t,(function(r){e.push(n(r,t.properties))}))})):P(t,(function(r){e.push(n(r,t.properties))})),c(e)}function he(t,e,r){r=r||2;var n,i,o,s,a,u,c,l=e&&e.length,f=l?e[0]*r:t.length,h=pe(t,0,f,r,!0),p=[];if(!h)return p;if(l&&(h=function(t,e,r,n){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=pe(t,e[i]*n,i<o-1?e[i+1]*n:t.length,n,!1))===s.next&&(s.steiner=!0),a.push(function(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}(s));for(a.sort(ge),i=0;i<a.length;i++)!function(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s){if(s=a,a===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===s)return r.prev;var u,c=r,l=r.x,f=r.y,h=1/0;for(n=r.next;n!==c;)i>=n.x&&n.x>=l&&i!==n.x&&me(o<f?i:s,o,l,f,o<f?s:i,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(i-n.x))<h||u===h&&n.x>r.x)&&we(n,t)&&(r=n,h=u),n=n.next;return r}(t,e)){var r=xe(e,t);de(r,r.next)}}(a[i],r),r=de(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=o=t[0],i=s=t[1];for(var d=r;d<f;d+=r)(a=t[d])<n&&(n=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);c=0!==(c=Math.max(o-n,s-i))?1/c:0}return function t(e,r,n,i,o,s,a){if(e){!a&&s&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=ye(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,u,c=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<c&&(a++,n=n.nextZ);e++);for(u=c;a>0||u>0&&n;)0!==a&&(0===u||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(s>1)}(i)}(e,i,o,s);for(var u,c,l=e;e.prev!==e.next;)if(u=e.prev,c=e.next,s?function(t,e,r,n){var i=t.prev,o=t,s=t.next;if(ve(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,f=ye(a,u,e,r,n),h=ye(c,l,e,r,n),p=t.nextZ;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&me(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&ve(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&me(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&ve(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}(e,i,o,s):function(t){var e=t.prev,r=t,n=t.next;if(ve(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(me(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&ve(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}(e))r.push(u.i/n),r.push(e.i/n),r.push(c.i/n),Se(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?t(e=function(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!_e(i,o)&&be(i,n,n.next,o)&&we(i,o)&&we(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),Se(n),Se(n.next),n=t=o),n=n.next}while(n!==t);return n}(e,r,n),r,n,i,o,s,2):2===a&&function(e,r,n,i,o,s){var a=e;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&be(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&we(t,e)&&we(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}(a,u)){var c=xe(a,u);return a=de(a,a.next),c=de(c,c.next),t(a,r,n,i,o,s),void t(c,r,n,i,o,s)}u=u.next}a=a.next}while(a!==e)}(e,r,n,i,o,s):t(de(e),r,n,i,o,s,1);break}}}(h,p,r,n,i,c),p}function pe(t,e,r,n,i){var o,s;if(i===Ie(t,e,r,n)>0)for(o=e;o<r;o+=n)s=Ee(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=Ee(o,t[o],t[o+1],s);return s&&_e(s,s.next)&&(Se(s),s=s.next),s}function de(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!_e(n,n.next)&&0!==ve(n.prev,n,n.next))n=n.next;else{if(Se(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function ge(t,e){return t.x-e.x}function ye(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function me(t,e,r,n,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(i-s)*(n-a)>=0}function ve(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function _e(t,e){return t.x===e.x&&t.y===e.y}function be(t,e,r,n){return!!(_e(t,e)&&_e(r,n)||_e(t,n)&&_e(r,e))||ve(t,e,r)>0!=ve(t,e,n)>0&&ve(r,n,t)>0!=ve(r,n,e)>0}function we(t,e){return ve(t.prev,t,t.next)<0?ve(t,e,t.next)>=0&&ve(t,t.prev,e)>=0:ve(t,e,t.prev)<0||ve(t,t.next,e)<0}function xe(t,e){var r=new Ce(t.i,t.x,t.y),n=new Ce(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Ee(t,e,r,n){var i=new Ce(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Se(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ce(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ie(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Pe(t){var e=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}(t),r=us(e.vertices,e.holes,2),n=[],i=[];r.forEach((function(t,n){var o=r[n];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var s=0;s<i.length;s+=3){var a=i.slice(s,s+3);a.push(i[s]),n.push(o([a]))}return n}function Me(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r,n=1/0;return O(e,(function(e,i){var o=At(t,e);o<n&&((r=Dt(e)).properties.featureIndex=i,r.properties.distanceToPoint=o,n=o)})),r}function Ne(t,e,r,n,i){!function t(e,r,n,i,o){for(;i>n;){if(i-n>600){var s=i-n+1,a=r-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-a*c/s+l)),Math.min(i,Math.floor(r+(s-a)*c/s+l)),o)}var f=e[r],h=n,p=i;for(Te(e,n,r),o(e[i],f)>0&&Te(e,n,i);h<p;){for(Te(e,h,p),h++,p--;o(e[h],f)<0;)h++;for(;o(e[p],f)>0;)p--}0===o(e[n],f)?Te(e,n,p):Te(e,++p,i),p<=r&&(n=p+1),r<=p&&(i=p-1)}}(t,e,r||0,n||t.length-1,i||function(t,e){return t<e?-1:t>e?1:0})}function Te(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Oe(t,e){if(!(this instanceof Oe))return new Oe(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Le(t,e){Re(t,0,t.children.length,e,t)}function Re(t,e,r,n,i){i||(i=qe(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<r;s++)o=t.children[s],ke(i,t.leaf?n(o):o);return i}function ke(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ae(t,e){return t.minX-e.minX}function De(t,e){return t.minY-e.minY}function Fe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function je(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Be(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ge(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function qe(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ue(t,e,r,n,i){for(var o,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=n||(Ne(t,o=e+Math.ceil((r-e)/n/2)*n,e,r,i),s.push(e,o,o,r))}function ze(t){var e=Oe(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Ye(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Ve(t);return Oe.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var r=Ye(t);r.bbox=t,e.push(r)})):O(t,(function(t){t.bbox=t.bbox?t.bbox:Ve(t),e.push(t)})),Oe.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Ye(e)).bbox=e}return Oe.prototype.remove.call(this,t)},e.clear=function(){return Oe.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Oe.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Oe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Oe.prototype.all.call(this)}},e.toJSON=function(){return Oe.prototype.toJSON.call(this)},e.fromJSON=function(t){return Oe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ve(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Ye(t){var e=[t[0],t[1]],r=[t[0],t[3]],n=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],n,r,e]]}}}function Ve(t){var e=[1/0,1/0,-1/0,-1/0];return P(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function Xe(t){if(!t)throw new Error("geojson is required");var e=[];return D(t,(function(t){!function(t,e){var r=[],n=t.geometry;switch(n.type){case"Polygon":r=Y(n);break;case"LineString":r=[Y(n)]}r.forEach((function(r){(function(t,e){var r=[];return t.reduce((function(t,n){var i=a([t,n],e);return i.bbox=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1];return[r<i?r:i,n<o?n:o,r>i?r:i,n>o?n:o]}(t,n),r.push(i),n})),r})(r,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),c(e)}function We(t,r){var n={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===r.type&&(r=e(r)),"Feature"===t.type&&"Feature"===r.type&&"LineString"===t.geometry.type&&"LineString"===r.geometry.type&&2===t.geometry.coordinates.length&&2===r.geometry.coordinates.length){var o=He(t,r);return o&&i.push(o),c(i)}var s=ze();return s.load(Xe(r)),O(Xe(t),(function(t){O(s.search(t),(function(e){var r=He(t,e);if(r){var o=Y(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),c(i)}function He(t,e){var r=Y(t),i=Y(e);if(2!==r.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=r[0][0],s=r[0][1],a=r[1][0],u=r[1][1],c=i[0][0],l=i[0][1],f=i[1][0],h=i[1][1],p=(h-l)*(a-o)-(f-c)*(u-s);if(0===p)return null;var d=((f-c)*(s-l)-(h-l)*(o-c))/p,g=((a-o)*(s-l)-(u-s)*(o-c))/p;return d>=0&&d<=1&&g>=0&&g<=1?n([o+d*(a-o),s+d*(u-s)]):null}function Ke(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=n([1/0,1/0],{dist:1/0}),s=0;return D(t,(function(t){for(var i=Y(t),u=0;u<i.length-1;u++){var c=n(i[u]);c.properties.dist=At(e,c,r);var l=n(i[u+1]);l.properties.dist=At(e,l,r);var f=At(c,l,r),h=Math.max(c.properties.dist,l.properties.dist),p=ue(c,l),d=se(e,h,p+90,r),g=se(e,h,p-90,r),y=We(a([d.geometry.coordinates,g.geometry.coordinates]),a([c.geometry.coordinates,l.geometry.coordinates])),m=null;y.features.length>0&&((m=y.features[0]).properties.dist=At(e,m,r),m.properties.location=s+At(c,m,r)),c.properties.dist<o.properties.dist&&((o=c).properties.index=u,o.properties.location=s),l.properties.dist<o.properties.dist&&((o=l).properties.index=u+1,o.properties.location=s+f),m&&m.properties.dist<o.properties.dist&&((o=m).properties.index=u),s+=f}})),o}function Ze(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n,i=r.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return(n=i?Je(z(e),z(t)):Je(z(t),z(e)))>180?-(360-n):n}function Je(t,e){var r=b(t[1]),n=b(e[1]),i=b(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4));return(_(Math.atan2(i,o))+360)%360}function Qe(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=z(t),o=z(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,w(function(t,e,r){var n=r=void 0===r?xo:Number(r),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+c*c*a*a)*n}(i,o),"meters",n)}function $e(t,e){return er(t,"mercator",e)}function tr(t,e){return er(t,"wgs84",e)}function er(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&E(t[0])?t="mercator"===e?rr(t):nr(t):(!0!==n&&(t=Dt(t)),P(t,(function(t){var r="mercator"===e?rr(t):nr(t);t[0]=r[0],t[1]=r[1]}))),t}function rr(t){var e=Math.PI/180,r=20037508.342789244,n=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return n[0]>r&&(n[0]=r),n[0]<-r&&(n[0]=-r),n[1]>r&&(n[1]=r),n[1]<-r&&(n[1]=-r),n}function nr(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function ir(t,r,i){if(!S(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=n(t):"Point"===t.type?t=e(t):W(t,"Point","point"),!r)throw new Error("line is required");Array.isArray(r)?r=a(r):"LineString"===r.type?r=e(r):W(r,"LineString","line");var o=1/0,s=t.geometry.coordinates;return j(r,(function(t){var e=t.geometry.coordinates[0],r=t.geometry.coordinates[1],a=function(t,e,r,i){var o=i.mercator,s=!0!==o?At(e,t,i):or(e,t,i),a=v(!0!==o?ue(e,t):Ze(e,t)),u=v(!0!==o?ue(e,r):Ze(e,r)),c=Math.abs(a-u);if(c>90)return s;var l=(u+180)%360,f=v(!0!==o?ue(r,t):Ze(r,t)),h=Math.abs(f-l);return h>180&&(h=Math.abs(h-360)),h>90?!0!==o?At(t,r,i):or(t,r,i):!0!==o?s*Math.sin(b(c)):function(t,e,r,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(r[0])>=180)&&(o=t[0]>0||e[0]>0||r[0]>0?-180:180);var s=n(r),a=tr(function(t,e,r){var n=t[0],i=t[1],o=e[0]-n,s=e[1]-i,a=((r[0]-n)*o+(r[1]-i)*s)/(o*o+s*s);return[n+a*o,i+a*s]}($e([t[0]+o,t[1]]),$e([e[0]+o,e[1]]),$e([r[0]+o,r[1]])));return 0!==o&&(a[0]-=o),Qe(s,a,i)}(e,r,t,i)}(s,e,r,i);o>a&&(o=a)})),o}function or(t,e,r){var n=r.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=$e([t[0]+i,t[1]]),s=$e([e[0]+i,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return w(Math.sqrt(u),"meters",n)}function sr(t){for(var r=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?c([e(t)]):c([t]):t}(t),i=ce(r),o=!1,s=0;!o&&s<r.features.length;){var a,u=r.features[s].geometry,l=!1;if("Point"===u.type)i.geometry.coordinates[0]===u.coordinates[0]&&i.geometry.coordinates[1]===u.coordinates[1]&&(o=!0);else if("MultiPoint"===u.type){var f=!1;for(a=0;!f&&a<u.coordinates.length;)i.geometry.coordinates[0]===u.coordinates[a][0]&&i.geometry.coordinates[1]===u.coordinates[a][1]&&(o=!0,f=!0),a++}else if("LineString"===u.type)for(a=0;!l&&a<u.coordinates.length-1;)ar(i.geometry.coordinates[0],i.geometry.coordinates[1],u.coordinates[a][0],u.coordinates[a][1],u.coordinates[a+1][0],u.coordinates[a+1][1])&&(l=!0,o=!0),a++;else if("MultiLineString"===u.type)for(var h=0;h<u.coordinates.length;){l=!1,a=0;for(var p=u.coordinates[h];!l&&a<p.length-1;)ar(i.geometry.coordinates[0],i.geometry.coordinates[1],p[a][0],p[a][1],p[a+1][0],p[a+1][1])&&(l=!0,o=!0),a++;h++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||Mt(i,u)&&(o=!0);s++}if(o)return i;var d=c([]);for(s=0;s<r.features.length;s++)d.features=d.features.concat(fe(r.features[s]).features);return n(Me(i,d).geometry.coordinates)}function ar(t,e,r,n,i,o){return Math.sqrt((i-r)*(i-r)+(o-n)*(o-n))===Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function ur(t){return A(t,(function(t,e){return t+function t(e){var r,n=0;switch(e.type){case"Polygon":return cr(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)n+=cr(e.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)n+=t(e.geometries[r]);return n}}(e)}),0)}function cr(t){var e=0;if(t&&t.length>0){e+=Math.abs(lr(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(lr(t[r]))}return e}function lr(t){var e,r,n,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,i=u-1,o=0):s===u-1?(n=u-1,i=0,o=1):(n=s,i=s+1,o=s+2),e=t[n],r=t[i],a+=(fr(t[o][0])-fr(e[0]))*Math.sin(fr(r[1]));a=a*fs*fs/2}return a}function fr(t){return t*Math.PI/180}function hr(t,e){if(!S(e=e||{}))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,(function(t,r){var n=r.geometry.coordinates;return t+At(n[0],n[1],e)}),0)}function pr(t,e,r,n){if(!S(n=n||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,u,c,l=0,f=0;f<i.length&&!(e>=l&&f===i.length-1);f++){if(l>e&&0===o.length){if(!(s=e-l))return o.push(i[f]),a(o);u=ue(i[f],i[f-1])-180,c=se(i[f],s,u,n),o.push(c.geometry.coordinates)}if(l>=r)return(s=r-l)?(u=ue(i[f],i[f-1])-180,c=se(i[f],s,u,n),o.push(c.geometry.coordinates),a(o)):(o.push(i[f]),a(o));if(l>=e&&o.push(i[f]),f===i.length-1)return a(o);l+=At(i[f],i[f+1],n)}return a(i[i.length-1])}function dr(t,e,r){var n=(r=r||{}).ignoreEndVertices;if(!S(r))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=z(t),o=Y(e),s=0;s<o.length-1;s++){var a=!1;if(n&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),function(t,e,r,n){var i=r[0],o=r[1],s=t[0],a=t[1],u=e[0],c=e[1],l=u-s,f=c-a;return(r[0]-s)*f-(r[1]-a)*l==0&&(n?"start"===n?Math.abs(l)>=Math.abs(f)?l>0?s<i&&i<=u:u<=i&&i<s:f>0?a<o&&o<=c:c<=o&&o<a:"end"===n?Math.abs(l)>=Math.abs(f)?l>0?s<=i&&i<u:u<i&&i<=s:f>0?a<=o&&o<c:c<o&&o<=a:"both"===n?Math.abs(l)>=Math.abs(f)?l>0?s<i&&i<u:u<i&&i<s:f>0?a<o&&o<c:c<o&&o<a:void 0:Math.abs(l)>=Math.abs(f)?l>0?s<=i&&i<=u:u<=i&&i<=s:f>0?a<=o&&o<=c:c<=o&&o<=a)}(o[s],o[s+1],i,a))return!0}return!1}function gr(t,e){var r=J(t),n=J(e),i=K(t),o=K(e);switch(r){case"Point":switch(n){case"MultiPoint":return function(t,e){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(mr(e.coordinates[r],t.coordinates)){n=!0;break}return n}(i,o);case"LineString":return dr(i,o,{ignoreEndVertices:!0});case"Polygon":return Mt(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+n+" geometry not supported")}case"MultiPoint":switch(n){case"MultiPoint":return function(t,e){for(var r=0;r<t.coordinates.length;r++){for(var n=!1,i=0;i<e.coordinates.length;i++)mr(t.coordinates[r],e.coordinates[i])&&(n=!0);if(!n)return!1}return!0}(i,o);case"LineString":return function(t,e){for(var r=!1,n=0;n<t.coordinates.length;n++){if(!dr(t.coordinates[n],e))return!1;r||(r=dr(t.coordinates[n],e,{ignoreEndVertices:!0}))}return r}(i,o);case"Polygon":return function(t,e){for(var r=!0,n=0;n<t.coordinates.length;n++){var i=Mt(t.coordinates[1],e);if(!i){r=!1;break}i=Mt(t.coordinates[1],e,{ignoreBoundary:!0})}return r&&i}(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}case"LineString":switch(n){case"LineString":return function(t,e){for(var r=0;r<t.coordinates.length;r++)if(!dr(t.coordinates[r],e))return!1;return!0}(i,o);case"Polygon":return function(t,e){if(!yr(U(e),U(t)))return!1;for(var r=!1,n=0;n<t.coordinates.length-1;n++){if(!Mt(t.coordinates[n],e))return!1;r||(r=Mt(t.coordinates[n],e,{ignoreBoundary:!0})),r||(r=Mt(function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[n],t.coordinates[n+1]),e,{ignoreBoundary:!0}))}return r}(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}case"Polygon":switch(n){case"Polygon":return function(t,e){var r=U(t);if(!yr(U(e),r))return!1;for(var n=0;n<t.coordinates[0].length;n++)if(!Mt(t.coordinates[0][n],e))return!1;return!0}(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function yr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function mr(t,e){return t[0]===e[0]&&t[1]===e[1]}function vr(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var i=r.mask,o=r.properties,s=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],l=t[2],f=t[3],h=e/At([a,u],[l,u],r)*(l-a),p=e/At([a,u],[a,f],r)*(f-u),d=l-a,g=f-u,y=Math.floor(d/h),m=(g-Math.floor(g/p)*p)/2,v=a+(d-y*h)/2;v<=l;){for(var _=u+m;_<=f;){var b=n([v,_],o);i?gr(b,i)&&s.push(b):s.push(b),_+=p}v+=h}return c(s)}function _r(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.precision,n=e.coordinates,i=e.mutate;if(r=null==r||isNaN(r)?6:r,n=null==n||isNaN(n)?3:n,!t)throw new Error("<geojson> is required");if("number"!=typeof r)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,r);return P(t,(function(t){!function(t,e,r){t.length>r&&t.splice(r,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,o,n)})),t}function br(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!br(t[r],e[r]))return!1}else if(t[r]!==e[r])return!1;return!0}function wr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function xr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var r=0,n=t.length;r<n;r++)if(t[r]instanceof Array&&e[r]instanceof Array){if(!xr(t[r],e[r]))return!1}else if(t[r]!=e[r])return!1;return!0}function Er(t,e){var r=[],n=ze();return D(e,(function(e){if(r.forEach((function(t,e){t.id=e})),r.length){var i=n.search(e);if(i.features.length){var o=Cr(e,i);r=r.filter((function(t){return t.id!==o.id})),n.remove(o),O(Sr(o,e),(function(t){r.push(t),n.insert(t)}))}}else(r=Sr(t,e).features).forEach((function(t){t.bbox||(t.bbox=oe(U(t)))})),n.load(c(r))})),c(r)}function Sr(t,e){var r=[],n=Y(t)[0],i=Y(t)[t.geometry.coordinates.length-1];if(Ir(n,z(e))||Ir(i,z(e)))return c([t]);var o=ze(),s=Xe(t);o.load(s);var u=o.search(e);if(!u.features.length)return c([t]);var l=Cr(e,u),f=L(s,(function(t,n,i){var o=Y(n)[1],s=z(e);return i===l.id?(t.push(s),r.push(a(t)),Ir(s,o)?[s]:[s,o]):(t.push(o),t)}),[n]);return f.length>1&&r.push(a(f)),c(r)}function Cr(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,n=1/0;return O(e,(function(e){var i=Ke(e,t).properties.dist;i<n&&(r=e,n=i)})),r}function Ir(t,e){return t[0]===e[0]&&t[1]===e[1]}function Pr(t,e,r,n,i){if(!S(i=i||{}))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==r)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Mr(r),c=Mr(n),l=t.properties;if(u===c)return a(ae(t,e,i).geometry.coordinates[0],l);for(var f=u,h=u<c?c:c+360,p=f,d=[],g=0;p<h;)d.push(se(t,e,p,s).geometry.coordinates),p=f+360*++g/o;return p>h&&d.push(se(t,e,h,s).geometry.coordinates),a(d,l)}function Mr(t){var e=t%360;return e<0&&(e+=360),e}function Nr(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.properties,n=J(t),i=Y(t);if(r=r||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(n){case"Polygon":return Tr(i,r);case"MultiPolygon":var o=[];return i.forEach((function(t){o.push(Tr(t,r))})),c(o);default:throw new Error("geom "+n+" not supported")}}function Tr(t,e){return t.length>1?l(t,e):a(t[0],e)}function Or(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.properties,n=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");switch(n=void 0===n||n,i=void 0===i||i,J(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach((function(t){o.push(Y(Lr(t,{},n,i)))})),h(o,r)}return Lr(t,r,n,i)}function Lr(t,e,r,n){e=e||t.properties||{};var i=Y(t),s=J(t);if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return r&&(i=Rr(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach((function(t){if(r&&(t=Rr(t)),n){var e=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.abs(e-n)*Math.abs(r-i)}(U(a(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)})),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function Rr(t){var e=t[0],r=e[0],n=e[1],i=t[t.length-1],o=i[0],s=i[1];return r===o&&n===s||t.push(e),t}function kr(t,e,r){var n,i,o,s,a,u=t.length,c=Dr(t[0],e),l=[];for(r||(r=[]),n=1;n<u;n++){for(i=t[n-1],s=a=Dr(o=t[n],e);;){if(!(c|s)){l.push(i),s!==a?(l.push(o),n<u-1&&(r.push(l),l=[])):n===u-1&&l.push(o);break}if(c&s)break;c?c=Dr(i=Ar(i,o,c,e),e):s=Dr(o=Ar(i,o,s,e),e)}c=a}return l.length&&r.push(l),r}function Ar(t,e,r,n){return 8&r?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&r?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&r?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&r?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function Dr(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function Fr(t,e){for(var r=[],n=0;n<t.length;n++){var i=ws.polygon(t[n],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&r.push(i))}return r}function jr(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Br(t,e,r){return r||(r={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(r.strict,t===e):function(t,e,r){var n,i;if(Gr(t)||Gr(e))return!1;if(t.prototype!==e.prototype)return!1;if(jr(t))return!!jr(e)&&Br(t=xs.call(t),e=xs.call(e),r);if(qr(t)){if(!qr(e))return!1;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(t){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),n=o.length-1;n>=0;n--)if(o[n]!==s[n])return!1;for(n=o.length-1;n>=0;n--)if(!Br(t[i=o[n]],e[i],r))return!1;return typeof t==typeof e}(t,e,r))}function Gr(t){return null==t}function qr(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Ur(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n,i=r.tolerance||0,o=[],s=ze();return s.load(Xe(t)),j(e,(function(t){var e=!1;O(s.search(t),(function(r){if(!1===e){var o=Y(t).sort(),s=Y(r).sort();Br(o,s)?(e=!0,n=n?zr(n,t):t):(0===i?dr(o[0],r)&&dr(o[1],r):Ke(r,o[0]).properties.dist<=i&&Ke(r,o[1]).properties.dist<=i)?(e=!0,n=n?zr(n,t):t):(0===i?dr(s[0],t)&&dr(s[1],t):Ke(t,s[0]).properties.dist<=i&&Ke(t,s[1]).properties.dist<=i)&&(n=n?zr(n,r):r)}})),!1===e&&n&&(o.push(n),n=void 0)})),n&&o.push(n),c(o)}function zr(t,e){var r=Y(e),n=Y(t),i=n[0],o=n[n.length-1],s=t.geometry.coordinates;return Br(r[0],i)?s.unshift(r[1]):Br(r[0],o)?s.push(r[1]):Br(r[1],i)?s.unshift(r[0]):Br(r[1],o)&&s.push(r[0]),t}function Yr(t){var e=t%360;return e<0&&(e+=360),e}function Vr(t,e,r,i){if(!S(i=i||{}))throw new Error("options is invalid");var o=i.units,s=i.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==r)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var a=w(e,o,"meters"),u=z(t),c=function(t,e,r,n){var i=e/(n=void 0===n?xo:Number(n)),o=t[0]*Math.PI/180,s=b(t[1]),a=b(r),u=i*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),f=Math.abs(l)>1e-11?u/l:Math.cos(s);return[(180*(o+i*Math.sin(a)/f)/Math.PI+540)%360-180,180*c/Math.PI]}(u,a,r);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,n(c,s)}function Xr(t,e,r,n,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),n=Wr(a,u,e),r<=0&&n>0?function(t,e,r){return Wr(t,e,r)<0}(e,a,i)||(i=a):r>0&&n<=0&&(function(t,e,r){return Wr(t,e,r)>0}(e,a,o)||(o=a)),r=n}return[i,o]}function Wr(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function Hr(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var r,n,i=Y(t),o=0,s=1;s<i.length;)r=n||i[0],o+=((n=i[s])[0]-r[0])*(n[1]+r[1]),s++;return o>0}function Kr(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return k(t,(function(t){Kr(t,e)})),t;case"LineString":return Zr(Y(t),e),t;case"Polygon":return Jr(Y(t),e),t;case"MultiLineString":return Y(t).forEach((function(t){Zr(t,e)})),t;case"MultiPolygon":return Y(t).forEach((function(t){Jr(t,e)})),t;case"Point":case"MultiPoint":return t}}function Zr(t,e){Hr(t)===e&&t.reverse()}function Jr(t,e){Hr(t[0])!==e&&t[0].reverse();for(var r=1;r<t.length;r++)Hr(t[r])===e&&t[r].reverse()}function Qr(t,e,r,n){n=n||{};for(var i=Object.keys(Es),o=0;o<i.length;o++){var s=i[o],a=n[s];a=null!=a?a:Es[s],Ss[s]=a}Ss.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+r)+"]");var u,c=function(t,e,r){for(var n=t.length-1,i=t[0].length-1,o={rows:n,cols:i,cells:[]},s=e+Math.abs(r),a=0;a<n;++a){o.cells[a]=[];for(var u=0;u<i;++u){var c=0,l=t[a+1][u],f=t[a+1][u+1],h=t[a][u+1],p=t[a][u];if(!(isNaN(l)||isNaN(f)||isNaN(h)||isNaN(p))){c|=l<e?0:l>s?128:64,c|=f<e?0:f>s?32:16,c|=h<e?0:h>s?8:4;var d=+(c|=p<e?0:p>s?2:1),g=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var y=(l+f+h+p)/4;g=y>s?2:y<e?0:1,34===c?1===g?c=35:0===g&&(c=136):136===c?1===g?(c=35,g=4):0===g&&(c=34):17===c?1===g?(c=155,g=4):0===g&&(c=153):68===c?1===g?(c=103,g=4):0===g&&(c=102):153===c?1===g&&(c=155):102===c?1===g&&(c=103):152===c?g<2&&(c=156,g=1):137===c?g<2&&(c=139,g=1):98===c?g<2&&(c=99,g=1):38===c?g<2&&(c=39,g=1):18===c?g>0?(c=156,g=4):c=152:33===c?g>0?(c=139,g=4):c=137:72===c?g>0?(c=99,g=4):c=98:132===c&&(g>0?(c=39,g=4):c=38)}if(0!=c&&170!=c){var m,v,_,b,w,x,E,S;m=v=_=b=w=x=E=S=.5;var C=[];1===c?(_=1-$r(e,h,p),S=1-$r(e,l,p),C.push(la[c])):169===c?(_=$r(s,p,h),S=$r(s,p,l),C.push(la[c])):4===c?(x=1-$r(e,f,h),b=$r(e,p,h),C.push(ua[c])):166===c?(x=$r(s,h,f),b=1-$r(s,h,p),C.push(ua[c])):16===c?(w=$r(e,h,f),v=$r(e,l,f),C.push(aa[c])):154===c?(w=1-$r(s,f,h),v=1-$r(s,f,l),C.push(aa[c])):64===c?(E=$r(e,p,l),m=1-$r(e,f,l),C.push(ha[c])):106===c?(E=1-$r(s,l,p),m=$r(s,l,f),C.push(ha[c])):168===c?(b=$r(s,p,h),_=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),C.push(ca[c]),C.push(la[c])):2===c?(b=1-$r(e,h,p),_=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),C.push(ca[c]),C.push(la[c])):162===c?(w=$r(s,h,f),x=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),C.push(ca[c]),C.push(la[c])):8===c?(w=1-$r(e,f,h),x=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),C.push(aa[c]),C.push(ua[c])):138===c?(w=1-$r(e,f,h),x=1-$r(s,f,h),m=1-$r(s,f,l),v=1-$r(e,f,l),C.push(aa[c]),C.push(ua[c])):32===c?(w=$r(s,h,f),x=$r(e,h,f),m=$r(e,l,f),v=$r(s,l,f),C.push(aa[c]),C.push(ua[c])):42===c?(S=1-$r(s,l,p),E=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f),C.push(fa[c]),C.push(ha[c])):128===c&&(S=$r(e,p,l),E=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l),C.push(fa[c]),C.push(ha[c])),5===c?(x=1-$r(e,f,h),S=1-$r(e,l,p),C.push(ua[c])):165===c?(x=$r(s,h,f),S=$r(s,p,l),C.push(ua[c])):20===c?(b=$r(e,p,h),v=$r(e,l,f),C.push(ca[c])):150===c?(b=1-$r(s,h,p),v=1-$r(s,f,l),C.push(ca[c])):80===c?(w=$r(e,h,f),E=$r(e,p,l),C.push(aa[c])):90===c?(w=1-$r(s,f,h),E=1-$r(s,l,p),C.push(aa[c])):65===c?(_=1-$r(e,h,p),m=1-$r(e,f,l),C.push(la[c])):105===c?(_=$r(s,p,h),m=$r(s,l,f),C.push(la[c])):160===c?(w=$r(s,h,f),x=$r(e,h,f),S=$r(e,p,l),E=$r(s,p,l),C.push(aa[c]),C.push(ua[c])):10===c?(w=1-$r(e,f,h),x=1-$r(s,f,h),S=1-$r(s,l,p),E=1-$r(e,l,p),C.push(aa[c]),C.push(ua[c])):130===c?(b=1-$r(e,h,p),_=1-$r(s,h,p),m=1-$r(s,f,l),v=1-$r(e,f,l),C.push(ca[c]),C.push(la[c])):40===c?(b=$r(s,p,h),_=$r(e,p,h),m=$r(e,l,f),v=$r(s,l,f),C.push(ca[c]),C.push(la[c])):101===c?(x=$r(s,h,f),m=$r(s,l,f),C.push(ua[c])):69===c?(x=1-$r(e,f,h),m=1-$r(e,f,l),C.push(ua[c])):149===c?(S=$r(s,p,l),v=1-$r(s,f,l),C.push(fa[c])):21===c?(S=1-$r(e,l,p),v=$r(e,l,f),C.push(fa[c])):86===c?(b=1-$r(s,h,p),E=1-$r(s,l,p),C.push(ca[c])):84===c?(b=$r(e,p,h),E=$r(e,p,l),C.push(ca[c])):89===c?(w=1-$r(s,f,h),_=$r(s,p,h),C.push(la[c])):81===c?(w=$r(e,h,f),_=1-$r(e,h,p),C.push(la[c])):96===c?(w=$r(s,h,f),x=$r(e,h,f),E=$r(e,p,l),m=$r(s,l,f),C.push(aa[c]),C.push(ua[c])):74===c?(w=1-$r(e,f,h),x=1-$r(s,f,h),E=1-$r(s,l,p),m=1-$r(e,f,l),C.push(aa[c]),C.push(ua[c])):24===c?(w=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),v=$r(e,l,f),C.push(aa[c]),C.push(la[c])):146===c?(w=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),v=1-$r(s,f,l),C.push(aa[c]),C.push(la[c])):6===c?(x=1-$r(e,f,h),b=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),C.push(ua[c]),C.push(ca[c])):164===c?(x=$r(s,h,f),b=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),C.push(ua[c]),C.push(ca[c])):129===c?(_=1-$r(e,h,p),S=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l),C.push(la[c]),C.push(fa[c])):41===c?(_=$r(s,p,h),S=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f),C.push(la[c]),C.push(fa[c])):66===c?(b=1-$r(e,h,p),_=1-$r(s,h,p),E=1-$r(s,l,p),m=1-$r(e,f,l),C.push(ca[c]),C.push(la[c])):104===c?(b=$r(s,p,h),_=$r(e,p,h),E=$r(e,p,l),m=$r(s,l,f),C.push(la[c]),C.push(pa[c])):144===c?(w=$r(e,h,f),S=$r(e,p,l),E=$r(s,p,l),v=1-$r(s,f,l),C.push(aa[c]),C.push(ha[c])):26===c?(w=1-$r(s,f,h),S=1-$r(s,l,p),E=1-$r(e,l,p),v=$r(e,l,f),C.push(aa[c]),C.push(ha[c])):36===c?(x=$r(s,h,f),b=$r(e,p,h),m=$r(e,l,f),v=$r(s,l,f),C.push(ua[c]),C.push(ca[c])):134===c?(x=1-$r(e,f,h),b=1-$r(s,h,p),m=1-$r(s,f,l),v=1-$r(e,f,l),C.push(ua[c]),C.push(ca[c])):9===c?(w=1-$r(e,f,h),x=1-$r(s,f,h),_=$r(s,p,h),S=1-$r(e,l,p),C.push(aa[c]),C.push(ua[c])):161===c?(w=$r(s,h,f),x=$r(e,h,f),_=1-$r(e,h,p),S=$r(s,p,l),C.push(aa[c]),C.push(ua[c])):37===c?(x=$r(s,h,f),S=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f),C.push(ua[c]),C.push(fa[c])):133===c?(x=1-$r(e,f,h),S=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l),C.push(ua[c]),C.push(fa[c])):148===c?(b=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),v=1-$r(s,f,l),C.push(ca[c]),C.push(ha[c])):22===c?(b=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),v=$r(e,l,f),C.push(ca[c]),C.push(ha[c])):82===c?(w=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),E=1-$r(s,l,p),C.push(aa[c]),C.push(la[c])):88===c?(w=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),E=$r(e,p,l),C.push(aa[c]),C.push(la[c])):73===c?(w=1-$r(e,f,h),x=1-$r(s,f,h),_=$r(s,p,h),m=1-$r(e,f,l),C.push(aa[c]),C.push(ua[c])):97===c?(w=$r(s,h,f),x=$r(e,h,f),_=1-$r(e,h,p),m=$r(s,l,f),C.push(aa[c]),C.push(ua[c])):145===c?(w=$r(e,h,f),_=1-$r(e,h,p),S=$r(s,p,l),v=1-$r(s,f,l),C.push(aa[c]),C.push(fa[c])):25===c?(w=1-$r(s,f,h),_=$r(s,p,h),S=1-$r(e,l,p),v=$r(e,l,f),C.push(aa[c]),C.push(fa[c])):70===c?(x=1-$r(e,f,h),b=1-$r(s,h,p),E=1-$r(s,l,p),m=1-$r(e,f,l),C.push(ua[c]),C.push(ca[c])):100===c?(x=$r(s,h,f),b=$r(e,p,h),E=$r(e,p,l),m=$r(s,l,f),C.push(ua[c]),C.push(ca[c])):34===c?(0===g?(w=1-$r(e,f,h),x=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)):(w=$r(s,h,f),x=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)),C.push(aa[c]),C.push(ua[c]),C.push(fa[c]),C.push(ha[c])):35===c?(4===g?(w=1-$r(e,f,h),x=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)):(w=$r(s,h,f),x=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)),C.push(aa[c]),C.push(ua[c]),C.push(la[c]),C.push(ha[c])):136===c?(0===g?(w=$r(s,h,f),x=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)):(w=1-$r(e,f,h),x=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)),C.push(aa[c]),C.push(ua[c]),C.push(fa[c]),C.push(ha[c])):153===c?(0===g?(w=$r(e,h,f),_=1-$r(e,h,p),S=1-$r(e,l,p),v=$r(e,l,f)):(w=1-$r(s,f,h),_=$r(s,p,h),S=$r(s,p,l),v=1-$r(s,f,l)),C.push(aa[c]),C.push(la[c])):102===c?(0===g?(x=1-$r(e,f,h),b=$r(e,p,h),E=$r(e,p,l),m=1-$r(e,f,l)):(x=$r(s,h,f),b=1-$r(s,h,p),E=1-$r(s,l,p),m=$r(s,l,f)),C.push(ua[c]),C.push(ha[c])):155===c?(4===g?(w=$r(e,h,f),_=1-$r(e,h,p),S=1-$r(e,l,p),v=$r(e,l,f)):(w=1-$r(s,f,h),_=$r(s,p,h),S=$r(s,p,l),v=1-$r(s,f,l)),C.push(aa[c]),C.push(fa[c])):103===c?(4===g?(x=1-$r(e,f,h),b=$r(e,p,h),E=$r(e,p,l),m=1-$r(e,f,l)):(x=$r(s,h,f),b=1-$r(s,h,p),E=1-$r(s,l,p),m=$r(s,l,f)),C.push(ua[c]),C.push(ca[c])):152===c?(0===g?(w=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),v=$r(e,l,f)):(w=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),v=1-$r(s,f,l)),C.push(aa[c]),C.push(ca[c]),C.push(la[c])):156===c?(4===g?(w=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),v=$r(e,l,f)):(w=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),v=1-$r(s,f,l)),C.push(aa[c]),C.push(la[c]),C.push(ha[c])):137===c?(0===g?(w=$r(s,h,f),x=$r(e,h,f),_=1-$r(e,h,p),S=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)):(w=1-$r(e,f,h),x=1-$r(s,f,h),_=$r(s,p,h),S=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)),C.push(aa[c]),C.push(ua[c]),C.push(la[c])):139===c?(4===g?(w=$r(s,h,f),x=$r(e,h,f),_=1-$r(e,h,p),S=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)):(w=1-$r(e,f,h),x=1-$r(s,f,h),_=$r(s,p,h),S=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)),C.push(aa[c]),C.push(ua[c]),C.push(fa[c])):98===c?(0===g?(w=1-$r(e,f,h),x=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),E=$r(e,p,l),m=1-$r(e,f,l)):(w=$r(s,h,f),x=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),E=1-$r(s,l,p),m=$r(s,l,f)),C.push(aa[c]),C.push(ua[c]),C.push(ha[c])):99===c?(4===g?(w=1-$r(e,f,h),x=1-$r(s,f,h),b=$r(s,p,h),_=$r(e,p,h),E=$r(e,p,l),m=1-$r(e,f,l)):(w=$r(s,h,f),x=$r(e,h,f),b=1-$r(e,h,p),_=1-$r(s,h,p),E=1-$r(s,l,p),m=$r(s,l,f)),C.push(aa[c]),C.push(ua[c]),C.push(la[c])):38===c?(0===g?(x=1-$r(e,f,h),b=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)):(x=$r(s,h,f),b=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)),C.push(ua[c]),C.push(fa[c]),C.push(ha[c])):39===c?(4===g?(x=1-$r(e,f,h),b=$r(e,p,h),S=$r(e,p,l),E=$r(s,p,l),m=1-$r(s,f,l),v=1-$r(e,f,l)):(x=$r(s,h,f),b=1-$r(s,h,p),S=1-$r(s,l,p),E=1-$r(e,l,p),m=$r(e,l,f),v=$r(s,l,f)),C.push(ua[c]),C.push(ca[c]),C.push(ha[c])):85===c&&(w=1,x=0,b=1,_=0,S=0,E=1,m=0,v=1),(m<0||m>1||v<0||v>1||w<0||w>1||b<0||b>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+d+" "+l+","+f+","+h+","+p+" "+g+" "+m+" "+v+" "+w+" "+x+" "+b+" "+_+" "+S+" "+E),o.cells[a][u]={cval:c,cval_real:d,flipped:g,topleft:m,topright:v,righttop:w,rightbottom:x,bottomright:b,bottomleft:_,leftbottom:S,lefttop:E,edges:C}}}}}return o}(t,e,r);return Ss.polygons?(Ss.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],r=0;return t.cells.forEach((function(t,n){t.forEach((function(t,i){if(void 0!==t){var o=ga[t.cval](t);"object"==typeof o&&tn(o)?"object"==typeof o[0]&&tn(o[0])?"object"==typeof o[0][0]&&tn(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=n})),e[r++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=n})),e[r++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):(Ss.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],r=t.rows,n=t.cols,i=[],o=0;o<r;o++)for(var s=0;s<n;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],r=t.cval_real;switch(e){case 0:return r&Is?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return r&Ps?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return r&Ps?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return r&Ms?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return r&Is?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return r&Ps?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return r&Ps?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return r&Ms?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return r&Ps?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return r&Ms?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return r&Ms?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return r&Cs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return r&Ps?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return r&Ms?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return r&Ms?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return r&Cs?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return r&Ps?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return r&Cs?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return r&Ms?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return r&Cs?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return r&Cs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return r&Is?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return r&Cs?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return r&Is?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(t.cells[o][s]),u=null,c=s,l=o;null!==a&&i.push([a.p[0]+c,a.p[1]+l]);do{if(null===(u=function(t,e,r,n){var i,o,s,a,u,c=t.cval;switch(e){case-1:switch(n){case 0:i=ua[c],s=js[c],a=Bs[c],u=Gs[c];break;default:i=aa[c],s=As[c],a=Ds[c],u=Fs[c]}break;case 1:switch(n){case 0:i=fa[c],s=Zs[c],a=Js[c],u=Qs[c];break;default:i=ha[c],s=Ws[c],a=Hs[c],u=Ks[c]}break;default:switch(r){case-1:switch(n){case 0:i=pa[c],s=Ns[c],a=Ts[c],u=Os[c];break;default:i=da[c],s=Ls[c],a=Rs[c],u=ks[c]}break;case 1:switch(n){case 0:i=la[c],s=qs[c],a=Us[c],u=zs[c];break;default:i=ca[c],s=Ys[c],a=Vs[c],u=Xs[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var r=e+1;r<t.edges.length;r++)t.edges[r-1]=t.edges[r];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:c&Is?(e=t.topleft,r=1):(e=1,r=t.righttop);break;case 1:c&Ps?(e=1,r=t.rightbottom):(e=t.topleft,r=1);break;case 2:c&Ps?(e=t.topleft,r=1):(e=t.bottomright,r=0);break;case 3:c&Ms?(e=t.bottomleft,r=0):(e=t.topleft,r=1);break;case 4:c&Is?(e=t.topright,r=1):(e=1,r=t.righttop);break;case 5:c&Ps?(e=1,r=t.rightbottom):(e=t.topright,r=1);break;case 6:c&Ps?(e=t.topright,r=1):(e=t.bottomright,r=0);break;case 7:c&Ms?(e=t.bottomleft,r=0):(e=t.topright,r=1);break;case 8:c&Ps?(e=1,r=t.righttop):(e=t.bottomright,r=0);break;case 9:c&Ms?(e=t.bottomleft,r=0):(e=1,r=t.righttop);break;case 10:c&Ms?(e=1,r=t.righttop):(e=0,r=t.leftbottom);break;case 11:c&Cs?(e=0,r=t.lefttop):(e=1,r=t.righttop);break;case 12:c&Ps?(e=1,r=t.rightbottom):(e=t.bottomright,r=0);break;case 13:c&Ms?(e=t.bottomleft,r=0):(e=1,r=t.rightbottom);break;case 14:c&Ms?(e=1,r=t.rightbottom):(e=0,r=t.leftbottom);break;case 15:c&Cs?(e=0,r=t.lefttop):(e=1,r=t.rightbottom);break;case 16:c&Ps?(e=0,r=t.leftbottom):(e=t.bottomright,r=0);break;case 17:c&Cs?(e=0,r=t.lefttop):(e=t.bottomright,r=0);break;case 18:c&Ms?(e=t.bottomleft,r=0):(e=0,r=t.leftbottom);break;case 19:c&Cs?(e=0,r=t.lefttop):(e=t.bottomleft,r=0);break;case 20:c&Cs?(e=0,r=t.leftbottom):(e=t.topleft,r=1);break;case 21:c&Is?(e=t.topright,r=1):(e=0,r=t.leftbottom);break;case 22:c&Cs?(e=0,r=t.lefttop):(e=t.topleft,r=1);break;case 23:c&Is?(e=t.topright,r=1):(e=0,r=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==r&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+r+" "+s+" "+a+" "+u)),{p:[e,r],x:s,y:a,o:u}}(t.cells[l][c],a.x,a.y,a.o)))break;if(i.push([u.p[0]+c,u.p[1]+l]),c+=u.x,a=u,(l+=u.y)<0||l>=r||c<0||c>=n||void 0===t.cells[l][c]){var f=function(t,e,r,n,i,o){for(var s=t.cells[r][e],a=s.cval_real,u=e+n,c=r+i,l=[],f=!1;!f;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=n,a=(s=t.cells[c][u]).cval_real,-1===i)if(0===o)if(a&Ms)l.push([u,c]),n=-1,i=0,o=0;else{if(!(a&Ps)){l.push([u+s.bottomright,c]),n=0,i=1,o=1,f=!0;break}l.push([u+1,c]),n=1,i=0,o=0}else{if(!(a&Ms)){if(a&Ps){l.push([u+s.bottomright,c]),n=0,i=1,o=1,f=!0;break}l.push([u+s.bottomleft,c]),n=0,i=1,o=0,f=!0;break}l.push([u,c]),n=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&Is)){if(a&Cs){l.push([u+s.topleft,c+1]),n=0,i=-1,o=0,f=!0;break}l.push([u+s.topright,c+1]),n=0,i=-1,o=1,f=!0;break}l.push([u+1,c+1]),n=1,i=0,o=1}else l.push([u+1,c+1]),n=1,i=0,o=1;else if(-1===n)if(0===o){if(!(a&Cs)){if(a&Ms){l.push([u,c+s.leftbottom]),n=1,i=0,o=0,f=!0;break}l.push([u,c+s.lefttop]),n=1,i=0,o=1,f=!0;break}l.push([u,c+1]),n=0,i=1,o=0}else{if(!(a&Cs)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),n=0,i=1,o=0}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&Ps)){l.push([u+1,c+s.rightbottom]),n=-1,i=0,o=0,f=!0;break}l.push([u+1,c]),n=0,i=-1,o=1}else{if(!(a&Ps)){if(a&Is){l.push([u+1,c+s.righttop]),n=-1,i=0,o=1;break}l.push([u+1,c+s.rightbottom]),n=-1,i=0,o=0,f=!0;break}l.push([u+1,c]),n=0,i=-1,o=1}}else if(a=(s=t.cells[c][u]).cval_real,-1===n)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])n=0,i=-1,o=1;else{if(!(a&Ms)){l.push([u+s.bottomright,c]),n=0,i=1,o=1,f=!0;break}l.push([u,c])}else{if(!(a&Cs)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===n){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])n=0,i=1,o=0;else{if(!(a&Is)){l.push([u+s.topleft,c+1]),n=0,i=-1,o=0,f=!0;break}l.push([u+1,c+1]),n=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])n=1,i=0,o=1;else{if(!(a&Ps)){l.push([u+1,c+s.righttop]),n=-1,i=0,o=1,f=!0;break}l.push([u+1,c]),n=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])n=-1,i=0,o=0;else{if(!(a&Cs)){l.push([u,c+s.leftbottom]),n=1,i=0,o=0,f=!0;break}l.push([u,c+1]),n=0,i=1,o=0}}if(c+=i,(u+=n)===e&&c===r)break}return{path:l,i:u,j:c,x:n,y:i,o:o}}(t,c-=u.x,l-=u.y,u.x,u.y,u.o);if(null===f)break;f.path.forEach((function(t){i.push(t)})),c=f.i,l=f.j,a=f}}while(void 0!==t.cells[l][c]&&t.cells[l][c].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(c)),"function"==typeof Ss.successCallback&&Ss.successCallback(u),u}function $r(t,e,r){return(t-e)/(r-e)}function tn(t){return t.constructor.toString().indexOf("Array")>-1}function en(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.pivot,i=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e?t:(n||(n=le(t)),!1!==i&&void 0!==i||(t=Dt(t)),P(t,(function(t){var r=Ze(n,t)+e,i=Qe(n,t),o=Y(Vr(n,i,r));t[0]=o[0],t[1]=o[1]})),t)}function rn(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.origin,i=r.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(n)||"object"==typeof n;return!0!==i&&(t=Dt(t)),"FeatureCollection"!==t.type||o?nn(t,e,n):(O(t,(function(r,i){t.features[i]=nn(r,e,n)})),t)}function nn(t,e,r){var i="Point"===J(t);return r=function(t,e){if(null!=e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return z(e);var r=t.bbox?t.bbox:U(t),i=r[0],o=r[1],s=r[2],a=r[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return n([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return n([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return n([i,a]);case"ne":case"northeast":case"eastnorth":case"topright":return n([s,a]);case"center":return ce(t);case void 0:case null:case"centroid":return le(t);default:throw new Error("invalid origin")}}(t,r),1===e||i?t:(P(t,(function(t){var n=Qe(r,t),i=Ze(r,t),o=Y(Vr(r,n*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t)}function on(t){var e=t[0],r=t[1];return[r[0]-e[0],r[1]-e[1]]}function sn(t,e){return t[0]*e[1]-e[0]*t[1]}function an(t,e,r){var n=[],i=m(e,r),o=Y(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var r=function(t,e,r){var n=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+r*(e[1]-t[1])/n,o=e[0]+r*(e[1]-t[1])/n;return[[i,t[1]+r*(t[0]-e[0])/n],[o,e[1]+r*(t[0]-e[0])/n]]}(t,o[e+1],i);if(n.push(r),e>0){var a=n[e-1],u=function(t,e){return!function(t,e){return 0===sn(on(t),on(e))}(t,e)&&function(t,e){var r=t[0],n=on(t),i=e[0],o=on(e),s=sn(n,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(sn(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(i,r),o)/s,n))}(t,e)}(r,a);!1!==u&&(a[1]=u,r[0]=u),s.push(a[0]),e===o.length-2&&(s.push(r[0]),s.push(r[1]))}2===o.length&&(s.push(r[0]),s.push(r[1]))}})),a(s,t.properties)}function un(t,e,r){var n=e[0]-t[0],i=e[1]-t[1],o=r[0]-e[0],s=r[1]-e[1];return Math.sign(n*s-o*i)}function cn(t,e){return e.geometry.coordinates[0].every((function(e){return Mt(n(e),t)}))}function ln(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(function(t,e,r){var n=r[0]-t[0],i=r[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return n*s-i*o==0&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:s>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1])}(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function fn(t,e){return We(e,Nr(t)).features.length>0}function hn(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function pn(t,e){return t[0]===e[0]&&t[1]===e[1]}function dn(t,e){for(var r=!1,n=!1,i=t.coordinates.length,o=0;o<i&&!r&&!n;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),mn(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?r=!0:n=!0}o++}return r&&n}function gn(t,e){return We(t,Nr(e)).features.length>0}function yn(t,e){for(var r=!1,i=!1,o=t.coordinates[0].length,s=0;s<o&&r&&i;)Mt(n(t.coordinates[0][s]),e)?r=!0:i=!0,s++;return i&&i}function mn(t,e,r,n){var i=r[0]-t[0],o=r[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(n?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:a>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<r[0]&&r[0]<e[0]:e[0]<r[0]&&r[0]<t[0]:a>0?t[1]<r[1]&&r[1]<e[1]:e[1]<r[1]&&r[1]<t[1])}function vn(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function _n(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function bn(t,e){return Ea(t,e,{strict:!0})}function wn(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var r=J(t);if(r!==J(e))throw new Error("features must be of the same type");if("Point"===r)throw new Error("Point geometry not supported");if(new Ca({precision:6}).compare(t,e))return!1;var n=0;switch(r){case"MultiPoint":var i=R(t),o=R(e);i.forEach((function(t){o.forEach((function(e){t[0]===e[0]&&t[1]===e[1]&&n++}))}));break;case"LineString":case"MultiLineString":j(t,(function(t){j(e,(function(e){Ur(t,e).features.length&&n++}))}));break;case"Polygon":case"MultiPolygon":j(t,(function(t){j(e,(function(e){We(t,e).features.length&&n++}))}))}return n>0}function xn(t,e,r){r=r||[];for(var n=0;n<t;n++)r[n]=e;return r}function En(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Sn(t){for(var e=t,r=[];e.parent;)r.unshift(e),e=e.parent;return r}function Cn(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var r=0;r<t.length;r++){this.grid[r]=[];for(var n=0,i=t[r];n<i.length;n++){var o=new In(r,n,i[n]);this.grid[r][n]=o,this.nodes.push(o)}}this.init()}function In(t,e,r){this.x=t,this.y=e,this.weight=r}function Pn(t){this.content=[],this.scoreFunction=t}function Mn(t){return t[0]}function Nn(t){return t[1]}function Tn(){this._=null}function On(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ln(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Rn(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function kn(t){for(;t.L;)t=t.L;return t}function An(t,e,r,n){var i=[null,null],o=Ua.push(i)-1;return i.left=t,i.right=e,r&&Fn(i,t,e,r),n&&Fn(i,e,t,n),Ga[t.index].halfedges.push(o),Ga[e.index].halfedges.push(o),i}function Dn(t,e,r){var n=[e,r];return n.left=t,n}function Fn(t,e,r,n){t[0]||t[1]?t.left===r?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=r)}function jn(t,e,r,n,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=0,f=1,h=a[0]-u,p=a[1]-c;if(o=e-u,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>l&&(l=o)}if(o=n-u,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<f&&(f=o)}if(o=r-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<f&&(f=o)}else if(p>0){if(o>f)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>f)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<f&&(f=o)}return!(l>0||f<1)||(l>0&&(t[0]=[u+l*h,c+l*p]),f<1&&(t[1]=[u+f*h,c+f*p]),!0)}}}}}function Bn(t,e,r,n,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,f=c[0],h=c[1],p=l[0],d=l[1],g=(f+p)/2,y=(h+d)/2;if(d===h){if(g<e||g>=n)return;if(f>p){if(u){if(u[1]>=i)return}else u=[g,r];o=[g,i]}else{if(u){if(u[1]<r)return}else u=[g,i];o=[g,r]}}else if(a=y-(s=(f-p)/(d-h))*g,s<-1||s>1)if(f>p){if(u){if(u[1]>=i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else{if(u){if(u[1]<r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else if(h<d){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Gn(t,e){var r=t.site,n=e.left,i=e.right;return r===i&&(i=n,n=r),i?Math.atan2(i[1]-n[1],i[0]-n[0]):(r===n?(n=e[1],i=e[0]):(n=e[0],i=e[1]),Math.atan2(n[0]-i[0],i[1]-n[1]))}function qn(t,e){return e[+(e.left!==t.site)]}function Un(t,e){return e[+(e.left===t.site)]}function zn(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var s=i[0],a=i[1],u=n[0]-s,c=n[1]-a,l=o[0]-s,f=o[1]-a,h=2*(u*f-c*l);if(!(h>=-Xa)){var p=u*u+c*c,d=l*l+f*f,g=(f*p-c*d)/h,y=(u*d-l*p)/h,m=za.pop()||new function(){On(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=i,m.x=g+s,m.y=(m.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=m;for(var v=null,_=qa._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}qa.insert(v,m),v||(ja=m)}}}}function Yn(t){var e=t.circle;e&&(e.P||(ja=e.N),qa.remove(e),za.push(e),On(e),t.circle=null)}function Vn(t){var e=Ya.pop()||new function(){On(this),this.edge=this.site=this.circle=null};return e.site=t,e}function Xn(t){Yn(t),Ba.remove(t),Ya.push(t),On(t)}function Wn(t){var e=t.circle,r=e.x,n=e.cy,i=[r,n],o=t.P,s=t.N,a=[t];Xn(t);for(var u=o;u.circle&&Math.abs(r-u.circle.x)<Va&&Math.abs(n-u.circle.cy)<Va;)o=u.P,a.unshift(u),Xn(u),u=o;a.unshift(u),Yn(u);for(var c=s;c.circle&&Math.abs(r-c.circle.x)<Va&&Math.abs(n-c.circle.cy)<Va;)s=c.N,a.push(c),Xn(c),c=s;a.push(c),Yn(c);var l,f=a.length;for(l=1;l<f;++l)c=a[l],u=a[l-1],Fn(c.edge,u.site,c.site,i);u=a[0],(c=a[f-1]).edge=An(u.site,c.site,null,i),zn(u),zn(c)}function Hn(t){for(var e,r,n,i,o=t[0],s=t[1],a=Ba._;a;)if((n=Kn(a,s)-o)>Va)a=a.L;else{if(!((i=o-function(t,e){var r=t.N;if(r)return Kn(r,e);var n=t.site;return n[1]===e?n[0]:1/0}(a,s))>Va)){n>-Va?(e=a.P,r=a):i>-Va?(e=a,r=a.N):e=r=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ga[t.index]={site:t,halfedges:[]}}(t);var u=Vn(t);if(Ba.insert(e,u),e||r){if(e===r)return Yn(e),r=Vn(e.site),Ba.insert(u,r),u.edge=r.edge=An(e.site,u.site),zn(e),void zn(r);if(r){Yn(e),Yn(r);var c=e.site,l=c[0],f=c[1],h=t[0]-l,p=t[1]-f,d=r.site,g=d[0]-l,y=d[1]-f,m=2*(h*y-p*g),v=h*h+p*p,_=g*g+y*y,b=[(y*v-p*_)/m+l,(h*_-g*v)/m+f];Fn(r.edge,c,d,b),u.edge=An(c,t,null,b),r.edge=An(t,d,null,b),zn(e),zn(r)}else u.edge=An(e.site,u.site)}}function Kn(t,e){var r=t.site,n=r[0],i=r[1],o=i-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(r=s.site)[0],u=r[1],c=u-e;if(!c)return a;var l=a-n,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+n:(n+a)/2}function Zn(t,e,r){return(t[0]-r[0])*(e[1]-t[1])-(t[0]-e[0])*(r[1]-t[1])}function Jn(t,e){return e[1]-t[1]||e[0]-t[0]}function Qn(t,e){var r,n,i,o=t.sort(Jn).pop();for(Ua=[],Ga=new Array(t.length),Ba=new Tn,qa=new Tn;;)if(i=ja,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===r&&o[1]===n||(Hn(o),r=o[0],n=o[1]),o=t.pop();else{if(!i)break;Wn(i.arc)}if(function(){for(var t,e,r,n,i=0,o=Ga.length;i<o;++i)if((t=Ga[i])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(r=0;r<n;++r)s[r]=r,a[r]=Gn(t,Ua[e[r]]);for(s.sort((function(t,e){return a[e]-a[t]})),r=0;r<n;++r)a[r]=e[s[r]];for(r=0;r<n;++r)e[r]=a[r]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,r,n){for(var i,o=Ua.length;o--;)Bn(i=Ua[o],t,e,r,n)&&jn(i,t,e,r,n)&&(Math.abs(i[0][0]-i[1][0])>Va||Math.abs(i[0][1]-i[1][1])>Va)||delete Ua[o]}(s,a,u,c),function(t,e,r,n){var i,o,s,a,u,c,l,f,h,p,d,g,y=Ga.length,m=!0;for(i=0;i<y;++i)if(o=Ga[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ua[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)d=(p=Un(o,Ua[u[a]]))[0],g=p[1],f=(l=qn(o,Ua[u[++a%c]]))[0],h=l[1],(Math.abs(d-f)>Va||Math.abs(g-h)>Va)&&(u.splice(a,0,Ua.push(Dn(s,p,Math.abs(d-t)<Va&&n-g>Va?[t,Math.abs(f-t)<Va?h:n]:Math.abs(g-n)<Va&&r-d>Va?[Math.abs(h-n)<Va?f:r,n]:Math.abs(d-r)<Va&&g-e>Va?[r,Math.abs(f-r)<Va?h:e]:Math.abs(g-e)<Va&&d-t>Va?[Math.abs(h-e)<Va?f:t,e]:null))-1),++c);c&&(m=!1)}if(m){var v,_,b,w=1/0;for(i=0,m=null;i<y;++i)(o=Ga[i])&&(b=(v=(s=o.site)[0]-t)*v+(_=s[1]-e)*_)<w&&(w=b,m=o);if(m){var x=[t,e],E=[t,n],S=[r,n],C=[r,e];m.halfedges.push(Ua.push(Dn(s=m.site,x,E))-1,Ua.push(Dn(s,E,S))-1,Ua.push(Dn(s,S,C))-1,Ua.push(Dn(s,C,x))-1)}}for(i=0;i<y;++i)(o=Ga[i])&&(o.halfedges.length||delete Ga[i])}(s,a,u,c)}this.edges=Ua,this.cells=Ga,Ba=qa=Ua=Ga=null}function $n(t){return(t=t.slice()).push(t[0]),o([t])}function ti(t,e,r,n){var i=(n=n||{}).steps||64,s=n.units||"kilometers",a=n.angle||0,u=n.pivot||t,c=n.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!r)throw new Error("ySemiAxis is required");if(!S(n))throw new Error("options must be an object");if(!E(i))throw new Error("steps must be a number");if(!E(a))throw new Error("angle must be a number");var l=z(t);if("degrees"===s)var f=b(a);else e=Vr(t,e,90,{units:s}),r=Vr(t,r,0,{units:s}),e=z(e)[0]-l[0],r=z(r)[1]-l[1];for(var h=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*r/Math.sqrt(Math.pow(r,2)+Math.pow(e,2)*Math.pow(ei(d),2)),y=e*r/Math.sqrt(Math.pow(e,2)+Math.pow(r,2)/Math.pow(ei(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===s){var m=g*Math.cos(f)+y*Math.sin(f),v=y*Math.cos(f)-g*Math.sin(f);g=m,y=v}h.push([g+l[0],y+l[1]])}return h.push(h[0]),"degrees"===s?o([h],c):en(o([h],c),a,{pivot:u})}function ei(t){var e=t*Math.PI/180;return Math.tan(e)}function ri(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return k(t,(function(t,e,r){var n=r[i];if(!E(n=null==n?1:n))throw new Error("weight value must be a number for feature index "+e);(n=Number(n))>0&&P(t,(function(t){o+=t[0]*n,s+=t[1]*n,a+=n}))})),n([o/a,s/a],r)}function ni(t,e,r,i){var o=r.properties.tolerance||.001,s=0,a=0,u=0,c=0;if(O(r,(function(e){var r=e.properties.weight,n=null==r?1:r;if(!E(n=Number(n)))throw new Error("weight value must be a number");if(n>0){c+=1;var i=n*At(e,t);0===i&&(i=1);var o=n/i;s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o}})),c<1)throw new Error("no features to measure");var l=s/u,f=a/u;return 1===c||0===i||Math.abs(l-e[0])<o&&Math.abs(f-e[1])<o?n([l,f],{medianCandidates:r.properties.medianCandidates}):(r.properties.medianCandidates.push([l,f]),ni([l,f],t,r,i-1))}function ii(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function oi(t){if(S(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*ci(),180*ci()]}function si(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.bbox;null!=t||(t=1);for(var i=[],o=0;o<t;o++)i.push(n(oi(r)));return c(i)}function ai(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.num_vertices,i=e.max_radial_length;null!=t||(t=1),E(n)||(n=10),E(i)||(i=10);for(var s=[],a=0;a<t;a++){var u=[],l=Array.apply(null,new Array(n+1)).map(Math.random);l.forEach((function(t,e,r){r[e]=e>0?t+r[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1];var e=Math.random();u.push([e*i*Math.sin(t),e*i*Math.cos(t)])})),u[u.length-1]=u[0],u=u.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(oi(r))),s.push(o([u]))}return c(s)}function ui(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.bbox,n=e.num_vertices,i=e.max_length,o=e.max_rotation;null!=t||(t=1),(!E(n)||n<2)&&(n=10),E(i)||(i=1e-4),E(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var l=[oi(r)],f=0;f<n-1;f++){var h=(0===f?2*Math.random()*Math.PI:Math.tan((l[f][1]-l[f-1][1])/(l[f][0]-l[f-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;l.push([l[f][0]+p*Math.cos(h),l[f][1]+p*Math.sin(h)])}s.push(a(l))}return c(s)}function ci(){return Math.random()-.5}function li(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var r=[];return O(t,(function(t){di(t.properties,e)&&r.push(t)})),c(r)}function fi(t,e,r){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var n=pi(t,e),i=Object.keys(n),o=0;o<i.length;o++){for(var s=i[o],a=n[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);r(c(u),s,o)}}function hi(t,e,r,n){var i=n;return fi(t,e,(function(t,e,o){i=0===o&&void 0===n?t:r(i,t,e,o)})),i}function pi(t,e){var r={};return O(t,(function(t,n){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];r.hasOwnProperty(o)?r[o].push(n):r[o]=[n]}})),r}function di(t,e){if(void 0===t)return!1;var r=typeof e;if("number"===r||"string"===r)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!di(t,e[n]))return!1;return!0}return gi(t,e)}function gi(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n];if(t[i]!==e[i])return!1}return!0}function yi(t,e){if(!e)return{};if(!e.length)return{};for(var r={},n=0;n<e.length;n++){var i=e[n];t.hasOwnProperty(i)&&(r[i]=t[i])}return r}function mi(){}function vi(t){this.message=t||""}function _i(t){this.message=t||""}function bi(){}function wi(t){return null===t?pc:t.color}function xi(t){return null===t?null:t.parent}function Ei(t,e){null!==t&&(t.color=e)}function Si(t){return null===t?null:t.left}function Ci(t){return null===t?null:t.right}function Ii(){this.root_=null,this.size_=0}function Pi(){}function Mi(){this.array_=[],arguments[0]instanceof Qu&&this.addAll(arguments[0])}function Ni(){}function Ti(t){this.message=t||""}function Oi(){this.array_=[]}function Li(t){switch(t.type){case"Polygon":return ur(t)>1?t:null;case"MultiPolygon":var e=[];if(D(t,(function(t){ur(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}function Ri(){this.reset()}function ki(t,e,r){var n=t.s=e+r,i=n-e,o=n-i;t.t=e-o+(r-i)}function Ai(t){return t>1?_p:t<-1?-_p:Math.asin(t)}function Di(){}function Fi(t,e){t&&kp.hasOwnProperty(t.type)&&kp[t.type](t,e)}function ji(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function Bi(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)ji(t[r],e,1);e.polygonEnd()}function Gi(t){return[Ip(t[1],t[0]),Ai(t[2])]}function qi(t){var e=t[0],r=t[1],n=Pp(r);return[n*Pp(e),n*Tp(e),Tp(r)]}function Ui(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zi(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Yi(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Vi(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Xi(t){var e=Op(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Wi(t,e){return[t>vp?t-wp:t<-vp?t+wp:t,e]}function Hi(t,e,r){return(t%=wp)?e||r?Dp(Zi(t),Ji(e,r)):Zi(t):e||r?Ji(e,r):Wi}function Ki(t){return function(e,r){return[(e+=t)>vp?e-wp:e<-vp?e+wp:e,r]}}function Zi(t){var e=Ki(t);return e.invert=Ki(-t),e}function Ji(t,e){function r(t,e){var r=Pp(e),a=Pp(t)*r,u=Tp(t)*r,c=Tp(e),l=c*n+a*i;return[Ip(u*o-l*s,a*n-c*i),Ai(l*o+u*s)]}var n=Pp(t),i=Tp(t),o=Pp(e),s=Tp(e);return r.invert=function(t,e){var r=Pp(e),a=Pp(t)*r,u=Tp(t)*r,c=Tp(e),l=c*o-u*s;return[Ip(u*o+c*s,a*n+l*i),Ai(l*n-a*i)]},r}function Qi(t,e){(e=qi(e))[0]-=t,Xi(e);var r=function(t){return t>1?0:t<-1?vp:Math.acos(t)}(-e[1]);return((-e[2]<0?-r:r)+wp-mp)%wp}function $i(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function to(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function eo(t,e,r,n){function i(i,o){return t<=i&&i<=r&&e<=o&&o<=n}function o(i,o,a,c){var l=0,f=0;if(null==i||(l=s(i,a))!==(f=s(o,a))||u(i,o)<0^a>0)do{c.point(0===l||3===l?t:r,l>1?n:e)}while((l=(l+a+4)%4)!==f);else c.point(o[0],o[1])}function s(n,i){return Sp(n[0]-t)<mp?i>0?0:3:Sp(n[0]-r)<mp?i>0?2:1:Sp(n[1]-e)<mp?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var r=s(t,1),n=s(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){i(t,e)&&w.point(t,e)}function c(o,s){var a=i(o,s);if(f&&h.push([o,s]),_)p=o,d=s,g=a,_=!1,a&&(w.lineStart(),w.point(o,s));else if(a&&v)w.point(o,s);else{var u=[y=Math.max(Vp,Math.min(Yp,y)),m=Math.max(Vp,Math.min(Yp,m))],c=[o=Math.max(Vp,Math.min(Yp,o)),s=Math.max(Vp,Math.min(Yp,s))];Bp(u,c,t,e,r,n)?(v||(w.lineStart(),w.point(u[0],u[1])),w.point(c[0],c[1]),a||w.lineEnd(),b=!1):a&&(w.lineStart(),w.point(o,s),b=!1)}y=o,m=s,v=a}var l,f,h,p,d,g,y,m,v,_,b,w=s,x=jp(),E={point:u,lineStart:function(){E.point=c,f&&f.push(h=[]),_=!0,v=!1,y=m=NaN},lineEnd:function(){l&&(c(p,d),g&&v&&x.rejoin(),l.push(x.result())),E.point=u,v&&w.lineEnd()},polygonStart:function(){w=x,l=[],f=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,r=0,i=f.length;r<i;++r)for(var o,s,a=f[r],u=1,c=a.length,l=a[0],h=l[0],p=l[1];u<c;++u)o=h,s=p,h=(l=a[u])[0],p=l[1],s<=n?p>n&&(h-o)*(n-s)>(p-s)*(t-o)&&++e:p<=n&&(h-o)*(n-s)<(p-s)*(t-o)&&--e;return e}(),r=b&&e,i=(l=zp(l)).length;(r||i)&&(s.polygonStart(),r&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&qp(l,a,e,o,s),s.polygonEnd()),w=s,l=f=h=null}};return E}}function ro(t){return t.length>1}function no(t,e){return((t=t.x)[0]<0?t[1]-_p-mp:_p-t[1])-((e=e.x)[0]<0?e[1]-_p-mp:_p-e[1])}function io(t){return function(e){var r=new oo;for(var n in t)r[n]=t[n];return r.stream=e,r}}function oo(){}function so(t,e,r){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Ap(r,t.stream(Qp));var s=Qp.result(),a=Math.min(n/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(n-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,c])}function ao(t,e){return[t,Np(Lp((_p+e)/2))]}function uo(t,e){return[Np(Lp((_p+e)/2)),-t]}function co(t,r,n,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return k(t,(function(t){var e=co(t,r,n,i);e&&a.push(e)})),c(a)}var u,l=U(t),f=l[1]>50&&l[3]>50;u=f?{type:s.type,coordinates:lo(s.coordinates,ho(s))}:$e(s);var h,p=(new rl).read(u),d=g(y(r,n),"meters"),m=Hf.bufferOp(p,d);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((m=(new nl).write(m)).coordinates))return(h=f?{type:m.type,coordinates:fo(m.coordinates,ho(s))}:tr(m)).geometry?h:e(h,o)}function lo(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return lo(t,e)}))}function fo(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return fo(t,e)}))}function ho(t){var e=ce(t).geometry.coordinates.reverse(),r=e.map((function(t){return-t}));return sd().center(e).rotate(r).scale(xo)}function po(){for(var t=new rl,e=t.read(JSON.stringify(arguments[0].geometry)),r=1;r<arguments.length;r++)e=dp.union(e,t.read(JSON.stringify(arguments[r].geometry)));return{type:"Feature",geometry:e=(new nl).write(e),properties:arguments[0].properties}}function go(t,r){var n=K(t),i=K(r);if(Kt(_r(i,{precision:4})).coordinates[0].length<4)return null;if(Kt(_r(n,{precision:4})).coordinates[0].length<4)return null;var o=new rl,s=o.read(_r(n)),a=o.read(_r(i)),u=op.intersection(s,a);return u.isEmpty()?null:e((new nl).write(u))}function yo(t,e){return function(t,e,r){var n,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach((function(e,r){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===i||o<i)&&(i=o,n=r)})),n}(t,e)}function mo(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.properties||{},i=r.triangles,s=r.mask;if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(s&&-1===["Polygon","MultiPolygon"].indexOf(J(s)))throw new Error("options.mask must be a (Multi)Polygon");var a=t[0],u=t[1],l=t[2],f=t[3],h=(u+f)/2,p=(a+l)/2,d=2*e/At([a,h],[l,h],r)*(l-a),g=2*e/At([p,u],[p,f],r)*(f-u),y=d/2,m=2*y,v=Math.sqrt(3)/2*g,_=l-a,b=f-u,w=.75*m,x=v,C=(_-m)/(m-y/2),I=Math.floor(C),P=(I*w-y/2-_)/2-y/2+w/2,M=Math.floor((b-v)/v),N=(b-M*v)/2,T=M*v-b>v/2;T&&(N-=v/4);for(var O=[],L=[],R=0;R<6;R++){var k=2*Math.PI/6*R;O.push(Math.cos(k)),L.push(Math.sin(k))}for(var A=[],D=0;D<=I;D++)for(var F=0;F<=M;F++){var j=D%2==1;if(!(0===F&&j||0===F&&T)){var B=D*w+a-P,G=F*x+u+N;if(j&&(G-=v/2),!0===i)(function(t,e,r,n,i,s){for(var a=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+r*s[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+r*s[(u+1)%6]]),c.push(t),a.push(o([c],n))}return a})([B,G],d/2,g/2,n,O,L).forEach((function(t){s?go(s,t)&&A.push(t):A.push(t)}));else{var q=function(t,e,r,n,i,s){for(var a=[],u=0;u<6;u++){var c=t[0]+e*i[u],l=t[1]+r*s[u];a.push([c,l])}return a.push(a[0].slice()),o([a],n)}([B,G],d/2,g/2,n,O,L);s?go(s,q)&&A.push(q):A.push(q)}}}return c(A)}function vo(t){if(t.features.length<=1)return t;var e=function(t){var e=Lo(),r=[];return D(t,(function(t,e){var n=U(t);r.push({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],geojson:t,index:e})})),e.load(r),e}(t),r=[],n={};return D(t,(function(t,i){if(n[i])return!0;for(e.remove({index:i},_o),n[i]=!0;;){var o=U(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0){var a=s.map((function(t){return n[t.index]=!0,e.remove({index:t.index},_o),t.geojson}));a.push(t),t=po.apply(this,a)}if(0===s.length)break}r.push(t)})),c(r)}function _o(t,e){return t.index===e.index}function bo(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],l=t[2],f=t[3],h=e/At([a,u],[l,u],r)*(l-a),p=e/At([a,u],[a,f],r)*(f-u),d=l-a,g=f-u,y=Math.floor(d/h),m=Math.floor(g/p),v=(g-m*p)/2,_=a+(d-y*h)/2,b=0;b<y;b++){for(var w=u+v,x=0;x<m;x++){var C=o([[[_,w],[_,w+p],[_+h,w+p],[_+h,w],[_,w]]],n);i?go(i,C)&&s.push(C):s.push(C),w+=p}_+=h}return c(s)}function wo(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.mask,s=[];if(null==e)throw new Error("cellSide is required");if(!E(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&-1===["Polygon","MultiPolygon"].indexOf(J(i)))throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/At([t[0],t[1]],[t[2],t[1]],r)*(t[2]-t[0]),u=e/At([t[0],t[1]],[t[0],t[3]],r)*(t[3]-t[1]),l=0,f=t[0];f<=t[2];){for(var h=0,p=t[1];p<=t[3];){var d=null,g=null;l%2==0&&h%2==0?(d=o([[[f,p],[f,p+u],[f+a,p],[f,p]]],n),g=o([[[f,p+u],[f+a,p+u],[f+a,p],[f,p+u]]],n)):l%2==0&&h%2==1?(d=o([[[f,p],[f+a,p+u],[f+a,p],[f,p]]],n),g=o([[[f,p],[f,p+u],[f+a,p+u],[f,p]]],n)):h%2==0&&l%2==1?(d=o([[[f,p],[f,p+u],[f+a,p+u],[f,p]]],n),g=o([[[f,p],[f+a,p+u],[f+a,p],[f,p]]],n)):h%2==1&&l%2==1&&(d=o([[[f,p],[f,p+u],[f+a,p],[f,p]]],n),g=o([[[f,p+u],[f+a,p+u],[f+a,p],[f,p+u]]],n)),i?(go(i,d)&&s.push(d),go(i,g)&&s.push(g)):(s.push(d),s.push(g)),p+=u,h++}l++,f+=a}return c(s)}var xo=6371008.8,Eo={meters:xo,metres:xo,millimeters:1e3*xo,millimetres:1e3*xo,centimeters:100*xo,centimetres:100*xo,kilometers:xo/1e3,kilometres:xo/1e3,miles:xo/1609.344,nauticalmiles:xo/1852,inches:39.37*xo,yards:xo/1.0936,feet:3.28084*xo,radians:1,degrees:xo/111325},So={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/xo,degrees:1/111325},Co={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Io=Object.freeze({earthRadius:xo,factors:Eo,unitsFactors:So,areaFactors:Co,feature:e,geometry:r,point:n,points:i,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:c,multiLineString:l,multiPoint:f,multiPolygon:h,geometryCollection:p,round:d,radiansToLength:g,lengthToRadians:y,lengthToDegrees:m,bearingToAzimuth:v,radiansToDegrees:_,degreesToRadians:b,convertLength:w,convertArea:x,isNumber:E,isObject:S,validateBBox:C,validateId:I,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Po=Object.freeze({coordEach:P,coordReduce:M,propEach:N,propReduce:T,featureEach:O,featureReduce:L,coordAll:R,geomEach:k,geomReduce:A,flattenEach:D,flattenReduce:F,segmentEach:j,segmentReduce:B,lineEach:G,lineReduce:q}),Mo=Object.freeze({getCoord:z,getCoords:Y,containsNumber:V,geojsonType:X,featureOf:W,collectionOf:H,getGeom:K,getGeomType:Z,getType:J}),No={successCallback:null,verbose:!1},To={},Oo=function t(e,r,n,i,o){for(n=n||0,i=i||e.length-1,o=o||function(t,e){return t<e?-1:t>e?1:0};i>n;){if(i-n>600){var s=i-n+1,a=r-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1);t(e,r,Math.max(n,Math.floor(r-a*c/s+l)),Math.min(i,Math.floor(r+(s-a)*c/s+l)),o)}var f=e[r],h=n,p=i;for(nt(e,n,r),o(e[i],f)>0&&nt(e,n,i);h<p;){for(nt(e,h,p),h++,p--;o(e[h],f)<0;)h++;for(;o(e[p],f)>0;)p--}0===o(e[n],f)?nt(e,n,p):nt(e,++p,i),p<=r&&(n=p+1),r<=p&&(i=p-1)}},Lo=it;it.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!pt(t,e))return r;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],pt(t,a=e.leaf?n(s):s)&&(e.leaf?r.push(s):ht(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!pt(t,e))return!1;for(var n,i,o,s,a=[];e;){for(n=0,i=e.children.length;n<i;n++)if(o=e.children[n],pt(t,s=e.leaf?r(o):o)){if(e.leaf||ht(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=dt([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!ht(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:ut,compareMinY:ct,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var i,o=r-e+1,s=this._maxEntries;if(o<=s)return ot(i=dt(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(i=dt([])).leaf=!1,i.height=n;var a,u,c,l,f=Math.ceil(o/s),h=f*Math.ceil(Math.sqrt(s));for(gt(t,e,r,h,this.compareMinX),a=e;a<=r;a+=h)for(gt(t,a,c=Math.min(a+h-1,r),f,this.compareMinY),u=a;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,n-1));return ot(i,this.toBBox),i},_chooseSubtree:function(t,e,r,n){for(var i,o,s,a,u,c,l,f;n.push(e),!e.leaf&&n.length-1!==r;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=lt(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<f?(f=c,l=u<l?u:l,a=s):c===f&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,i=r?t:n(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),at(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=dt(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,ot(r,this.toBBox),ot(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ot(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,i,o,s,a,u,c,l;for(u=c=1/0,n=e;n<=r-e;n++)s=function(t,e){var r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}(i=st(t,0,n,this.toBBox),o=st(t,n,r,this.toBBox)),a=lt(i)+lt(o),s<u?(u=s,l=n,c=a<c?a:c):s===u&&a<c&&(c=a,l=n);return l},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:ut,i=t.leaf?this.compareMinY:ct;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var i,o,s=this.toBBox,a=st(t,0,e,s),u=st(t,r-e,r,s),c=ft(a)+ft(u);for(i=e;i<r-e;i++)o=t.children[i],at(a,t.leaf?s(o):o),c+=ft(a);for(i=r-e-1;i>=e;i--)o=t.children[i],at(u,t.leaf?s(o):o),c+=ft(u);return c},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)at(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():ot(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ro=function(t,e,r){var n=t*e,i=ko*t,o=i-(i-t),s=t-o,a=ko*e,u=a-(a-e),c=e-u,l=s*c-(n-o*u-s*u-o*c);return r?(r[0]=l,r[1]=n,r):[l,n]},ko=+(Math.pow(2,27)+1),Ao=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);return i?[i,r]:[r]}(t[0],e[0]);var i,o,s=new Array(r+n),a=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),p=e[c],d=l(p);h<d?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=p,(c+=1)<n&&(d=l(p=e[c]))),u<r&&h<d||c>=n?(i=f,(u+=1)<r&&(h=l(f=t[u]))):(i=p,(c+=1)<n&&(d=l(p=e[c])));for(var g,y,m=i+o,v=m-i,_=o-v,b=_,w=m;u<r&&c<n;)h<d?(i=f,(u+=1)<r&&(h=l(f=t[u]))):(i=p,(c+=1)<n&&(d=l(p=e[c]))),(_=(o=b)-(v=(m=i+o)-i))&&(s[a++]=_),b=w-((g=w+m)-(y=g-w))+(m-y),w=g;for(;u<r;)(_=(o=b)-(v=(m=(i=f)+o)-i))&&(s[a++]=_),b=w-((g=w+m)-(y=g-w))+(m-y),w=g,(u+=1)<r&&(f=t[u]);for(;c<n;)(_=(o=b)-(v=(m=(i=p)+o)-i))&&(s[a++]=_),b=w-((g=w+m)-(y=g-w))+(m-y),w=g,(c+=1)<n&&(p=e[c]);return b&&(s[a++]=b),w&&(s[a++]=w),a||(s[a++]=0),s.length=a,s},Do=function(t,e,r){var n=t+e,i=n-t,o=e-i,s=t-(n-i);return r?(r[0]=s+o,r[1]=n,r):[s+o,n]},Fo=function(t,e){var r=t.length;if(1===r){var n=Ro(t[0],e);return n[0]?n:[n[1]]}var i=new Array(2*r),o=[.1,.1],s=[.1,.1],a=0;Ro(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<r;++u){Ro(t[u],e,s);var c=o[1];Do(c,s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],f=o[1],h=l+f,p=f-(h-l);o[1]=h,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},jo=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);return i?[i,r]:[r]}(t[0],-e[0]);var i,o,s=new Array(r+n),a=0,u=0,c=0,l=Math.abs,f=t[u],h=l(f),p=-e[c],d=l(p);h<d?(o=f,(u+=1)<r&&(h=l(f=t[u]))):(o=p,(c+=1)<n&&(d=l(p=-e[c]))),u<r&&h<d||c>=n?(i=f,(u+=1)<r&&(h=l(f=t[u]))):(i=p,(c+=1)<n&&(d=l(p=-e[c])));for(var g,y,m=i+o,v=m-i,_=o-v,b=_,w=m;u<r&&c<n;)h<d?(i=f,(u+=1)<r&&(h=l(f=t[u]))):(i=p,(c+=1)<n&&(d=l(p=-e[c]))),(_=(o=b)-(v=(m=i+o)-i))&&(s[a++]=_),b=w-((g=w+m)-(y=g-w))+(m-y),w=g;for(;u<r;)(_=(o=b)-(v=(m=(i=f)+o)-i))&&(s[a++]=_),b=w-((g=w+m)-(y=g-w))+(m-y),w=g,(u+=1)<r&&(f=t[u]);for(;c<n;)(_=(o=b)-(v=(m=(i=p)+o)-i))&&(s[a++]=_),b=w-((g=w+m)-(y=g-w))+(m-y),w=g,(c+=1)<n&&(p=-e[c]);return b&&(s[a++]=b),w&&(s[a++]=w),a||(s[a++]=0),s.length=a,s},Bo=yt((function(t){function e(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[n][o]);return r}function r(t){return 1&t?"-":""}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function i(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],s=0;s<t.length;++s)o.push(["scale(",n(i(e(t,s))),",",r(s),t[0][s],")"].join(""));return o}function o(t){for(var r=[],o=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?r.push.apply(r,i(e(s,u))):o.push.apply(o,i(e(s,u))),a.push("m"+u);var c=n(r),l=n(o),f="orientation"+t+"Exact",h=["function ",f,"(",a.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",f].join("");return new Function("sum","prod","scale","sub",h)(Ao,Ro,Fo,jo)}var s=o(3),a=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),a=i-o;if(i>0){if(o<=0)return a;n=i+o}else{if(!(i<0))return a;if(o>=0)return a;n=-(i+o)}var u=33306690738754716e-32*n;return a>=u||a<=-u?a:s(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],s=r[0]-n[0],u=t[1]-n[1],c=e[1]-n[1],l=r[1]-n[1],f=t[2]-n[2],h=e[2]-n[2],p=r[2]-n[2],d=o*l,g=s*c,y=s*u,m=i*l,v=i*c,_=o*u,b=f*(d-g)+h*(y-m)+p*(v-_),w=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(f)+(Math.abs(y)+Math.abs(m))*Math.abs(h)+(Math.abs(v)+Math.abs(_))*Math.abs(p));return b>w||-b>w?b:a(t,e,r,n)}];!function(){for(;u.length<=5;)u.push(o(u.length));for(var e=[],r=["slow"],n=0;n<=5;++n)e.push("a"+n),r.push("o"+n);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=5;++n)i.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(i.join(""));var s=Function.apply(void 0,r);for(t.exports=s.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),n=0;n<=5;++n)t.exports[n]=u[n]}()})),Go=function(t){var e=t.length;if(e<3){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}var i=new Array(e);for(n=0;n<e;++n)i[n]=n;i.sort((function(e,r){return t[e][0]-t[r][0]||t[e][1]-t[r][1]}));var o=[i[0],i[1]],s=[i[0],i[1]];for(n=2;n<e;++n){for(var a=i[n],u=t[a],c=o.length;c>1&&qo(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;c>1&&qo(t[s[c-2]],t[s[c-1]],u)>=0;)c-=1,s.pop();s.push(a)}r=new Array(s.length+o.length-2);for(var l=0,f=(n=0,o.length);n<f;++n)r[l++]=o[n];for(var h=s.length-2;h>0;--h)r[l++]=s[h];return r},qo=Bo[3],Uo=mt,zo=mt;mt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&r(e[s],a)<0&&(o=s,a=e[s]),r(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Uo.default=zo;var Yo=function(t,e){for(var r=t[0],n=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],l=e[s][1];u>n!=l>n&&r<(c-a)*(n-u)/(l-u)+a&&(i=!i)}return i},Vo=Bo[3],Xo=vt,Wo=vt;Xo.default=Wo;var Ho=function(t){return t},Ko=function(t){if(null==t)return Ho;var e,r,n=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=r=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*n+o,l[1]=(r+=t[1])*i+s;u<c;)l[u]=t[u],++u;return l}},Zo=function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r},Jo=function(t,e){function r(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),s.push(i)}}var n={},i={},o={},s=[],a=-1;return e.forEach((function(r,n){var i,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=r,e[n]=i)})),e.forEach((function(e){var r,n,s=function(e){var r,n=t.arcs[e<0?~e:e],i=n[0];return t.transform?(r=[0,0],n.forEach((function(t){r[0]+=t[0],r[1]+=t[1]}))):r=n[n.length-1],e<0?[r,i]:[i,r]}(e),a=s[0],u=s[1];if(r=o[a])if(delete o[r.end],r.push(e),r.end=u,n=i[u]){delete i[n.start];var c=n===r?r:r.concat(n);i[c.start=r.start]=o[c.end=n.end]=c}else i[r.start]=o[r.end]=r;else if(r=i[u])if(delete i[r.start],r.unshift(e),r.start=a,n=o[a]){delete o[n.end];var l=n===r?r:n.concat(r);i[l.start=n.start]=o[l.end=r.end]=l}else i[r.start]=o[r.end]=r;else i[(r=[e]).start=a]=o[r.end=u]=r})),r(o,i),r(i,o),e.forEach((function(t){n[t<0?~t:t]||s.push([t])})),s},Qo=function(t){return Bt(t,Gt.apply(this,arguments))},$o=function(t,e,r,n,i,o){3===arguments.length&&(n=o=Array,i=null);for(var s=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,c=0;c<t;++c)s[c]=i;return{set:function(n,o){for(var c=e(n)&u,l=s[c],f=0;l!=i;){if(r(l,n))return a[c]=o;if(++f>=t)throw new Error("full hashmap");l=s[c=c+1&u]}return s[c]=n,a[c]=o,o},maybeSet:function(n,o){for(var c=e(n)&u,l=s[c],f=0;l!=i;){if(r(l,n))return a[c];if(++f>=t)throw new Error("full hashmap");l=s[c=c+1&u]}return s[c]=n,a[c]=o,o},get:function(n,o){for(var c=e(n)&u,l=s[c],f=0;l!=i;){if(r(l,n))return a[c];if(++f>=t)break;l=s[c=c+1&u]}return o},keys:function(){for(var t=[],e=0,r=s.length;e<r;++e){var n=s[e];n!=i&&t.push(n)}return t}}},ts=function(t,e){return t[0]===e[0]&&t[1]===e[1]},es=new ArrayBuffer(16),rs=new Float64Array(es),ns=new Uint32Array(es),is=function(t){rs[0]=t[0],rs[1]=t[1];var e=ns[0]^ns[1];return 2147483647&(e<<5^e>>7^ns[2]^ns[3])},os=function(t){var e,r,n,i=function(t){function e(t,e,r,n){if(h[r]!==t){h[r]=t;var i=p[r];if(i>=0){var o=d[r];i===e&&o===n||i===n&&o===e||(++y,g[r]=1)}else p[r]=e,d[r]=n}}function r(t){return is(u[t])}function n(t,e){return ts(u[t],u[e])}var i,o,s,a,u=t.coordinates,c=t.lines,l=t.rings,f=function(){for(var t=$o(1.4*u.length,r,n,Int32Array,-1,Int32Array),e=new Int32Array(u.length),i=0,o=u.length;i<o;++i)e[i]=t.maybeSet(i,i);return e}(),h=new Int32Array(u.length),p=new Int32Array(u.length),d=new Int32Array(u.length),g=new Int8Array(u.length),y=0;for(i=0,o=u.length;i<o;++i)h[i]=p[i]=d[i]=-1;for(i=0,o=c.length;i<o;++i){var m=c[i],v=m[0],_=m[1];for(s=f[v],a=f[++v],++y,g[s]=1;++v<=_;)e(i,s,s=a,a=f[v]);++y,g[a]=1}for(i=0,o=u.length;i<o;++i)h[i]=-1;for(i=0,o=l.length;i<o;++i){var b=l[i],w=b[0]+1,x=b[1];for(e(i,f[x-1],s=f[w-1],a=f[w]);++w<=x;)e(i,s,s=a,a=f[w])}h=p=d=null;var E,S=function(t,e,r,n,i){3===arguments.length&&(n=Array,i=null);for(var o=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(n){for(var a=e(n)&s,u=o[a],c=0;u!=i;){if(r(u,n))return!0;if(++c>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=n,!0},has:function(n){for(var a=e(n)&s,u=o[a],c=0;u!=i;){if(r(u,n))return!0;if(++c>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,r=o.length;e<r;++e){var n=o[e];n!=i&&t.push(n)}return t}}}(1.4*y,is,ts);for(i=0,o=u.length;i<o;++i)g[E=f[i]]&&S.add(u[E]);return S}(t),o=t.coordinates,s=t.lines,a=t.rings;for(r=0,n=s.length;r<n;++r)for(var u=s[r],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(r=0,n=a.length;r<n;++r)for(var f=a[r],h=f[0],p=h,d=f[1],g=i.has(o[h]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:f[1]},f[1]=p,f=f.next=e):(function(t,e,r,n){qt(t,e,r),qt(t,e,e+n),qt(t,e+n,r)}(o,h,d,d-p),o[d]=o[h],g=!0,p=h));return t},ss=function(t,e){function r(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function n(t){var e=[];do{var r=c.get(t);e.push(t[0]<t[1]?r:~r)}while(t=t.next);return e}function i(t){return t.map(n)}var o=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){var e=t[0],r=t[1];e<o&&(o=e),e>a&&(a=e),r<s&&(s=r),r>u&&(u=r)}function n(t){t.forEach(r)}function i(t){t.forEach(n)}var o=1/0,s=1/0,a=-1/0,u=-1/0,c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){r(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(r)},LineString:function(t){n(t.arcs)},MultiLineString:function(t){t.arcs.forEach(n)},Polygon:function(t){t.arcs.forEach(n)},MultiPolygon:function(t){t.arcs.forEach(i)}};for(var l in t)e(t[l]);return a>=o&&u>=s?[o,s,a,u]:void 0}(t=function(t){var e,r={};for(e in t)r[e]=Ut(t[e]);return r}(t)),s=e>0&&o&&function(t,e,r){function n(t){return[Math.round((t[0]-c)*p),Math.round((t[1]-l)*d)]}function i(t,e){for(var r,n,i,o,s,a=-1,u=0,f=t.length,h=new Array(f);++a<f;)r=t[a],o=Math.round((r[0]-c)*p),s=Math.round((r[1]-l)*d),o===n&&s===i||(h[u++]=[n=o,i=s]);for(h.length=u;u<e;)u=h.push([h[0][0],h[0][1]]);return h}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var c=e[0],l=e[1],f=e[2],h=e[3],p=f-c?(r-1)/(f-c):1,d=h-l?(r-1)/(h-l):1,g={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=n(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(n)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/p,1/d],translate:[c,l]}}(t,o,e),a=function(t){function e(t){var e,r,n,i,o,s,a,u;if(n=p.get(e=c[t[0]]))for(a=0,u=n.length;a<u;++a)if(function(t,e){var r=t[0],n=e[0],i=t[1];if(r-i!=n-e[1])return!1;for(;r<=i;++r,++n)if(!ts(c[r],c[n]))return!1;return!0}(i=n[a],t))return t[0]=i[0],void(t[1]=i[1]);if(o=p.get(r=c[t[1]]))for(a=0,u=o.length;a<u;++a)if(function(t,e){var r=t[0],n=e[0],i=t[1],o=e[1];if(r-i!=n-o)return!1;for(;r<=i;++r,--o)if(!ts(c[r],c[o]))return!1;return!0}(s=o[a],t))return t[1]=s[0],void(t[0]=s[1]);n?n.push(t):p.set(e,[t]),o?o.push(t):p.set(r,[t]),d.push(t)}function r(t,e){var r=t[0],n=e[0],o=t[1]-r;if(o!==e[1]-n)return!1;for(var s=i(t),a=i(e),u=0;u<o;++u)if(!ts(c[r+(u+s)%o],c[n+(u+a)%o]))return!1;return!0}function n(t,e){var r=t[0],n=e[0],o=t[1],s=e[1],a=o-r;if(a!==s-n)return!1;for(var u=i(t),l=a-i(e),f=0;f<a;++f)if(!ts(c[r+(f+u)%a],c[s-(f+l)%a]))return!1;return!0}function i(t){for(var e=t[0],r=t[1],n=e,i=n,o=c[n];++n<r;){var s=c[n];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=n,o=s)}return i-e}var o,s,a,u,c=t.coordinates,l=t.lines,f=t.rings,h=l.length+f.length;for(delete t.lines,delete t.rings,a=0,u=l.length;a<u;++a)for(o=l[a];o=o.next;)++h;for(a=0,u=f.length;a<u;++a)for(s=f[a];s=s.next;)++h;var p=$o(2*h*1.4,is,ts),d=t.arcs=[];for(a=0,u=l.length;a<u;++a){o=l[a];do{e(o)}while(o=o.next)}for(a=0,u=f.length;a<u;++a)if((s=f[a]).next)do{e(s)}while(s=s.next);else!function(t){var e,o,s,a,u;if(o=p.get(c[t[0]]))for(a=0,u=o.length;a<u;++a){if(r(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(n(s,t))return t[0]=s[1],void(t[1]=s[0])}if(o=p.get(e=c[t[0]+i(t)]))for(a=0,u=o.length;a<u;++a){if(r(s=o[a],t))return t[0]=s[0],void(t[1]=s[1]);if(n(s,t))return t[0]=s[1],void(t[1]=s[0])}o?o.push(t):p.set(e,[t]),d.push(t)}(s);return t}(os(function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function r(t){for(var e=0,r=t.length;e<r;++e)u[++o]=t[e];var n={0:o-r+1,1:o};return s.push(n),n}function n(t){for(var e=0,r=t.length;e<r;++e)u[++o]=t[e];var n={0:o-r+1,1:o};return a.push(n),n}function i(t){return t.map(n)}var o=-1,s=[],a=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(n)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)e(t[l]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}}(t))),u=a.coordinates,c=$o(1.4*a.arcs.length,Vt,Xt);t=a.objects,a.bbox=o,a.arcs=a.arcs.map((function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)})),delete a.coordinates,u=null;var l={GeometryCollection:function(t){t.geometries.forEach(r)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(n)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var f in t)r(t[f]);return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,r=t.length;++e<r;){for(var n,i,o=t[e],s=0,a=1,u=o.length,c=o[0],l=c[0],f=c[1];++s<u;)n=(c=o[s])[0],i=c[1],n===l&&i===f||(o[a++]=[n-l,i-f],l=n,f=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a},as=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var r=this.points[e],n=this.points[e+1];this.centers.push({x:(r.x+n.x)/2,y:(r.y+n.y)/2,z:(r.z+n.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){r=this.centers[e],n=this.centers[e+1];var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};as.prototype.cacheSteps=function(t){var e=[],r=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var i=this.pos(n);Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y)+(i.z-r.z)*(i.z-r.z))>t&&(e.push(n),r=i)}return e},as.prototype.vector=function(t){var e=this.pos(t+10),r=this.pos(t-10);return{angle:180*Math.atan2(e.y-r.y,e.x-r.x)/3.14,speed:Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)+(r.z-e.z)*(r.z-e.z))}},as.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var r=e/this.duration;if(r>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*r);return function(t,e,r,n,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+n.x*o[1]+r.x*o[2]+e.x*o[3],y:i.y*o[0]+n.y*o[1]+r.y*o[2]+e.y*o[3],z:i.z*o[0]+n.z*o[1]+r.z*o[2]+e.z*o[3]}}((this.length-1)*r-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])};var us=he,cs=he;he.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(Ie(t,0,o,r));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*r,l=a<u-1?e[a+1]*r:t.length;s-=Math.abs(Ie(t,c,l,r))}var f=0;for(a=0;a<n.length;a+=3){var h=n[a]*r,p=n[a+1]*r,d=n[a+2]*r;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)},he.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r},us.default=cs,Oe.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!Ge(t,e))return r;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Ge(t,a=e.leaf?n(s):s)&&(e.leaf?r.push(s):Be(t,a)?this._all(s,r):u.push(s));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!Ge(t,e))return!1;for(var n,i,o,s,a=[];e;){for(n=0,i=e.children.length;n<i;n++)if(o=e.children[n],Ge(t,s=e.leaf?r(o):o)){if(e.leaf||Be(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=qe([]),this},remove:function(t,e){if(!t)return this;for(var r,n,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=c.pop(),o=!0),s.leaf&&-1!==(i=function(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Be(s,a)?n?(r++,s=n.children[r],o=!1):s=null:(u.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Ae,compareMinY:De,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var i,o=r-e+1,s=this._maxEntries;if(o<=s)return Le(i=qe(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,n-1))),(i=qe([])).leaf=!1,i.height=n;var a,u,c,l,f=Math.ceil(o/s),h=f*Math.ceil(Math.sqrt(s));for(Ue(t,e,r,h,this.compareMinX),a=e;a<=r;a+=h)for(Ue(t,a,c=Math.min(a+h-1,r),f,this.compareMinY),u=a;u<=c;u+=f)l=Math.min(u+f-1,c),i.children.push(this._build(t,u,l,n-1));return Le(i,this.toBBox),i},_chooseSubtree:function(t,e,r,n){for(var i,o,s,a,u,c,l,f;n.push(e),!e.leaf&&n.length-1!==r;){for(l=f=1/0,i=0,o=e.children.length;i<o;i++)u=Fe(s=e.children[i]),(c=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,s)-u)<f?(f=c,l=u<l?u:l,a=s):c===f&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,i=r?t:n(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),ke(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var o=this._chooseSplitIndex(r,i,n),s=qe(r.children.splice(o,r.children.length-o));s.height=r.height,s.leaf=r.leaf,Le(r,this.toBBox),Le(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=qe([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Le(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,i,o,s,a,u,c,l;for(u=c=1/0,n=e;n<=r-e;n++)s=function(t,e){var r=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}(i=Re(t,0,n,this.toBBox),o=Re(t,n,r,this.toBBox)),a=Fe(i)+Fe(o),s<u?(u=s,l=n,c=a<c?a:c):s===u&&a<c&&(c=a,l=n);return l},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:Ae,i=t.leaf?this.compareMinY:De;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var i,o,s=this.toBBox,a=Re(t,0,e,s),u=Re(t,r-e,r,s),c=je(a)+je(u);for(i=e;i<r-e;i++)o=t.children[i],ke(a,t.leaf?s(o):o),c+=je(a);for(i=r-e-1;i>=e;i--)o=t.children[i],ke(u,t.leaf?s(o):o),c+=je(u);return c},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)ke(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():Le(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var ls=Object.freeze({toMercator:$e,toWgs84:tr}),fs=6378137,hs=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var r=-1,n=0;n<d.features.length;n++)t[e]!=n&&Mt(d.features[t[e]].geometry.coordinates[0][0],d.features[n],{ignoreBoundary:!0})&&ur(d.features[n])<1/0&&(r=n);d.features[t[e]].properties.parent=r}}function r(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,n(t,e)}}function n(t,e){for(var r=0;r<d.features.length;r++)if(d.features[r].properties.parent==t){var i=e+d.features[r].properties.winding;d.features[r].properties.netWinding=i,n(r,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,s=[],a=0;a<i;a++){var u=t.geometry.coordinates[a];xr(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!function(t){for(var e={},r=1,n=0,i=t.length;n<i;++n){if(e.hasOwnProperty(t[n])){r=0;break}e[t[n]]=1}return r}(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=s.length,f=function(t,e,r){function n(t,r,n,i){var u,c,l=o[t][r],f=o[t][r+1],h=o[n][i],p=o[n][i+1],d=function(t,e,r,n){if(br(t,r)||br(t,n)||br(e,r)||br(n,r))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=r[0],c=r[1],l=n[0],f=n[1],h=(i-s)*(c-f)-(o-a)*(u-l);return 0===h?null:[((i*a-o*s)*(u-l)-(i-s)*(u*f-c*l))/h,((i*a-o*s)*(c-f)-(o-a)*(u*f-c*l))/h]}(l,f,h,p);if(null!==d&&(u=f[0]!==l[0]?(d[0]-l[0])/(f[0]-l[0]):(d[1]-l[1])/(f[1]-l[1]),c=p[0]!==h[0]?(d[0]-h[0])/(p[0]-h[0]):(d[1]-h[1])/(p[1]-h[1]),!(u>=1||u<=0||c>=1||c<=0))){var g=d,y=!a[g];y&&(a[g]=!0),e?s.push(e(d,t,r,l,f,u,n,i,h,p,c,y)):s.push(d)}}function i(t,e){var r,n,i,s,a=o[t][e],u=o[t][e+1];return a[0]<u[0]?(r=a[0],n=u[0]):(r=u[0],n=a[0]),a[1]<u[1]?(i=a[1],s=u[1]):(i=u[1],s=a[1]),{minX:r,minY:i,maxX:n,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===r&&(r=1);var o=t.geometry.coordinates,s=[],a={};if(r){for(var u=[],c=0;c<o.length;c++)for(var l=0;l<o[c].length-1;l++)u.push(i(c,l));var f=Lo();f.load(u)}for(var h=0;h<o.length;h++)for(var p=0;p<o[h].length-1;p++)if(r)f.search(i(h,p)).forEach((function(t){var e=t.ring,r=t.edge;n(h,p,e,r)}));else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)n(h,p,d,g);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s}(t,(function(t,e,r,n,i,o,s,a,u,c,l,f){return[t,e,r,n,i,o,s,a,u,c,l,f]})),h=f.length;if(0==h){var p=[];for(a=0;a<i;a++)p.push(o([t.geometry.coordinates[a]],{parent:-1,winding:function(t){for(var e=0,r=0;r<t.length-1;r++)t[r][0]<t[e][0]&&(e=r);if(wr([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var n=1;else n=-1;return n}(t.geometry.coordinates[a])}));var d=c(p);return e(),r(),d}var g=[],y=[];for(a=0;a<i;a++){g.push([]);for(var m=0;m<t.geometry.coordinates[a].length-1;m++)g[a].push([new ps(t.geometry.coordinates[a][(m+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,m],[a,(m+1).modulo(t.geometry.coordinates[a].length-1)],void 0)]),y.push(new ds(t.geometry.coordinates[a][m],[a,(m-1).modulo(t.geometry.coordinates[a].length-1)],[a,m],void 0,void 0,!1,!0))}for(a=0;a<h;a++)g[f[a][1]][f[a][2]].push(new ps(f[a][0],f[a][5],[f[a][1],f[a][2]],[f[a][6],f[a][7]],void 0)),f[a][11]&&y.push(new ds(f[a][0],[f[a][1],f[a][2]],[f[a][6],f[a][7]],void 0,void 0,!0,!0));var v=y.length;for(a=0;a<g.length;a++)for(m=0;m<g[a].length;m++)g[a][m].sort((function(t,e){return t.param<e.param?-1:1}));var _=[];for(a=0;a<v;a++)_.push({minX:y[a].coord[0],minY:y[a].coord[1],maxX:y[a].coord[0],maxY:y[a].coord[1],index:a});var b=Lo();for(b.load(_),a=0;a<g.length;a++)for(m=0;m<g[a].length;m++)for(var w=0;w<g[a][m].length;w++){E=w==g[a][m].length-1?g[a][(m+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:g[a][m][w+1].coord;var x=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0];g[a][m][w].nxtIsectAlongEdgeIn=x.index}for(a=0;a<g.length;a++)for(m=0;m<g[a].length;m++)for(w=0;w<g[a][m].length;w++){var E=g[a][m][w].coord,S=(x=b.search({minX:E[0],minY:E[1],maxX:E[0],maxY:E[1]})[0]).index;S<l?y[S].nxtIsectAlongRingAndEdge2=g[a][m][w].nxtIsectAlongEdgeIn:xr(y[S].ringAndEdge1,g[a][m][w].ringAndEdgeIn)?y[S].nxtIsectAlongRingAndEdge1=g[a][m][w].nxtIsectAlongEdgeIn:y[S].nxtIsectAlongRingAndEdge2=g[a][m][w].nxtIsectAlongEdgeIn}var C=[];for(a=0,m=0;m<i;m++){var I=a;for(w=0;w<t.geometry.coordinates[m].length-1;w++)y[a].coord[0]<y[I].coord[0]&&(I=a),a++;var P=y[I].nxtIsectAlongRingAndEdge2;for(w=0;w<y.length;w++)if(y[w].nxtIsectAlongRingAndEdge1==I||y[w].nxtIsectAlongRingAndEdge2==I){var M=w;break}var N=wr([y[M].coord,y[I].coord,y[P].coord],!0)?1:-1;C.push({isect:I,parent:-1,winding:N})}for(C.sort((function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1})),p=[];C.length>0;){var T=C.pop(),O=T.isect,L=T.parent,R=T.winding,k=p.length,A=[y[O].coord],D=O;if(y[O].ringAndEdge1Walkable)var F=y[O].ringAndEdge1,j=y[O].nxtIsectAlongRingAndEdge1;else F=y[O].ringAndEdge2,j=y[O].nxtIsectAlongRingAndEdge2;for(;!xr(y[O].coord,y[j].coord);){A.push(y[j].coord);var B=void 0;for(a=0;a<C.length;a++)if(C[a].isect==j){B=a;break}if(null!=B&&C.splice(B,1),xr(F,y[j].ringAndEdge1)){if(F=y[j].ringAndEdge2,y[j].ringAndEdge2Walkable=!1,y[j].ringAndEdge1Walkable){var G={isect:j};wr([y[D].coord,y[j].coord,y[y[j].nxtIsectAlongRingAndEdge2].coord],1==R)?(G.parent=L,G.winding=-R):(G.parent=k,G.winding=R),C.push(G)}D=j,j=y[j].nxtIsectAlongRingAndEdge2}else F=y[j].ringAndEdge1,y[j].ringAndEdge1Walkable=!1,y[j].ringAndEdge2Walkable&&(G={isect:j},wr([y[D].coord,y[j].coord,y[y[j].nxtIsectAlongRingAndEdge1].coord],1==R)?(G.parent=L,G.winding=-R):(G.parent=k,G.winding=R),C.push(G)),D=j,j=y[j].nxtIsectAlongRingAndEdge1}A.push(y[j].coord),p.push(o([A],{index:k,parent:L,winding:R,netWinding:void 0}))}return d=c(p),e(),r(),d},ps=function(t,e,r,n,i){this.coord=t,this.param=e,this.ringAndEdgeIn=r,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=i},ds=function(t,e,r,n,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=r,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var gs=Math.PI/180,ys=180/Math.PI,ms=function(t,e){this.lon=t,this.lat=e,this.x=gs*t,this.y=gs*e};ms.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},ms.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new ms(e,t)};var vs=function(){this.coords=[],this.length=0};vs.prototype.move_to=function(t){this.length++,this.coords.push(t)};var _s=function(t){this.properties=t||{},this.geometries=[]};_s.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},_s.prototype.wkt=function(){for(var t="",e="LINESTRING(",r=function(t){e+=t[0]+" "+t[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(r),t+=e.substring(0,e.length-1)+")"}return t};var bs=function(t,e,r){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new ms(t.x,t.y),this.end=new ms(e.x,e.y),this.properties=r||{};var n=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};bs.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),r=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+r*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+r*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+r*Math.sin(this.end.y),s=ys*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(i,2)));return[ys*Math.atan2(i,n),s]},bs.prototype.Arc=function(t,e){var r=[];if(!t||t<=2)r.push([this.start.lon,this.start.lat]),r.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),i=0;i<t;++i){var o=n*i,s=this.interpolate(o);r.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,f=-180+c,h=360-c,p=1;p<r.length;++p){var d=r[p-1][0],g=r[p][0],y=Math.abs(g-d);y>h&&(g>l&&d<f||d>l&&g<f)?a=!0:y>u&&(u=y)}var m=[];if(a&&u<c){var v=[];m.push(v);for(var _=0;_<r.length;++_){var b=parseFloat(r[_][0]);if(_>0&&Math.abs(b-r[_-1][0])>h){var w=parseFloat(r[_-1][0]),x=parseFloat(r[_-1][1]),E=parseFloat(r[_][0]),S=parseFloat(r[_][1]);if(w>-180&&w<f&&180===E&&_+1<r.length&&r[_-1][0]>-180&&r[_-1][0]<f){v.push([-180,r[_][1]]),_++,v.push([r[_][0],r[_][1]]);continue}if(w>l&&w<180&&-180===E&&_+1<r.length&&r[_-1][0]>l&&r[_-1][0]<180){v.push([180,r[_][1]]),_++,v.push([r[_][0],r[_][1]]);continue}if(w<f&&E>l){var C=w;w=E,E=C;var I=x;x=S,S=I}if(w>l&&E<f&&(E+=360),w<=180&&E>=180&&w<E){var P=(180-w)/(E-w),M=P*S+(1-P)*x;v.push([r[_-1][0]>l?180:-180,M]),(v=[]).push([r[_-1][0]>l?-180:180,M]),m.push(v)}else v=[],m.push(v);v.push([b,r[_][1]])}else v.push([r[_][0],r[_][1]])}}else{var N=[];m.push(N);for(var T=0;T<r.length;++T)N.push([r[T][0],r[T][1]])}for(var O=new _s(this.properties),L=0;L<m.length;++L){var R=new vs;O.geometries.push(R);for(var k=m[L],A=0;A<k.length;++A)R.move_to(k[A])}return O};var ws=kr;kr.polyline=kr,kr.polygon=function(t,e){var r,n,i,o,s,a,u;for(n=1;n<=8;n*=2){for(r=[],o=!(Dr(i=t[t.length-1],e)&n),s=0;s<t.length;s++)(u=!(Dr(a=t[s],e)&n))!==o&&r.push(Ar(i,a,n,e)),u&&r.push(a),i=a,o=u;if(!(t=r).length)break}return r};var xs=Array.prototype.slice,Es={successCallback:null,verbose:!1,polygons:!1},Ss={},Cs=64,Is=16,Ps=4,Ms=1,Ns=[],Ts=[],Os=[],Ls=[],Rs=[],ks=[],As=[],Ds=[],Fs=[],js=[],Bs=[],Gs=[],qs=[],Us=[],zs=[],Ys=[],Vs=[],Xs=[],Ws=[],Hs=[],Ks=[],Zs=[],Js=[],Qs=[];As[85]=js[85]=-1,Ds[85]=Bs[85]=0,Fs[85]=Gs[85]=1,Ws[85]=Zs[85]=1,Hs[85]=Js[85]=0,Ks[85]=Qs[85]=1,Ns[85]=Ls[85]=0,Ts[85]=Rs[85]=-1,Os[85]=zs[85]=0,Ys[85]=qs[85]=0,Vs[85]=Us[85]=1,ks[85]=Xs[85]=1,Zs[1]=Zs[169]=0,Js[1]=Js[169]=-1,Qs[1]=Qs[169]=0,qs[1]=qs[169]=-1,Us[1]=Us[169]=0,zs[1]=zs[169]=0,js[4]=js[166]=0,Bs[4]=Bs[166]=-1,Gs[4]=Gs[166]=1,Ys[4]=Ys[166]=1,Vs[4]=Vs[166]=0,Xs[4]=Xs[166]=0,As[16]=As[154]=0,Ds[16]=Ds[154]=1,Fs[16]=Fs[154]=1,Ls[16]=Ls[154]=1,Rs[16]=Rs[154]=0,ks[16]=ks[154]=1,Ws[64]=Ws[106]=0,Hs[64]=Hs[106]=1,Ks[64]=Ks[106]=0,Ns[64]=Ns[106]=-1,Ts[64]=Ts[106]=0,Os[64]=Os[106]=1,Ws[2]=Ws[168]=0,Hs[2]=Hs[168]=-1,Ks[2]=Ks[168]=1,Zs[2]=Zs[168]=0,Js[2]=Js[168]=-1,Qs[2]=Qs[168]=0,qs[2]=qs[168]=-1,Us[2]=Us[168]=0,zs[2]=zs[168]=0,Ys[2]=Ys[168]=-1,Vs[2]=Vs[168]=0,Xs[2]=Xs[168]=1,As[8]=As[162]=0,Ds[8]=Ds[162]=-1,Fs[8]=Fs[162]=0,js[8]=js[162]=0,Bs[8]=Bs[162]=-1,Gs[8]=Gs[162]=1,qs[8]=qs[162]=1,Us[8]=Us[162]=0,zs[8]=zs[162]=1,Ys[8]=Ys[162]=1,Vs[8]=Vs[162]=0,Xs[8]=Xs[162]=0,As[32]=As[138]=0,Ds[32]=Ds[138]=1,Fs[32]=Fs[138]=1,js[32]=js[138]=0,Bs[32]=Bs[138]=1,Gs[32]=Gs[138]=0,Ns[32]=Ns[138]=1,Ts[32]=Ts[138]=0,Os[32]=Os[138]=0,Ls[32]=Ls[138]=1,Rs[32]=Rs[138]=0,ks[32]=ks[138]=1,Zs[128]=Zs[42]=0,Js[128]=Js[42]=1,Qs[128]=Qs[42]=1,Ws[128]=Ws[42]=0,Hs[128]=Hs[42]=1,Ks[128]=Ks[42]=0,Ns[128]=Ns[42]=-1,Ts[128]=Ts[42]=0,Os[128]=Os[42]=1,Ls[128]=Ls[42]=-1,Rs[128]=Rs[42]=0,ks[128]=ks[42]=0,js[5]=js[165]=-1,Bs[5]=Bs[165]=0,Gs[5]=Gs[165]=0,Zs[5]=Zs[165]=1,Js[5]=Js[165]=0,Qs[5]=Qs[165]=0,Ys[20]=Ys[150]=0,Vs[20]=Vs[150]=1,Xs[20]=Xs[150]=1,Ls[20]=Ls[150]=0,Rs[20]=Rs[150]=-1,ks[20]=ks[150]=1,As[80]=As[90]=-1,Ds[80]=Ds[90]=0,Fs[80]=Fs[90]=1,Ws[80]=Ws[90]=1,Hs[80]=Hs[90]=0,Ks[80]=Ks[90]=1,qs[65]=qs[105]=0,Us[65]=Us[105]=1,zs[65]=zs[105]=0,Ns[65]=Ns[105]=0,Ts[65]=Ts[105]=-1,Os[65]=Os[105]=0,As[160]=As[10]=-1,Ds[160]=Ds[10]=0,Fs[160]=Fs[10]=1,js[160]=js[10]=-1,Bs[160]=Bs[10]=0,Gs[160]=Gs[10]=0,Zs[160]=Zs[10]=1,Js[160]=Js[10]=0,Qs[160]=Qs[10]=0,Ws[160]=Ws[10]=1,Hs[160]=Hs[10]=0,Ks[160]=Ks[10]=1,Ys[130]=Ys[40]=0,Vs[130]=Vs[40]=1,Xs[130]=Xs[40]=1,qs[130]=qs[40]=0,Us[130]=Us[40]=1,zs[130]=zs[40]=0,Ns[130]=Ns[40]=0,Ts[130]=Ts[40]=-1,Os[130]=Os[40]=0,Ls[130]=Ls[40]=0,Rs[130]=Rs[40]=-1,ks[130]=ks[40]=1,js[37]=js[133]=0,Bs[37]=Bs[133]=1,Gs[37]=Gs[133]=1,Zs[37]=Zs[133]=0,Js[37]=Js[133]=1,Qs[37]=Qs[133]=0,Ns[37]=Ns[133]=-1,Ts[37]=Ts[133]=0,Os[37]=Os[133]=0,Ls[37]=Ls[133]=1,Rs[37]=Rs[133]=0,ks[37]=ks[133]=0,Ys[148]=Ys[22]=-1,Vs[148]=Vs[22]=0,Xs[148]=Xs[22]=0,Zs[148]=Zs[22]=0,Js[148]=Js[22]=-1,Qs[148]=Qs[22]=1,Ws[148]=Ws[22]=0,Hs[148]=Hs[22]=1,Ks[148]=Ks[22]=1,Ls[148]=Ls[22]=-1,Rs[148]=Rs[22]=0,ks[148]=ks[22]=1,As[82]=As[88]=0,Ds[82]=Ds[88]=-1,Fs[82]=Fs[88]=1,Ys[82]=Ys[88]=1,Vs[82]=Vs[88]=0,Xs[82]=Xs[88]=1,qs[82]=qs[88]=-1,Us[82]=Us[88]=0,zs[82]=zs[88]=1,Ws[82]=Ws[88]=0,Hs[82]=Hs[88]=-1,Ks[82]=Ks[88]=0,As[73]=As[97]=0,Ds[73]=Ds[97]=1,Fs[73]=Fs[97]=0,js[73]=js[97]=0,Bs[73]=Bs[97]=-1,Gs[73]=Gs[97]=0,qs[73]=qs[97]=1,Us[73]=Us[97]=0,zs[73]=zs[97]=0,Ns[73]=Ns[97]=1,Ts[73]=Ts[97]=0,Os[73]=Os[97]=1,As[145]=As[25]=0,Ds[145]=Ds[25]=-1,Fs[145]=Fs[25]=0,qs[145]=qs[25]=1,Us[145]=Us[25]=0,zs[145]=zs[25]=1,Zs[145]=Zs[25]=0,Js[145]=Js[25]=1,Qs[145]=Qs[25]=1,Ls[145]=Ls[25]=-1,Rs[145]=Rs[25]=0,ks[145]=ks[25]=0,js[70]=js[100]=0,Bs[70]=Bs[100]=1,Gs[70]=Gs[100]=0,Ys[70]=Ys[100]=-1,Vs[70]=Vs[100]=0,Xs[70]=Xs[100]=1,Ws[70]=Ws[100]=0,Hs[70]=Hs[100]=-1,Ks[70]=Ks[100]=1,Ns[70]=Ns[100]=1,Ts[70]=Ts[100]=0,Os[70]=Os[100]=0,js[101]=js[69]=0,Bs[101]=Bs[69]=1,Gs[101]=Gs[69]=0,Ns[101]=Ns[69]=1,Ts[101]=Ts[69]=0,Os[101]=Os[69]=0,Zs[149]=Zs[21]=0,Js[149]=Js[21]=1,Qs[149]=Qs[21]=1,Ls[149]=Ls[21]=-1,Rs[149]=Rs[21]=0,ks[149]=ks[21]=0,Ys[86]=Ys[84]=-1,Vs[86]=Vs[84]=0,Xs[86]=Xs[84]=1,Ws[86]=Ws[84]=0,Hs[86]=Hs[84]=-1,Ks[86]=Ks[84]=1,As[89]=As[81]=0,Ds[89]=Ds[81]=-1,Fs[89]=Fs[81]=0,qs[89]=qs[81]=1,Us[89]=Us[81]=0,zs[89]=zs[81]=1,As[96]=As[74]=0,Ds[96]=Ds[74]=1,Fs[96]=Fs[74]=0,js[96]=js[74]=-1,Bs[96]=Bs[74]=0,Gs[96]=Gs[74]=1,Ws[96]=Ws[74]=1,Hs[96]=Hs[74]=0,Ks[96]=Ks[74]=0,Ns[96]=Ns[74]=1,Ts[96]=Ts[74]=0,Os[96]=Os[74]=1,As[24]=As[146]=0,Ds[24]=Ds[146]=-1,Fs[24]=Fs[146]=1,Ys[24]=Ys[146]=1,Vs[24]=Vs[146]=0,Xs[24]=Xs[146]=1,qs[24]=qs[146]=0,Us[24]=Us[146]=1,zs[24]=zs[146]=1,Ls[24]=Ls[146]=0,Rs[24]=Rs[146]=-1,ks[24]=ks[146]=0,js[6]=js[164]=-1,Bs[6]=Bs[164]=0,Gs[6]=Gs[164]=1,Ys[6]=Ys[164]=-1,Vs[6]=Vs[164]=0,Xs[6]=Xs[164]=0,Zs[6]=Zs[164]=0,Js[6]=Js[164]=-1,Qs[6]=Qs[164]=1,Ws[6]=Ws[164]=1,Hs[6]=Hs[164]=0,Ks[6]=Ks[164]=0,qs[129]=qs[41]=0,Us[129]=Us[41]=1,zs[129]=zs[41]=1,Zs[129]=Zs[41]=0,Js[129]=Js[41]=1,Qs[129]=Qs[41]=0,Ns[129]=Ns[41]=-1,Ts[129]=Ts[41]=0,Os[129]=Os[41]=0,Ls[129]=Ls[41]=0,Rs[129]=Rs[41]=-1,ks[129]=ks[41]=0,Ys[66]=Ys[104]=0,Vs[66]=Vs[104]=1,Xs[66]=Xs[104]=0,qs[66]=qs[104]=-1,Us[66]=Us[104]=0,zs[66]=zs[104]=1,Ws[66]=Ws[104]=0,Hs[66]=Hs[104]=-1,Ks[66]=Ks[104]=0,Ns[66]=Ns[104]=0,Ts[66]=Ts[104]=-1,Os[66]=Os[104]=1,As[144]=As[26]=-1,Ds[144]=Ds[26]=0,Fs[144]=Fs[26]=0,Zs[144]=Zs[26]=1,Js[144]=Js[26]=0,Qs[144]=Qs[26]=1,Ws[144]=Ws[26]=0,Hs[144]=Hs[26]=1,Ks[144]=Ks[26]=1,Ls[144]=Ls[26]=-1,Rs[144]=Rs[26]=0,ks[144]=ks[26]=1,js[36]=js[134]=0,Bs[36]=Bs[134]=1,Gs[36]=Gs[134]=1,Ys[36]=Ys[134]=0,Vs[36]=Vs[134]=1,Xs[36]=Xs[134]=0,Ns[36]=Ns[134]=0,Ts[36]=Ts[134]=-1,Os[36]=Os[134]=1,Ls[36]=Ls[134]=1,Rs[36]=Rs[134]=0,ks[36]=ks[134]=0,As[9]=As[161]=-1,Ds[9]=Ds[161]=0,Fs[9]=Fs[161]=0,js[9]=js[161]=0,Bs[9]=Bs[161]=-1,Gs[9]=Gs[161]=0,qs[9]=qs[161]=1,Us[9]=Us[161]=0,zs[9]=zs[161]=0,Zs[9]=Zs[161]=1,Js[9]=Js[161]=0,Qs[9]=Qs[161]=1,As[136]=0,Ds[136]=1,Fs[136]=1,js[136]=0,Bs[136]=1,Gs[136]=0,Ys[136]=-1,Vs[136]=0,Xs[136]=1,qs[136]=-1,Us[136]=0,zs[136]=0,Zs[136]=0,Js[136]=-1,Qs[136]=0,Ws[136]=0,Hs[136]=-1,Ks[136]=1,Ns[136]=1,Ts[136]=0,Os[136]=0,Ls[136]=1,Rs[136]=0,ks[136]=1,As[34]=0,Ds[34]=-1,Fs[34]=0,js[34]=0,Bs[34]=-1,Gs[34]=1,Ys[34]=1,Vs[34]=0,Xs[34]=0,qs[34]=1,Us[34]=0,zs[34]=1,Zs[34]=0,Js[34]=1,Qs[34]=1,Ws[34]=0,Hs[34]=1,Ks[34]=0,Ns[34]=-1,Ts[34]=0,Os[34]=1,Ls[34]=-1,Rs[34]=0,ks[34]=0,As[35]=0,Ds[35]=1,Fs[35]=1,js[35]=0,Bs[35]=-1,Gs[35]=1,Ys[35]=1,Vs[35]=0,Xs[35]=0,qs[35]=-1,Us[35]=0,zs[35]=0,Zs[35]=0,Js[35]=-1,Qs[35]=0,Ws[35]=0,Hs[35]=1,Ks[35]=0,Ns[35]=-1,Ts[35]=0,Os[35]=1,Ls[35]=1,Rs[35]=0,ks[35]=1,As[153]=0,Ds[153]=1,Fs[153]=1,qs[153]=-1,Us[153]=0,zs[153]=0,Zs[153]=0,Js[153]=-1,Qs[153]=0,Ls[153]=1,Rs[153]=0,ks[153]=1,js[102]=0,Bs[102]=-1,Gs[102]=1,Ys[102]=1,Vs[102]=0,Xs[102]=0,Ws[102]=0,Hs[102]=1,Ks[102]=0,Ns[102]=-1,Ts[102]=0,Os[102]=1,As[155]=0,Ds[155]=-1,Fs[155]=0,qs[155]=1,Us[155]=0,zs[155]=1,Zs[155]=0,Js[155]=1,Qs[155]=1,Ls[155]=-1,Rs[155]=0,ks[155]=0,js[103]=0,Bs[103]=1,Gs[103]=0,Ys[103]=-1,Vs[103]=0,Xs[103]=1,Ws[103]=0,Hs[103]=-1,Ks[103]=1,Ns[103]=1,Ts[103]=0,Os[103]=0,As[152]=0,Ds[152]=1,Fs[152]=1,Ys[152]=-1,Vs[152]=0,Xs[152]=1,qs[152]=-1,Us[152]=0,zs[152]=0,Zs[152]=0,Js[152]=-1,Qs[152]=0,Ws[152]=0,Hs[152]=-1,Ks[152]=1,Ls[152]=1,Rs[152]=0,ks[152]=1,As[156]=0,Ds[156]=-1,Fs[156]=1,Ys[156]=1,Vs[156]=0,Xs[156]=1,qs[156]=-1,Us[156]=0,zs[156]=0,Zs[156]=0,Js[156]=-1,Qs[156]=0,Ws[156]=0,Hs[156]=1,Ks[156]=1,Ls[156]=-1,Rs[156]=0,ks[156]=1,As[137]=0,Ds[137]=1,Fs[137]=1,js[137]=0,Bs[137]=1,Gs[137]=0,qs[137]=-1,Us[137]=0,zs[137]=0,Zs[137]=0,Js[137]=-1,Qs[137]=0,Ns[137]=1,Ts[137]=0,Os[137]=0,Ls[137]=1,Rs[137]=0,ks[137]=1,As[139]=0,Ds[139]=1,Fs[139]=1,js[139]=0,Bs[139]=-1,Gs[139]=0,qs[139]=1,Us[139]=0,zs[139]=0,Zs[139]=0,Js[139]=1,Qs[139]=0,Ns[139]=-1,Ts[139]=0,Os[139]=0,Ls[139]=1,Rs[139]=0,ks[139]=1,As[98]=0,Ds[98]=-1,Fs[98]=0,js[98]=0,Bs[98]=-1,Gs[98]=1,Ys[98]=1,Vs[98]=0,Xs[98]=0,qs[98]=1,Us[98]=0,zs[98]=1,Ws[98]=0,Hs[98]=1,Ks[98]=0,Ns[98]=-1,Ts[98]=0,Os[98]=1,As[99]=0,Ds[99]=1,Fs[99]=0,js[99]=0,Bs[99]=-1,Gs[99]=1,Ys[99]=1,Vs[99]=0,Xs[99]=0,qs[99]=-1,Us[99]=0,zs[99]=1,Ws[99]=0,Hs[99]=-1,Ks[99]=0,Ns[99]=1,Ts[99]=0,Os[99]=1,js[38]=0,Bs[38]=-1,Gs[38]=1,Ys[38]=1,Vs[38]=0,Xs[38]=0,Zs[38]=0,Js[38]=1,Qs[38]=1,Ws[38]=0,Hs[38]=1,Ks[38]=0,Ns[38]=-1,Ts[38]=0,Os[38]=1,Ls[38]=-1,Rs[38]=0,ks[38]=0,js[39]=0,Bs[39]=1,Gs[39]=1,Ys[39]=-1,Vs[39]=0,Xs[39]=0,Zs[39]=0,Js[39]=-1,Qs[39]=1,Ws[39]=0,Hs[39]=1,Ks[39]=0,Ns[39]=-1,Ts[39]=0,Os[39]=1,Ls[39]=1,Rs[39]=0,ks[39]=0;var $s=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ta=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ea=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},ra=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},na=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ia=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},oa=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},sa=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},aa=[],ua=[],ca=[],la=[],fa=[],ha=[],pa=[],da=[];la[1]=fa[1]=18,la[169]=fa[169]=18,ca[4]=ua[4]=12,ca[166]=ua[166]=12,aa[16]=da[16]=4,aa[154]=da[154]=4,ha[64]=pa[64]=22,ha[106]=pa[106]=22,ca[2]=ha[2]=17,la[2]=fa[2]=18,ca[168]=ha[168]=17,la[168]=fa[168]=18,aa[8]=la[8]=9,ua[8]=ca[8]=12,aa[162]=la[162]=9,ua[162]=ca[162]=12,aa[32]=da[32]=4,ua[32]=pa[32]=1,aa[138]=da[138]=4,ua[138]=pa[138]=1,fa[128]=da[128]=21,ha[128]=pa[128]=22,fa[42]=da[42]=21,ha[42]=pa[42]=22,ua[5]=fa[5]=14,ua[165]=fa[165]=14,ca[20]=da[20]=6,ca[150]=da[150]=6,aa[80]=ha[80]=11,aa[90]=ha[90]=11,la[65]=pa[65]=3,la[105]=pa[105]=3,aa[160]=ha[160]=11,ua[160]=fa[160]=14,aa[10]=ha[10]=11,ua[10]=fa[10]=14,ca[130]=da[130]=6,la[130]=pa[130]=3,ca[40]=da[40]=6,la[40]=pa[40]=3,ua[101]=pa[101]=1,ua[69]=pa[69]=1,fa[149]=da[149]=21,fa[21]=da[21]=21,ca[86]=ha[86]=17,ca[84]=ha[84]=17,aa[89]=la[89]=9,aa[81]=la[81]=9,aa[96]=pa[96]=0,ua[96]=ha[96]=15,aa[74]=pa[74]=0,ua[74]=ha[74]=15,aa[24]=ca[24]=8,la[24]=da[24]=7,aa[146]=ca[146]=8,la[146]=da[146]=7,ua[6]=ha[6]=15,ca[6]=fa[6]=16,ua[164]=ha[164]=15,ca[164]=fa[164]=16,la[129]=da[129]=7,fa[129]=pa[129]=20,la[41]=da[41]=7,fa[41]=pa[41]=20,ca[66]=pa[66]=2,la[66]=ha[66]=19,ca[104]=pa[104]=2,la[104]=ha[104]=19,aa[144]=fa[144]=10,ha[144]=da[144]=23,aa[26]=fa[26]=10,ha[26]=da[26]=23,ua[36]=da[36]=5,ca[36]=pa[36]=2,ua[134]=da[134]=5,ca[134]=pa[134]=2,aa[9]=fa[9]=10,ua[9]=la[9]=13,aa[161]=fa[161]=10,ua[161]=la[161]=13,ua[37]=da[37]=5,fa[37]=pa[37]=20,ua[133]=da[133]=5,fa[133]=pa[133]=20,ca[148]=fa[148]=16,ha[148]=da[148]=23,ca[22]=fa[22]=16,ha[22]=da[22]=23,aa[82]=ca[82]=8,la[82]=ha[82]=19,aa[88]=ca[88]=8,la[88]=ha[88]=19,aa[73]=pa[73]=0,ua[73]=la[73]=13,aa[97]=pa[97]=0,ua[97]=la[97]=13,aa[145]=la[145]=9,fa[145]=da[145]=21,aa[25]=la[25]=9,fa[25]=da[25]=21,ua[70]=pa[70]=1,ca[70]=ha[70]=17,ua[100]=pa[100]=1,ca[100]=ha[100]=17,aa[34]=la[34]=9,ua[34]=ca[34]=12,fa[34]=da[34]=21,ha[34]=pa[34]=22,aa[136]=da[136]=4,ua[136]=pa[136]=1,ca[136]=ha[136]=17,la[136]=fa[136]=18,aa[35]=da[35]=4,ua[35]=ca[35]=12,la[35]=fa[35]=18,ha[35]=pa[35]=22,aa[153]=da[153]=4,la[153]=fa[153]=18,ua[102]=ca[102]=12,ha[102]=pa[102]=22,aa[155]=la[155]=9,fa[155]=da[155]=23,ua[103]=pa[103]=1,ca[103]=ha[103]=17,aa[152]=da[152]=4,ca[152]=ha[152]=17,la[152]=fa[152]=18,aa[156]=ca[156]=8,la[156]=fa[156]=18,ha[156]=da[156]=23,aa[137]=da[137]=4,ua[137]=pa[137]=1,la[137]=fa[137]=18,aa[139]=da[139]=4,ua[139]=la[139]=13,fa[139]=pa[139]=20,aa[98]=la[98]=9,ua[98]=ca[98]=12,ha[98]=pa[98]=22,aa[99]=pa[99]=0,ua[99]=ca[99]=12,la[99]=ha[99]=19,ua[38]=ca[38]=12,fa[38]=da[38]=21,ha[38]=pa[38]=22,ua[39]=da[39]=5,ca[39]=fa[39]=16,ha[39]=pa[39]=22;var ga=[];ga[1]=ga[169]=$s,ga[4]=ga[166]=ta,ga[16]=ga[154]=ea,ga[64]=ga[106]=ra,ga[168]=ga[2]=na,ga[162]=ga[8]=ia,ga[138]=ga[32]=oa,ga[42]=ga[128]=sa,ga[5]=ga[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ga[20]=ga[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ga[80]=ga[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ga[65]=ga[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ga[160]=ga[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ga[130]=ga[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ga[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ga[101]=ga[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ga[149]=ga[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ga[86]=ga[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ga[89]=ga[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ga[96]=ga[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[24]=ga[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ga[6]=ga[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ga[129]=ga[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ga[66]=ga[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[144]=ga[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ga[36]=ga[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ga[9]=ga[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ga[37]=ga[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ga[148]=ga[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ga[82]=ga[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ga[73]=ga[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ga[145]=ga[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ga[70]=ga[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[34]=function(t){return[sa(t),ia(t)]},ga[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ga[136]=function(t){return[oa(t),na(t)]},ga[153]=function(t){return[ea(t),$s(t)]},ga[102]=function(t){return[ta(t),ra(t)]},ga[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ga[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[152]=function(t){return[ea(t),na(t)]},ga[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ga[137]=function(t){return[oa(t),$s(t)]},ga[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ga[98]=function(t){return[ia(t),ra(t)]},ga[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ga[38]=function(t){return[ta(t),sa(t)]},ga[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ya=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ya.buildId=function(t){return t.join(",")},ya.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},ya.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},ya.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ya.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,r){var n=e.to,i=r.to;if(n.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-i.coordinates[1]:i.coordinates[1]-n.coordinates[1];var o=un(t.coordinates,n.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},ya.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ya.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ya.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var ma=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};ma.prototype.getSymetric=function(){return this.symetric||(this.symetric=new ma(this.to,this.from),this.symetric.symetric=this),this.symetric},ma.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},ma.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},ma.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},ma.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},ma.prototype.compareTo=function(t){return un(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var va=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},_a={length:{configurable:!0}};va.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},va.prototype.get=function(t){return this.edges[t]},_a.length.get=function(){return this.edges.length},va.prototype.forEach=function(t){this.edges.forEach(t)},va.prototype.map=function(t){return this.edges.map(t)},va.prototype.some=function(t){return this.edges.some(t)},va.prototype.isValid=function(){return!0},va.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,r,n){return r.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e}),0),r=(0===e?this.length:e)-1,n=(e+1)%this.length,i=un(this.edges[r].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[r].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0},va.prototype.toMultiPoint=function(){return f(this.edges.map((function(t){return t.from.coordinates})))},va.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},va.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ie(this.toPolygon())},va.findEdgeRingContaining=function(t,e){var r,i,o=t.getEnvelope();return e.forEach((function(e){var s=e.getEnvelope();if(i&&(r=i.getEnvelope()),!function(t,e){var r=t.geometry.coordinates.map((function(t){return t[0]})),n=t.geometry.coordinates.map((function(t){return t[1]})),i=e.geometry.coordinates.map((function(t){return t[0]})),o=e.geometry.coordinates.map((function(t){return t[1]}));return Math.max(null,r)===Math.max(null,i)&&Math.max(null,n)===Math.max(null,o)&&Math.min(null,r)===Math.min(null,i)&&Math.min(null,n)===Math.min(null,o)}(s,o)&&cn(s,o)){var a=t.map((function(t){return t.from.coordinates})).find((function(t){return!e.some((function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)}))}));a&&e.inside(n(a))&&(i&&!cn(r,s)||(i=e))}})),i},va.prototype.inside=function(t){return Mt(t,this.toPolygon())},Object.defineProperties(va.prototype,_a);var ba=function(){this.edges=[],this.nodes={}};ba.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new ba;return D(t,(function(t){W(t,"LineString","Graph::fromGeoJson"),M(t,(function(t,r){if(t){var n=e.getNode(t),i=e.getNode(r);e.addEdge(n,i)}return r}))})),e},ba.prototype.getNode=function(t){var e=ya.buildId(t),r=this.nodes[e];return r||(r=this.nodes[e]=new ya(t)),r},ba.prototype.addEdge=function(t,e){var r=new ma(t,e),n=r.getSymetric();this.edges.push(r),this.edges.push(n)},ba.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},ba.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var r=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),r.forEach((function(t){return e._removeIfDangle(t)}))}},ba.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},ba.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,r){t.getOuterEdge((0===r?t.getOuterEdges().length:r)-1).symetric.next=e}))},ba.prototype._computeNextCCWEdges=function(t,e){for(var r,n,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(n=c),u&&(n&&(n.next=u,n=void 0),r||(r=u)))}n&&(n.next=r)},ba.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(r){if(!(r.label>=0)){t.push(r);var n=r;do{n.label=e,n=n.next}while(!r.isEqual(n));e++}})),t},ba.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(r){t._computeNextCCWEdges(r,e.label)}))}));var e=[];return this.edges.forEach((function(r){r.ring||e.push(t._findEdgeRing(r))})),e},ba.prototype._findIntersectionNodes=function(t){var e=[],r=t,n=function(){var n=0;r.from.getOuterEdges().forEach((function(e){e.label===t.label&&++n})),n>1&&e.push(r.from),r=r.next};do{n()}while(!t.isEqual(r));return e},ba.prototype._findEdgeRing=function(t){var e=t,r=new va;do{r.push(e),e.ring=r,e=e.next}while(!t.isEqual(e));return r},ba.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},ba.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()};var wa=yt((function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r})),xa=(wa.shim,yt((function(t,e){function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=i?r:n).supported=r,e.unsupported=n}))),Ea=(xa.supported,xa.unsupported,yt((function(t){function e(t){return null==t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var n=Array.prototype.slice,i=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(xa(t))return!!xa(o)&&(t=n.call(t),o=n.call(o),i(t,o,s));if(r(t)){if(!r(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var c=wa(t),l=wa(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),a=c.length-1;a>=0;a--)if(c[a]!=l[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!i(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))}}))),Sa=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:bn};Sa.prototype.compare=function(t,e){if(t.type!==e.type||!_n(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var r=this,n=vn(t),i=vn(e);return n.every((function(t){return this.some((function(e){return r.compare(t,e)}))}),i)}}return!1},Sa.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r].toFixed(this.precision)!==e[r].toFixed(this.precision))return!1;return!0},Sa.prototype.compareLine=function(t,e,r,n){if(!_n(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[r],o[r]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[r],o[o.length-(1+r)])&&this.comparePath(i.slice().reverse(),o)}},Sa.prototype.fixStartIndex=function(t,e){for(var r,n=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){n=i;break}return n>=0&&(r=[].concat(t.slice(n,t.length),t.slice(1,n+1))),r},Sa.prototype.comparePath=function(t,e){var r=this;return t.every((function(t,e){return r.compareCoord(t,this[e])}),e)},Sa.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),i=this;return r.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),n)}return!1},Sa.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Sa.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Sa.prototype.removePseudo=function(t){return t};var Ca=Sa,Ia=yt((function(t){function e(t,e,r,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,r,n)}e.prototype.run=function(t,e,r,n){this._init(t,e,r,n);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(1!==this._visited[n]){this._visited[n]=1;var i=this._regionQuery(n);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],r=0;r<this._datasetLength;r++)this.distance(this.dataset[t],this.dataset[r])<this.epsilon&&e.push(r);return e},e.prototype._mergeArrays=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)})),Pa=yt((function(t){function e(t,e,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,r)}e.prototype.init=function(t,e,r){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==r&&(this.distance=r)},e.prototype.run=function(t,e){this.init(t,e);for(var r=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,u=0;u<l;u++)s[u]=0;for(var c=0;c<r;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(u=0;u<l;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,r=this.dataset.length-1;do{e=Math.round(Math.random()*r),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,r=this.dataset.length,n=0;n<r;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===e[t=this.assignments[r]]&&(e[t]=[]),e[t].push(r);return e},e.prototype.argmin=function(t,e,r){for(var n,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=r(t,e[a]))<i&&(i=n,o=a);return o},e.prototype.distance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)},t.exports&&(t.exports=e)})),Ma=yt((function(t){function e(t,e,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,r)}e.prototype.insert=function(t,e){for(var r=this._queue.length,n=r;n--;){var i=this._priorities[n];"desc"===this._sorting?e>i&&(r=n):e<i&&(r=n)}this._insertAt(t,e,r)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,r=this._queue.length;e<r;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,r){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}r&&(this._sorting=r)},e.prototype._insertAt=function(t,e,r){this._queue.length===r?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(r,0,t),this._priorities.splice(r,0,e))},t.exports&&(t.exports=e)})),Na=yt((function(t){function e(t,e,r,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,r,n)}if(t.exports)var r=Ma;e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new r(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,r=this._orderedList.length;e<r;e++){var n=this._orderedList[e],i=this._reachability[n];t.push([n,i])}return t},e.prototype._init=function(t,e,r,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),r&&(this.minPts=r),n&&(this.distance=n)},e.prototype._updateQueue=function(t,e,r){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===n._processed[e]){var i=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,i);void 0===n._reachability[e]?(n._reachability[e]=o,r.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,r.remove(e),r.insert(e,o))}}))},e.prototype._expandCluster=function(t,e){for(var r=e.getElements(),n=0,i=r.length;n<i;n++){var o=r[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,r=0;r<e;r++)if(this._regionQuery(t,r).length>=this.minPts)return r},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var r=[],n=0,i=this.dataset.length;n<i;n++)this.distance(this.dataset[t],this.dataset[n])<e&&r.push(n);return r},e.prototype._euclideanDistance=function(t,e){for(var r=0,n=Math.min(t.length,e.length);n--;)r+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(r)},t.exports&&(t.exports=e)})),Ta=yt((function(t){t.exports&&(t.exports={DBSCAN:Ia,KMEANS:Pa,OPTICS:Na,PriorityQueue:Ma})})),Oa=(Ta.DBSCAN,Ta.KMEANS,Ta.OPTICS,Ta.PriorityQueue,function(t,e,r){for(var n=t.length,i=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return r?Math.sqrt(i):i}),La=Oa,Ra=function(t,e,r){var n=Math.abs(t-e);return r?n:n*n},ka=Oa,Aa=function(t,e,r,n){var i=[],o=[],s=[],a=[],u=!1,c=n||1e4,l=t.length,f=t[0].length,h=f>0,p=[];if(r)i="kmrand"==r?function(t,e){for(var r={},n=[],i=e<<2,o=t.length,s=t[0].length>0;n.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;r[u]||(r[u]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n}(t,e):"kmpp"==r?function(t,e){var r=t[0].length?La:Ra,n=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),n.push(s);n.length<e;){for(var a=[],u=n.length,c=0,l=[],f=0;f<i;f++){for(var h=1/0,p=0;p<u;p++){var d=r(t[f],n[p]);d<=h&&(h=d)}a[f]=h}for(var g=0;g<i;g++)c+=a[g];for(var y=0;y<i;y++)l[y]={i:y,v:t[y],pr:a[y]/c,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var m=1;m<i;m++)l[m].cs=l[m-1].cs+l[m].pr;for(var v=Math.random(),_=0;_<i-1&&l[_++].cs<v;);n.push(l[_-1].v)}return n}(t,e):r;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,i.push(t[g]))}do{xn(e,0,p);for(var y=0;y<l;y++){for(var m=1/0,v=0,_=0;_<e;_++)(a=h?ka(t[y],i[_]):Math.abs(t[y]-i[_]))<=m&&(m=a,v=_);s[y]=v,p[v]++}for(var b=[],w=(o=[],0);w<e;w++)b[w]=h?xn(f,0,b[w]):0,o[w]=i[w];if(h){for(var x=0;x<e;x++)i[x]=[];for(var E=0;E<l;E++)for(var S=b[s[E]],C=t[E],I=0;I<f;I++)S[I]+=C[I];u=!0;for(var P=0;P<e;P++){for(var M=i[P],N=b[P],T=o[P],O=p[P],L=0;L<f;L++)M[L]=N[L]/O||0;if(u)for(var R=0;R<f;R++)if(T[R]!=M[R]){u=!1;break}}}else{for(var k=0;k<l;k++)b[s[k]]+=t[k];for(var A=0;A<e;A++)i[A]=b[A]/p[A]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--c<=0}while(!u);return{it:1e4-c,k:e,idxs:s,centroids:i}},Da={search:function(t,e,r,n){t.cleanDirty();var i=(n=n||{}).heuristic||Da.heuristics.manhattan,o=n.closest||!1,s=new Pn((function(t){return t.f})),a=e;for(e.h=i(e,r),s.push(e);s.size()>0;){var u=s.pop();if(u===r)return Sn(u);u.closed=!0;for(var c=t.neighbors(u),l=0,f=c.length;l<f;++l){var h=c[l];if(!h.closed&&!h.isWall()){var p=u.g+h.getCost(u),d=h.visited;(!d||p<h.g)&&(h.visited=!0,h.parent=u,h.h=h.h||i(h,r),h.g=p,h.f=h.g+h.h,t.markDirty(h),o&&(h.h<a.h||h.h===a.h&&h.g<a.g)&&(a=h),d?s.rescoreElement(h):s.push(h))}}}return o?Sn(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var r=Math.sqrt(2),n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(n+i)+(r-2)*Math.min(n,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Cn.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Da.cleanNode(this.nodes[t])},Cn.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Da.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Cn.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Cn.prototype.neighbors=function(t){var e=[],r=t.x,n=t.y,i=this.grid;return i[r-1]&&i[r-1][n]&&e.push(i[r-1][n]),i[r+1]&&i[r+1][n]&&e.push(i[r+1][n]),i[r]&&i[r][n-1]&&e.push(i[r][n-1]),i[r]&&i[r][n+1]&&e.push(i[r][n+1]),this.diagonal&&(i[r-1]&&i[r-1][n-1]&&e.push(i[r-1][n-1]),i[r+1]&&i[r+1][n-1]&&e.push(i[r+1][n-1]),i[r-1]&&i[r-1][n+1]&&e.push(i[r-1][n+1]),i[r+1]&&i[r+1][n+1]&&e.push(i[r+1][n+1])),e},Cn.prototype.toString=function(){for(var t,e,r,n,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],r=0,n=(e=o[s]).length;r<n;r++)t.push(e[r].weight);i.push(t.join(" "))}return i.join("\n")},In.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},In.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},In.prototype.isWall=function(){return 0===this.weight},Pn.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),r=this.content.pop();e!==this.content.length-1&&(this.content[e]=r,this.scoreFunction(r)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var r=(t+1>>1)-1,n=this.content[r];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[r]=e,this.content[t]=n,t=r}},bubbleUp:function(t){for(var e=this.content.length,r=this.content[t],n=this.scoreFunction(r);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<n&&(a=s)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===a?n:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=r,t=a}}};var Fa=function(t){return function(){return t}};Tn.prototype={constructor:Tn,insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=kn(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(Ln(this,r),r=(t=r).U),r.C=!1,n.C=!0,Rn(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(Rn(this,r),r=(t=r).U),r.C=!1,n.C=!0,Ln(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,s=t.R;if(r=o?s?kn(s):o:s,i?i.L===t?i.L=r:i.R=r:this._=r,o&&s?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==s?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=s,s.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ln(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Rn(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ln(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Rn(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ln(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Rn(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var ja,Ba,Ga,qa,Ua,za=[],Ya=[],Va=1e-6,Xa=1e-12;Qn.prototype={constructor:Qn,polygons:function(){var t=this.edges;return this.cells.map((function(e){var r=e.halfedges.map((function(r){return qn(e,t[r])}));return r.data=e.site.data,r}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(r,n){if(o=(i=r.halfedges).length)for(var i,o,s,a=r.site,u=-1,c=e[i[o-1]],l=c.left===a?c.right:c.left;++u<o;)s=l,l=(c=e[i[u]]).left===a?c.right:c.left,s&&l&&n<s.index&&n<l.index&&Zn(a,s,l)<0&&t.push([a.data,s.data,l.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,r){for(var n,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[n=s],s=null,i.halfedges.forEach((function(r){var n=o.edges[r],a=n.left;if(a!==i.site&&a||(a=n.right)){var u=t-a[0],c=e-a[1],f=u*u+c*c;f<l&&(l=f,s=a.index)}}))}while(null!==s);return o._found=n,null==r||l<=r*r?i.site:null}};var Wa=Object.freeze({randomPosition:oi,randomPoint:si,randomPolygon:ai,randomLineString:ui}),Ha=Object.freeze({getCluster:li,clusterEach:fi,clusterReduce:hi,createBins:pi,applyFilter:di,propertiesContainsFilter:gi,filterProperties:yi});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),r=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(r+n,0):Math.min(n,r);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:r;for(i=i<0?Math.max(r+arguments[2],0):Math.min(i,r);n<i;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Ka=function(){};Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka},Ka.prototype.equalsWithTolerance=function(t,e,r){return Math.abs(t-e)<=r};var Za=function(){},Ja=function(){},Qa={MAX_VALUE:{configurable:!0}};Ja.isNaN=function(t){return Number.isNaN(t)},Ja.doubleToLongBits=function(t){return t},Ja.longBitsToDouble=function(t){return t},Ja.isInfinite=function(t){return!Number.isFinite(t)},Qa.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Ja,Qa);var $a=function(){},tu=function(){},eu=function(){},ru=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},nu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ru.prototype.setOrdinate=function(t,e){switch(t){case ru.X:this.x=e;break;case ru.Y:this.y=e;break;case ru.Z:this.z=e;break;default:throw new Za("Invalid ordinate index: "+t)}},ru.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!Ka.equalsWithTolerance(this.x,e.x,r)&&!!Ka.equalsWithTolerance(this.y,e.y,r)}},ru.prototype.getOrdinate=function(t){switch(t){case ru.X:return this.x;case ru.Y:return this.y;case ru.Z:return this.z}throw new Za("Invalid ordinate index: "+t)},ru.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Ja.isNaN(this.z))&&Ja.isNaN(t.z)},ru.prototype.equals=function(t){return t instanceof ru&&this.equals2D(t)},ru.prototype.equalInZ=function(t,e){return Ka.equalsWithTolerance(this.z,t.z,e)},ru.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ru.prototype.clone=function(){},ru.prototype.copy=function(){return new ru(this)},ru.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ru.prototype.distance3D=function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+r*r+n*n)},ru.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},ru.prototype.hashCode=function(){var t=17;return 37*(t=37*t+ru.hashCode(this.x))+ru.hashCode(this.y)},ru.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ru.prototype.interfaces_=function(){return[$a,tu,mi]},ru.prototype.getClass=function(){return ru},ru.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=Ja.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},nu.DimensionalComparator.get=function(){return iu},nu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},nu.NULL_ORDINATE.get=function(){return Ja.NaN},nu.X.get=function(){return 0},nu.Y.get=function(){return 1},nu.Z.get=function(){return 2},Object.defineProperties(ru,nu);var iu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Za("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};iu.prototype.compare=function(t,e){var r=t,n=e,i=iu.compare(r.x,n.x);if(0!==i)return i;var o=iu.compare(r.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:iu.compare(r.z,n.z)},iu.prototype.interfaces_=function(){return[eu]},iu.prototype.getClass=function(){return iu},iu.compare=function(t,e){return t<e?-1:t>e?1:Ja.isNaN(t)?Ja.isNaN(e)?0:-1:Ja.isNaN(e)?1:0};var ou=function(){};ou.prototype.create=function(){},ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou};var su=function(){},au={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su},su.toLocationSymbol=function(t){switch(t){case su.EXTERIOR:return"e";case su.BOUNDARY:return"b";case su.INTERIOR:return"i";case su.NONE:return"-"}throw new Za("Unknown location value: "+t)},au.INTERIOR.get=function(){return 0},au.BOUNDARY.get=function(){return 1},au.EXTERIOR.get=function(){return 2},au.NONE.get=function(){return-1},Object.defineProperties(su,au);var uu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},cu=function(){},lu={LOG_10:{configurable:!0}};cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},cu.log10=function(t){var e=Math.log(t);return Ja.isInfinite(e)?e:Ja.isNaN(e)?e:e/cu.LOG_10},cu.min=function(t,e,r,n){var i=t;return e<i&&(i=e),r<i&&(i=r),n<i&&(i=n),i},cu.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],r=arguments[2];return t<e?e:t>r?r:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],i=arguments[1],o=arguments[2];return n<i?i:n>o?o:n}},cu.wrap=function(t,e){return t<0?e- -t%e:t%e},cu.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=t;return e>n&&(n=e),r>n&&(n=r),n}if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=i;return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},cu.average=function(t,e){return(t+e)/2},lu.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(cu,lu);var fu=function(t){this.str=t};fu.prototype.append=function(t){this.str+=t},fu.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},fu.prototype.toString=function(t){return this.str};var hu=function(t){this.value=t};hu.prototype.intValue=function(){return this.value},hu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},hu.isNaN=function(t){return Number.isNaN(t)};var pu=function(){};pu.isWhitespace=function(t){return t<=32&&t>=0||127===t},pu.toUpperCase=function(t){return t.toUpperCase()};var du=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},gu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};du.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},du.prototype.extractSignificantDigits=function(t,e){var r=this.abs(),n=du.magnitude(r._hi),i=du.TEN.pow(n);(r=r.divide(i)).gt(du.TEN)?(r=r.divide(du.TEN),n+=1):r.lt(du.ONE)&&(r=r.multiply(du.TEN),n-=1);for(var o=n+1,s=new fu,a=du.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(r._hi);if(c<0)break;var l=!1,f=0;c>9?(l=!0,f="9"):f="0"+c,s.append(f),r=r.subtract(du.valueOf(c)).multiply(du.TEN),l&&r.selfAdd(du.TEN);var h=!0,p=du.magnitude(r._hi);if(p<0&&Math.abs(p)>=a-u&&(h=!1),!h)break}return e[0]=n,s.toString()},du.prototype.sqr=function(){return this.multiply(this)},du.prototype.doubleValue=function(){return this._hi+this._lo},du.prototype.subtract=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},du.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},du.prototype.isZero=function(){return 0===this._hi&&0===this._lo},du.prototype.selfSubtract=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},du.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},du.prototype.min=function(t){return this.le(t)?this:t},du.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,l=null,f=null;return u=this._hi/r,f=(i=(c=du.SPLIT*u)-(i=c-u))*(s=(f=du.SPLIT*r)-(s=f-r))-(l=u*r)+i*(a=r-s)+(o=u-i)*s+o*a,f=u+(c=(this._hi-l-f+this._lo-u*n)/r),this._hi=f,this._lo=u-f+c,this}},du.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},du.prototype.divide=function(){if(arguments[0]instanceof du){var t=arguments[0],e=null,r=null,n=null,i=null,o=null,s=null,a=null,u=null;return r=(o=this._hi/t._hi)-(e=(s=du.SPLIT*o)-(e=s-o)),u=e*(n=(u=du.SPLIT*t._hi)-(n=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-n)+r*n+r*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,new du(u=o+s,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return Ja.isNaN(c)?du.createNaN():du.copy(this).selfDivide(c,0)}},du.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},du.prototype.pow=function(t){if(0===t)return du.valueOf(1);var e=new du(this),r=du.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else r=e;return t<0?r.reciprocal():r},du.prototype.ceil=function(){if(this.isNaN())return du.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new du(t,e)},du.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},du.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},du.prototype.setValue=function(){if(arguments[0]instanceof du){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},du.prototype.max=function(t){return this.ge(t)?this:t},du.prototype.sqrt=function(){if(this.isZero())return du.valueOf(0);if(this.isNegative())return du.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,r=du.valueOf(e),n=this.subtract(r.sqr())._hi*(.5*t);return r.add(n)},du.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],r=null,n=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),n=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(r=i+a)),this._hi=r+n,this._lo=n+(r-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,f=null,h=null,p=null,d=null,g=null,y=null;p=this._hi+u,f=this._lo+c,d=p-(g=p-this._hi),h=f-(y=f-this._lo);var m=(l=p+(g=(d=u-g+(this._hi-d))+f))+(g=(h=c-y+(this._lo-h))+(g+(p-l))),v=g+(l-m);return this._hi=m,this._lo=v,this}},du.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof du){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;i=(u=du.SPLIT*this._hi)-this._hi,c=du.SPLIT*r,i=u-i,o=this._hi-i,s=c-r;var l=(u=this._hi*r)+(c=i*(s=c-s)-u+i*(a=r-s)+o*s+o*a+(this._hi*n+this._lo*r)),f=c+(i=u-l);return this._hi=l,this._lo=f,this}},du.prototype.selfSqr=function(){return this.selfMultiply(this)},du.prototype.floor=function(){if(this.isNaN())return du.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new du(t,e)},du.prototype.negate=function(){return this.isNaN()?this:new du(-this._hi,-this._lo)},du.prototype.clone=function(){},du.prototype.multiply=function(){if(arguments[0]instanceof du){var t=arguments[0];return t.isNaN()?du.createNaN():du.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ja.isNaN(e)?du.createNaN():du.copy(this).selfMultiply(e,0)}},du.prototype.isNaN=function(){return Ja.isNaN(this._hi)},du.prototype.intValue=function(){return Math.trunc(this._hi)},du.prototype.toString=function(){var t=du.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},du.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!0,e),n=e[0]+1,i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+du.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){var o=n-r.length;i=r+du.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},du.prototype.reciprocal=function(){var t,e,r,n,i=null,o=null,s=null,a=null;t=(r=1/this._hi)-(i=(s=du.SPLIT*r)-(i=s-r)),o=(a=du.SPLIT*this._hi)-this._hi;var u=r+(s=(1-(n=r*this._hi)-(a=i*(o=a-o)-n+i*(e=this._hi-o)+t*o+t*e)-r*this._lo)/this._hi);return new du(u,r-u+s)},du.prototype.toSciNotation=function(){if(this.isZero())return du.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),r=this.extractSignificantDigits(!1,e),n=du.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===r.charAt(0))throw new Error("Found leading zero: "+r);var i="";r.length>1&&(i=r.substring(1));var o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n},du.prototype.abs=function(){return this.isNaN()?du.NaN:this.isNegative()?this.negate():new du(this)},du.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},du.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},du.prototype.add=function(){if(arguments[0]instanceof du){var t=arguments[0];return du.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return du.copy(this).selfAdd(e)}},du.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof du){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._hi=r,this._lo=n}},du.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},du.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},du.prototype.trunc=function(){return this.isNaN()?du.NaN:this.isPositive()?this.floor():this.ceil()},du.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},du.prototype.interfaces_=function(){return[mi,$a,tu]},du.prototype.getClass=function(){return du},du.sqr=function(t){return du.valueOf(t).selfMultiply(t)},du.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return du.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new du(e)}},du.sqrt=function(t){return du.valueOf(t).sqrt()},du.parse=function(t){for(var e=0,r=t.length;pu.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<r){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}for(var o=new du,s=0,a=0,u=0;!(e>=r);){var c=t.charAt(e);if(e++,pu.isDigit(c)){var l=c-"0";o.selfMultiply(du.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var f=t.substring(e);try{u=hu.parseInt(f)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+f+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var h=o,p=s-a-u;if(0===p)h=o;else if(p>0){var d=du.TEN.pow(p);h=o.divide(d)}else if(p<0){var g=du.TEN.pow(-p);h=o.multiply(g)}return n?h.negate():h},du.createNaN=function(){return new du(Ja.NaN,Ja.NaN)},du.copy=function(t){return new du(t)},du.magnitude=function(t){var e=Math.abs(t),r=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=e&&(n+=1),n},du.stringOfChar=function(t,e){for(var r=new fu,n=0;n<e;n++)r.append(t);return r.toString()},gu.PI.get=function(){return new du(3.141592653589793,12246467991473532e-32)},gu.TWO_PI.get=function(){return new du(6.283185307179586,24492935982947064e-32)},gu.PI_2.get=function(){return new du(1.5707963267948966,6123233995736766e-32)},gu.E.get=function(){return new du(2.718281828459045,14456468917292502e-32)},gu.NaN.get=function(){return new du(Ja.NaN,Ja.NaN)},gu.EPS.get=function(){return 123259516440783e-46},gu.SPLIT.get=function(){return 134217729},gu.MAX_PRINT_DIGITS.get=function(){return 32},gu.TEN.get=function(){return du.valueOf(10)},gu.ONE.get=function(){return du.valueOf(1)},gu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},gu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(du,gu);var yu=function(){},mu={DP_SAFE_EPSILON:{configurable:!0}};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.orientationIndex=function(t,e,r){var n=yu.orientationIndexFilter(t,e,r);if(n<=1)return n;var i=du.valueOf(e.x).selfAdd(-t.x),o=du.valueOf(e.y).selfAdd(-t.y),s=du.valueOf(r.x).selfAdd(-e.x),a=du.valueOf(r.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},yu.signOfDet2x2=function(t,e,r,n){return t.multiply(n).selfSubtract(e.multiply(r)).signum()},yu.intersection=function(t,e,r,n){var i=du.valueOf(n.y).selfSubtract(r.y).selfMultiply(du.valueOf(e.x).selfSubtract(t.x)),o=du.valueOf(n.x).selfSubtract(r.x).selfMultiply(du.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=du.valueOf(n.x).selfSubtract(r.x).selfMultiply(du.valueOf(t.y).selfSubtract(r.y)),u=du.valueOf(n.y).selfSubtract(r.y).selfMultiply(du.valueOf(t.x).selfSubtract(r.x)),c=a.subtract(u).selfDivide(s).doubleValue(),l=du.valueOf(t.x).selfAdd(du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=du.valueOf(e.x).selfSubtract(t.x).selfMultiply(du.valueOf(t.y).selfSubtract(r.y)),h=du.valueOf(e.y).selfSubtract(t.y).selfMultiply(du.valueOf(t.x).selfSubtract(r.x)),p=f.subtract(h).selfDivide(s).doubleValue(),d=du.valueOf(r.y).selfAdd(du.valueOf(n.y).selfSubtract(r.y).selfMultiply(p)).doubleValue();return new ru(l,d)},yu.orientationIndexFilter=function(t,e,r){var n=null,i=(t.x-r.x)*(e.y-r.y),o=(t.y-r.y)*(e.x-r.x),s=i-o;if(i>0){if(o<=0)return yu.signum(s);n=i+o}else{if(!(i<0))return yu.signum(s);if(o>=0)return yu.signum(s);n=-i-o}var a=yu.DP_SAFE_EPSILON*n;return s>=a||-s>=a?yu.signum(s):2},yu.signum=function(t){return t>0?1:t<0?-1:0},mu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(yu,mu);var vu=function(){},_u={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};_u.X.get=function(){return 0},_u.Y.get=function(){return 1},_u.Z.get=function(){return 2},_u.M.get=function(){return 3},vu.prototype.setOrdinate=function(t,e,r){},vu.prototype.size=function(){},vu.prototype.getOrdinate=function(t,e){},vu.prototype.getCoordinate=function(){},vu.prototype.getCoordinateCopy=function(t){},vu.prototype.getDimension=function(){},vu.prototype.getX=function(t){},vu.prototype.clone=function(){},vu.prototype.expandEnvelope=function(t){},vu.prototype.copy=function(){},vu.prototype.getY=function(t){},vu.prototype.toCoordinateArray=function(){},vu.prototype.interfaces_=function(){return[tu]},vu.prototype.getClass=function(){return vu},Object.defineProperties(vu,_u);var bu=function(){},wu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bu),xu=function(){};xu.arraycopy=function(t,e,r,n,i){for(var o=0,s=e;s<e+i;s++)r[n+o]=t[s],o++},xu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Eu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1];this.x=r,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ru&&arguments[1]instanceof ru){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var f=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],g=f.y-h.y,y=h.x-f.x,m=f.x*h.y-h.x*f.y,v=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=y*b-_*m,this.y=v*m-g*b,this.w=g*_-v*y}};Eu.prototype.getY=function(){var t=this.y/this.w;if(Ja.isNaN(t)||Ja.isInfinite(t))throw new wu;return t},Eu.prototype.getX=function(){var t=this.x/this.w;if(Ja.isNaN(t)||Ja.isInfinite(t))throw new wu;return t},Eu.prototype.getCoordinate=function(){var t=new ru;return t.x=this.getX(),t.y=this.getY(),t},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.intersection=function(t,e,r,n){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=r.y-n.y,u=n.x-r.x,c=r.x*n.y-n.x*r.y,l=i*u-a*o,f=(o*c-u*s)/l,h=(a*s-i*c)/l;if(Ja.isNaN(f)||Ja.isInfinite(f)||Ja.isNaN(h)||Ja.isInfinite(h))throw new wu;return new ru(f,h)};var Su=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ru){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var r=arguments[0];this.init(r)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Cu={serialVersionUID:{configurable:!0}};Su.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Su.prototype.equals=function(t){if(!(t instanceof Su))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Su.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Su;var e=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Su(e,n,r,i)},Su.prototype.isNull=function(){return this._maxx<this._minx},Su.prototype.getMaxX=function(){return this._maxx},Su.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ru){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Su){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&n>=this._miny&&n<=this._maxy}},Su.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Su){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ru){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return!this.isNull()&&!(r>this._maxx||r<this._minx||n>this._maxy||n<this._miny)}},Su.prototype.getMinY=function(){return this._miny},Su.prototype.getMinX=function(){return this._minx},Su.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ru){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Su){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=n,this._maxy=n):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},Su.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Su.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Su.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Su.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Su.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Su.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Su.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Su.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Su.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Su.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Su){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ru){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.covers(r,n)}},Su.prototype.centre=function(){return this.isNull()?null:new ru((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Su.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ru){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Su){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.init(r.x,n.x,r.y,n.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Su.prototype.getMaxY=function(){return this._maxy},Su.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),0===e?r:0===r?e:Math.sqrt(e*e+r*r)},Su.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+ru.hashCode(this._minx))+ru.hashCode(this._maxx))+ru.hashCode(this._miny))+ru.hashCode(this._maxy)},Su.prototype.interfaces_=function(){return[$a,mi]},Su.prototype.getClass=function(){return Su},Su.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2];return r.x>=(t.x<e.x?t.x:e.x)&&r.x<=(t.x>e.x?t.x:e.x)&&r.y>=(t.y<e.y?t.y:e.y)&&r.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(n.x,i.x),l=Math.max(n.x,i.x);return!(c>u||l<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(n.y,i.y),l=Math.max(n.y,i.y),c>u||l<a))}},Cu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Su,Cu);var Iu={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Pu=function(t){this.geometryFactory=t||new Zc};Pu.prototype.read=function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var i=Iu.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Iu.emptyTypeStr.exec(t))[2]=void 0),i&&(r=i[1].toLowerCase(),n=i[2],Nu[r]&&(e=Nu[r].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Pu.prototype.write=function(t){return this.extractGeometry(t)},Pu.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Mu[e])return null;var r=e.toUpperCase();return t.isEmpty()?r+" EMPTY":r+"("+Mu[e].apply(this,[t])+")"};var Mu={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Mu.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Mu.point.apply(this,[t._geometries[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Mu.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},linearring:function(t){for(var e=[],r=0,n=t._points._coordinates.length;r<n;++r)e.push(Mu.coordinate.apply(this,[t._points._coordinates[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Mu.linestring.apply(this,[t._geometries[r]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Mu.linestring.apply(this,[t._shell])+")");for(var r=0,n=t._holes.length;r<n;++r)e.push("("+Mu.linestring.apply(this,[t._holes[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push("("+Mu.polygon.apply(this,[t._geometries[r]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],r=0,n=t._geometries.length;r<n;++r)e.push(this.extractGeometry(t._geometries[r]));return e.join(",")}},Nu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Iu.spaces);return this.geometryFactory.createPoint(new ru(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Iu.trimParens,"$1"),n.push(Nu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Iu.spaces),n.push(new ru(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,r=t.trim().split(","),n=[],i=0,o=r.length;i<o;++i)e=r[i].trim().split(Iu.spaces),n.push(new ru(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,r=t.trim().split(Iu.parenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Iu.trimParens,"$1"),n.push(Nu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,r,n,i,o=t.trim().split(Iu.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Iu.trimParens,"$1"),r=Nu.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(r._points),0===a?i=n:s.push(n);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,r=t.trim().split(Iu.doubleParenComma),n=[],i=0,o=r.length;i<o;++i)e=r[i].replace(Iu.trimParens,"$1"),n.push(Nu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),r=[],n=0,i=e.length;n<i;++n)r.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(r)}},Tu=function(t){this.parser=new Pu(t)};Tu.prototype.write=function(t){return this.parser.write(t)},Tu.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Ou=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Lu=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ou),Ru=function(){};Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru},Ru.shouldNeverReachHere=function(){if(0===arguments.length)Ru.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Lu("Should never reach here"+(null!==t?": "+t:""))}},Ru.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],Ru.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Lu:new Lu(e)},Ru.equals=function(){var t,e,r;if(2===arguments.length)t=arguments[0],e=arguments[1],Ru.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],r=arguments[2],!e.equals(t)))throw new Lu("Expected "+t+" but encountered "+e+(null!==r?": "+r:""))};var ku=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ru,this._intPt[1]=new ru,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Au={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ku.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ku.prototype.getTopologySummary=function(){var t=new fu;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ku.prototype.computeIntersection=function(t,e,r,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,r,n)},ku.prototype.getIntersectionNum=function(){return this._result},ku.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ku.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ku.prototype.setPrecisionModel=function(t){this._precisionModel=t},ku.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ku.prototype.getIntersection=function(t){return this._intPt[t]},ku.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ku.prototype.hasIntersection=function(){return this._result!==ku.NO_INTERSECTION},ku.prototype.getEdgeDistance=function(t,e){return ku.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ku.prototype.isCollinear=function(){return this._result===ku.COLLINEAR_INTERSECTION},ku.prototype.toString=function(){return Tu.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Tu.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ku.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ku.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ku.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku},ku.computeEdgeDistance=function(t,e,r){var n=Math.abs(r.x-e.x),i=Math.abs(r.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(r))o=n>i?n:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Ru.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ku.nonRobustComputeEdgeDistance=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return Ru.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Au.DONT_INTERSECT.get=function(){return 0},Au.DO_INTERSECT.get=function(){return 1},Au.COLLINEAR.get=function(){return 2},Au.NO_INTERSECTION.get=function(){return 0},Au.POINT_INTERSECTION.get=function(){return 1},Au.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ku,Au);var Du=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Su(this._inputLines[0][0],this._inputLines[0][1]),r=new Su(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&r.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2];if(this._isProper=!1,Su.intersects(r,n,e)&&0===Bu.orientationIndex(r,n,e)&&0===Bu.orientationIndex(n,r,e))return this._isProper=!0,(e.equals(r)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,r,n,i){i.x=this.smallestInAbsValue(t.x,e.x,r.x,n.x),i.y=this.smallestInAbsValue(t.y,e.y,r.y,n.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,r,n,i){var o=null;try{o=Eu.intersection(t,r,n,i)}catch(s){if(!(s instanceof wu))throw s;o=e.nearestEndpoint(t,r,n,i)}return o},e.prototype.intersection=function(t,r,n,i){var o=this.intersectionWithNormalization(t,r,n,i);return this.isInSegmentEnvelopes(o)||(o=new ru(e.nearestEndpoint(t,r,n,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,r,n){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(r)<o&&(i=r,o=Math.abs(r)),Math.abs(n)<o&&(i=n),i},e.prototype.checkDD=function(t,e,r,n,i){var o=yu.intersection(t,e,r,n),s=this.isInSegmentEnvelopes(o);xu.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&xu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,r,n){var i=new ru(t),o=new ru(e),s=new ru(r),a=new ru(n),u=new ru;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,r,n,i){var o=Su.intersects(e,r,n),s=Su.intersects(e,r,i),a=Su.intersects(n,i,e),u=Su.intersects(n,i,r);return o&&s?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=n,this._intPt[1]=r,!n.equals(r)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,r,n,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=r.x<n.x?r.x:n.x,l=r.y<n.y?r.y:n.y,f=r.x>n.x?r.x:n.x,h=r.y>n.y?r.y:n.y,p=((o>c?o:c)+(a<f?a:f))/2,d=((s>l?s:l)+(u<h?u:h))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,r.x-=i.x,r.y-=i.y,n.x-=i.x,n.y-=i.y},e.prototype.computeIntersect=function(e,r,n,i){if(this._isProper=!1,!Su.intersects(e,r,n,i))return t.NO_INTERSECTION;var o=Bu.orientationIndex(e,r,n),s=Bu.orientationIndex(e,r,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Bu.orientationIndex(n,i,e),u=Bu.orientationIndex(n,i,r);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,r,n,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:r.equals2D(n)||r.equals2D(i)?this._intPt[0]=r:0===o?this._intPt[0]=new ru(n):0===s?this._intPt[0]=new ru(i):0===a?this._intPt[0]=new ru(e):0===u&&(this._intPt[0]=new ru(r))):(this._isProper=!0,this._intPt[0]=this.intersection(e,r,n,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,r,n){var i=t,o=Bu.distancePointLine(t,r,n),s=Bu.distancePointLine(e,r,n);return s<o&&(o=s,i=e),(s=Bu.distancePointLine(r,t,e))<o&&(o=s,i=r),(s=Bu.distancePointLine(n,t,e))<o&&(o=s,i=n),i},e}(ku),Fu=function(){};Fu.prototype.interfaces_=function(){return[]},Fu.prototype.getClass=function(){return Fu},Fu.orientationIndex=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=r.x-e.x,s=r.y-e.y;return Fu.signOfDet2x2(n,i,o,s)},Fu.signOfDet2x2=function(t,e,r,n){var i=null,o=null,s=null;if(i=1,0===t||0===n)return 0===e||0===r?0:e>0?r>0?-i:i:r>0?i:-i;if(0===e||0===r)return n>0?t>0?i:-i:t>0?-i:i;if(e>0?n>0?e<=n||(i=-i,o=t,t=r,r=o,o=e,e=n,n=o):e<=-n?(i=-i,r=-r,n=-n):(o=t,t=-r,r=o,o=e,e=-n,n=o):n>0?-e<=n?(i=-i,t=-t,e=-e):(o=-t,t=r,r=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,r=-r,n=-n):(i=-i,o=-t,t=-r,r=o,o=-e,e=-n,n=o),t>0){if(!(r>0))return i;if(!(t<=r))return i}else{if(r>0)return-i;if(!(t>=r))return-i;i=-i,t=-t,r=-r}for(;;){if((n-=(s=Math.floor(r/t))*e)<0)return-i;if(n>e)return i;if(t>(r-=s*t)+r){if(e<n+n)return i}else{if(e>n+n)return-i;r=t-r,n=e-n,i=-i}if(0===n)return 0===r?0:-i;if(0===r)return i;if((e-=(s=Math.floor(t/r))*n)<0)return i;if(e>n)return-i;if(r>(t-=s*r)+t){if(n<e+e)return-i}else{if(n>e+e)return i;t=r-t,e=n-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var ju=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};ju.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var r=t.x,n=e.x;return r>n&&(r=e.x,n=t.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Fu.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},ju.prototype.isPointInPolygon=function(){return this.getLocation()!==su.EXTERIOR},ju.prototype.getLocation=function(){return this._isPointOnSegment?su.BOUNDARY:this._crossingCount%2==1?su.INTERIOR:su.EXTERIOR},ju.prototype.isOnSegment=function(){return this._isPointOnSegment},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju},ju.locatePointInRing=function(){if(arguments[0]instanceof ru&&uu(arguments[1],vu)){for(var t=arguments[0],e=arguments[1],r=new ju(t),n=new ru,i=new ru,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,i),r.countSegment(n,i),r.isOnSegment())return r.getLocation();return r.getLocation()}if(arguments[0]instanceof ru&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new ju(s),c=1;c<a.length;c++){var l=a[c],f=a[c-1];if(u.countSegment(l,f),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Bu=function(){},Gu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Bu.prototype.interfaces_=function(){return[]},Bu.prototype.getClass=function(){return Bu},Bu.orientationIndex=function(t,e,r){return yu.orientationIndex(t,e,r)},Bu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,r=t[0].x,n=1;n<t.length-1;n++){var i=t[n].x-r,o=t[n+1].y;e+=i*(t[n-1].y-o)}return e/2}if(uu(arguments[0],vu)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new ru,c=new ru,l=new ru;s.getCoordinate(0,c),s.getCoordinate(1,l);var f=c.x;l.x-=f;for(var h=0,p=1;p<a-1;p++)u.y=c.y,c.x=l.x,c.y=l.y,s.getCoordinate(p+1,l),l.x-=f,h+=c.x*(u.y-l.y);return h/2}},Bu.distanceLineLine=function(t,e,r,n){if(t.equals(e))return Bu.distancePointLine(t,r,n);if(r.equals(n))return Bu.distancePointLine(n,t,e);var i=!1;if(Su.intersects(t,e,r,n)){var o=(e.x-t.x)*(n.y-r.y)-(e.y-t.y)*(n.x-r.x);if(0===o)i=!0;else{var s=(t.y-r.y)*(n.x-r.x)-(t.x-r.x)*(n.y-r.y),a=((t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?cu.min(Bu.distancePointLine(t,r,n),Bu.distancePointLine(e,r,n),Bu.distancePointLine(r,t,e),Bu.distancePointLine(n,t,e)):0},Bu.isPointInRing=function(t,e){return Bu.locatePointInRing(t,e)!==su.EXTERIOR},Bu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var r=0,n=new ru;t.getCoordinate(0,n);for(var i=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,u=n.y,c=a-i,l=u-o;r+=Math.sqrt(c*c+l*l),i=a,o=u}return r},Bu.isCCW=function(t){var e=t.length-1;if(e<3)throw new Za("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],n=0,i=1;i<=e;i++){var o=t[i];o.y>r.y&&(r=o,n=i)}var s=n;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(r)&&s!==n);var a=n;do{a=(a+1)%e}while(t[a].equals2D(r)&&a!==n);var u=t[s],c=t[a];if(u.equals2D(r)||c.equals2D(r)||u.equals2D(c))return!1;var l=Bu.computeOrientation(u,r,c);return 0===l?u.x>c.x:l>0},Bu.locatePointInRing=function(t,e){return ju.locatePointInRing(t,e)},Bu.distancePointLinePerpendicular=function(t,e,r){var n=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),i=((e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y))/n;return Math.abs(i)*Math.sqrt(n)},Bu.computeOrientation=function(t,e,r){return Bu.orientationIndex(t,e,r)},Bu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Za("Line array must contain at least one vertex");for(var r=t.distance(e[0]),n=0;n<e.length-1;n++){var i=Bu.distancePointLine(t,e[n],e[n+1]);i<r&&(r=i)}return r}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},Bu.isOnLine=function(t,e){for(var r=new Du,n=1;n<e.length;n++){var i=e[n-1],o=e[n];if(r.computeIntersection(t,i,o),r.hasIntersection())return!0}return!1},Gu.CLOCKWISE.get=function(){return-1},Gu.RIGHT.get=function(){return Bu.CLOCKWISE},Gu.COUNTERCLOCKWISE.get=function(){return 1},Gu.LEFT.get=function(){return Bu.COUNTERCLOCKWISE},Gu.COLLINEAR.get=function(){return 0},Gu.STRAIGHT.get=function(){return Bu.COLLINEAR},Object.defineProperties(Bu,Gu);var qu=function(){};qu.prototype.filter=function(t){},qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu};var Uu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},zu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Uu.prototype.isGeometryCollection=function(){return this.getSortIndex()===Uu.SORTINDEX_GEOMETRYCOLLECTION},Uu.prototype.getFactory=function(){return this._factory},Uu.prototype.getGeometryN=function(t){return this},Uu.prototype.getArea=function(){return 0},Uu.prototype.isRectangle=function(){return!1},Uu.prototype.equals=function(){if(arguments[0]instanceof Uu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Uu))return!1;var r=e;return this.equalsExact(r)}},Uu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Uu.prototype.geometryChanged=function(){this.apply(Uu.geometryChangedFilter)},Uu.prototype.geometryChangedAction=function(){this._envelope=null},Uu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Uu.prototype.getLength=function(){return 0},Uu.prototype.getNumGeometries=function(){return 1},Uu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var r=arguments[0],n=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,n)}},Uu.prototype.getUserData=function(){return this._userData},Uu.prototype.getSRID=function(){return this._SRID},Uu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Uu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Uu.SORTINDEX_GEOMETRYCOLLECTION)throw new Za("This method does not support GeometryCollection arguments")},Uu.prototype.equal=function(t,e,r){return 0===r?t.equals(e):t.distance(e)<=r},Uu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Uu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Uu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Su(this._envelope)},Uu.prototype.setSRID=function(t){this._SRID=t},Uu.prototype.setUserData=function(t){this._userData=t},Uu.prototype.compare=function(t,e){for(var r=t.iterator(),n=e.iterator();r.hasNext()&&n.hasNext();){var i=r.next(),o=n.next(),s=i.compareTo(o);if(0!==s)return s}return r.hasNext()?1:n.hasNext()?-1:0},Uu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Uu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Uu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Uu.SORTINDEX_MULTIPOINT||this.getSortIndex()===Uu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Uu.SORTINDEX_MULTIPOLYGON},Uu.prototype.interfaces_=function(){return[tu,$a,mi]},Uu.prototype.getClass=function(){return Uu},Uu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Uu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},zu.serialVersionUID.get=function(){return 0x799ea46522854c00},zu.SORTINDEX_POINT.get=function(){return 0},zu.SORTINDEX_MULTIPOINT.get=function(){return 1},zu.SORTINDEX_LINESTRING.get=function(){return 2},zu.SORTINDEX_LINEARRING.get=function(){return 3},zu.SORTINDEX_MULTILINESTRING.get=function(){return 4},zu.SORTINDEX_POLYGON.get=function(){return 5},zu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},zu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},zu.geometryChangedFilter.get=function(){return Yu},Object.defineProperties(Uu,zu);var Yu=function(){};Yu.interfaces_=function(){return[qu]},Yu.filter=function(t){t.geometryChangedAction()};var Vu=function(){};Vu.prototype.filter=function(t){},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu};var Xu=function(){},Wu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Xu.prototype.isInBoundary=function(t){},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu},Wu.Mod2BoundaryNodeRule.get=function(){return Hu},Wu.EndPointBoundaryNodeRule.get=function(){return Ku},Wu.MultiValentEndPointBoundaryNodeRule.get=function(){return Zu},Wu.MonoValentEndPointBoundaryNodeRule.get=function(){return Ju},Wu.MOD2_BOUNDARY_RULE.get=function(){return new Hu},Wu.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ku},Wu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Zu},Wu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ju},Wu.OGC_SFS_BOUNDARY_RULE.get=function(){return Xu.MOD2_BOUNDARY_RULE},Object.defineProperties(Xu,Wu);var Hu=function(){};Hu.prototype.isInBoundary=function(t){return t%2==1},Hu.prototype.interfaces_=function(){return[Xu]},Hu.prototype.getClass=function(){return Hu};var Ku=function(){};Ku.prototype.isInBoundary=function(t){return t>0},Ku.prototype.interfaces_=function(){return[Xu]},Ku.prototype.getClass=function(){return Ku};var Zu=function(){};Zu.prototype.isInBoundary=function(t){return t>1},Zu.prototype.interfaces_=function(){return[Xu]},Zu.prototype.getClass=function(){return Zu};var Ju=function(){};Ju.prototype.isInBoundary=function(t){return 1===t},Ju.prototype.interfaces_=function(){return[Xu]},Ju.prototype.getClass=function(){return Ju};var Qu=function(){};Qu.prototype.add=function(){},Qu.prototype.addAll=function(){},Qu.prototype.isEmpty=function(){},Qu.prototype.iterator=function(){},Qu.prototype.size=function(){},Qu.prototype.toArray=function(){},Qu.prototype.remove=function(){};var $u=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={name:{configurable:!0}};return r.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,r),e}(Error),tc=function(){};tc.prototype.hasNext=function(){},tc.prototype.next=function(){},tc.prototype.remove=function(){};var ec=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Qu);(vi.prototype=new Error).name="NoSuchElementException";var rc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Qu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Qu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var r=this.array_[t];return this.array_[t]=e,r},e.prototype.iterator=function(){return new nc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new $u;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,r=0,n=this.array_.length;r<n;r++)if(this.array_[r]===t){this.array_.splice(r,1),e=!0;break}return e},e}(ec),nc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new vi;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(tc),ic=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.ensureCapacity(r.length),this.add(r,n)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={coordArrayType:{configurable:!0}};return r.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=!1,i=e.iterator();i.hasNext();)this.add(i.next(),r),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=0;r<this.size();r++)e.add(r,this.get(r).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],n=arguments[1];return this.add(r,n,!0),!0}if(arguments[0]instanceof ru&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<a.length;c++)this.add(a[c],u);else for(var l=a.length-1;l>=0;l--)this.add(a[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ru){var f=arguments[0],h=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(f>0&&this.get(f-1).equals2D(h))return null;if(f<p&&this.get(f).equals2D(h))return null}}t.prototype.add.call(this,f,h)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],y=arguments[2],m=arguments[3],v=1;y>m&&(v=-1);for(var _=y;_!==m;_+=v)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ru(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,r),e}(rc),oc=function(){},sc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};sc.ForwardComparator.get=function(){return ac},sc.BidirectionalComparator.get=function(){return uc},sc.coordArrayType.get=function(){return new Array(0).fill(null)},oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},oc.ptNotInList=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(oc.indexOf(n,e)<0)return n}return null},oc.scroll=function(t,e){var r=oc.indexOf(e,t);if(r<0)return null;var n=new Array(t.length).fill(null);xu.arraycopy(t,r,n,0,t.length-r),xu.arraycopy(t,0,n,t.length-r,r),xu.arraycopy(n,0,t,0,t.length)},oc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(e[r]))return!1;return!0}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];if(n===i)return!0;if(null===n||null===i)return!1;if(n.length!==i.length)return!1;for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],i[s]))return!1;return!0}},oc.intersection=function(t,e){for(var r=new ic,n=0;n<t.length;n++)e.intersects(t[n])&&r.add(t[n],!0);return r.toCoordinateArray()},oc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},oc.removeRepeatedPoints=function(t){return oc.hasRepeatedPoints(t)?new ic(t,!1).toCoordinateArray():t},oc.reverse=function(t){for(var e=t.length-1,r=Math.trunc(e/2),n=0;n<=r;n++){var i=t[n];t[n]=t[e-n],t[e-n]=i}},oc.removeNull=function(t){for(var e=0,r=0;r<t.length;r++)null!==t[r]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(n[i++]=t[o]);return n},oc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),r=0;r<t.length;r++)e[r]=new ru(t[r]);return e}if(5===arguments.length)for(var n=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ru(n[i+u])},oc.isEqualReversed=function(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=e[t.length-r-1];if(0!==n.compareTo(i))return!1}return!0},oc.envelope=function(t){for(var e=new Su,r=0;r<t.length;r++)e.expandToInclude(t[r]);return e},oc.toCoordinateArray=function(t){return t.toArray(oc.coordArrayType)},oc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},oc.indexOf=function(t,e){for(var r=0;r<e.length;r++)if(t.equals(e[r]))return r;return-1},oc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t.length-1-e,n=t[e].compareTo(t[r]);if(0!==n)return n}return 1},oc.compare=function(t,e){for(var r=0;r<t.length&&r<e.length;){var n=t[r].compareTo(e[r]);if(0!==n)return n;r++}return r<e.length?-1:r<t.length?1:0},oc.minCoordinate=function(t){for(var e=null,r=0;r<t.length;r++)(null===e||e.compareTo(t[r])>0)&&(e=t[r]);return e},oc.extract=function(t,e,r){e=cu.clamp(e,0,t.length);var n=(r=cu.clamp(r,-1,t.length))-e+1;r<0&&(n=0),e>=t.length&&(n=0),r<e&&(n=0);var i=new Array(n).fill(null);if(0===n)return i;for(var o=0,s=e;s<=r;s++)i[o++]=t[s];return i},Object.defineProperties(oc,sc);var ac=function(){};ac.prototype.compare=function(t,e){return oc.compare(t,e)},ac.prototype.interfaces_=function(){return[eu]},ac.prototype.getClass=function(){return ac};var uc=function(){};uc.prototype.compare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;var i=oc.compare(r,n);return oc.isEqualReversed(r,n)?0:i},uc.prototype.OLDcompare=function(t,e){var r=t,n=e;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;for(var i=oc.increasingDirection(r),o=oc.increasingDirection(n),s=i>0?0:r.length-1,a=o>0?0:r.length-1,u=0;u<r.length;u++){var c=r[s].compareTo(n[a]);if(0!==c)return c;s+=i,a+=o}return 0},uc.prototype.interfaces_=function(){return[eu]},uc.prototype.getClass=function(){return uc};var cc=function(){};cc.prototype.get=function(){},cc.prototype.put=function(){},cc.prototype.size=function(){},cc.prototype.values=function(){},cc.prototype.entrySet=function(){};var lc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cc);(_i.prototype=new Error).name="OperationNotSupported",(bi.prototype=new Qu).contains=function(){};var fc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Qu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new hc(this)},e}(bi),hc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new vi;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new _i},e}(tc),pc=0;(Ii.prototype=new lc).get=function(t){for(var e=this.root_;null!==e;){var r=t.compareTo(e.key);if(r<0)e=e.left;else{if(!(r>0))return e.value;e=e.right}}return null},Ii.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:pc,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var r,n,i=this.root_;do{if(r=i,(n=t.compareTo(i.key))<0)i=i.left;else{if(!(n>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:r,color:pc,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?r.left=s:r.right=s,this.fixAfterInsertion(s),this.size_++,null},Ii.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(xi(t)===Si(xi(xi(t)))){var e=Ci(xi(xi(t)));1===wi(e)?(Ei(xi(t),pc),Ei(e,pc),Ei(xi(xi(t)),1),t=xi(xi(t))):(t===Ci(xi(t))&&(t=xi(t),this.rotateLeft(t)),Ei(xi(t),pc),Ei(xi(xi(t)),1),this.rotateRight(xi(xi(t))))}else{var r=Si(xi(xi(t)));1===wi(r)?(Ei(xi(t),pc),Ei(r,pc),Ei(xi(xi(t)),1),t=xi(xi(t))):(t===Si(xi(t))&&(t=xi(t),this.rotateRight(t)),Ei(xi(t),pc),Ei(xi(xi(t)),1),this.rotateLeft(xi(xi(t))))}this.root_.color=pc},Ii.prototype.values=function(){var t=new rc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Ii.successor(e));)t.add(e.value);return t},Ii.prototype.entrySet=function(){var t=new fc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Ii.successor(e));)t.add(e);return t},Ii.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Ii.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Ii.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Ii.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var r=t.parent,n=t;null!==r&&n===r.right;)n=r,r=r.parent;return r},Ii.prototype.size=function(){return this.size_};var dc=function(){};dc.prototype.interfaces_=function(){return[]},dc.prototype.getClass=function(){return dc},Pi.prototype=new bi,(Mi.prototype=new Pi).contains=function(t){for(var e=0,r=this.array_.length;e<r;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Mi.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,r=this.array_.length;e<r;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Mi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Mi.prototype.remove=function(t){throw new _i},Mi.prototype.size=function(){return this.array_.length},Mi.prototype.isEmpty=function(){return 0===this.array_.length},Mi.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t},Mi.prototype.iterator=function(){return new gc(this)};var gc=function(t){this.treeSet_=t,this.position_=0};gc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new vi;return this.treeSet_.array_[this.position_++]},gc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},gc.prototype.remove=function(){throw new _i};var yc=function(){};yc.sort=function(){var t,e,r,n,i=arguments[0];if(1===arguments.length)n=function(t,e){return t.compareTo(e)},i.sort(n);else if(2===arguments.length)r=arguments[1],n=function(t,e){return r.compare(t,e)},i.sort(n);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),r=arguments[3],n=function(t,e){return r.compare(t,e)},e.sort(n),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},yc.asList=function(t){for(var e=new rc,r=0,n=t.length;r<n;r++)e.add(t[r]);return e};var mc=function(){},vc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};vc.P.get=function(){return 0},vc.L.get=function(){return 1},vc.A.get=function(){return 2},vc.FALSE.get=function(){return-1},vc.TRUE.get=function(){return-2},vc.DONTCARE.get=function(){return-3},vc.SYM_FALSE.get=function(){return"F"},vc.SYM_TRUE.get=function(){return"T"},vc.SYM_DONTCARE.get=function(){return"*"},vc.SYM_P.get=function(){return"0"},vc.SYM_L.get=function(){return"1"},vc.SYM_A.get=function(){return"2"},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc},mc.toDimensionSymbol=function(t){switch(t){case mc.FALSE:return mc.SYM_FALSE;case mc.TRUE:return mc.SYM_TRUE;case mc.DONTCARE:return mc.SYM_DONTCARE;case mc.P:return mc.SYM_P;case mc.L:return mc.SYM_L;case mc.A:return mc.SYM_A}throw new Za("Unknown dimension value: "+t)},mc.toDimensionValue=function(t){switch(pu.toUpperCase(t)){case mc.SYM_FALSE:return mc.FALSE;case mc.SYM_TRUE:return mc.TRUE;case mc.SYM_DONTCARE:return mc.DONTCARE;case mc.SYM_P:return mc.P;case mc.SYM_L:return mc.L;case mc.SYM_A:return mc.A}throw new Za("Unknown dimension symbol: "+t)},Object.defineProperties(mc,vc);var _c=function(){};_c.prototype.filter=function(t){},_c.prototype.interfaces_=function(){return[]},_c.prototype.getClass=function(){return _c};var bc=function(){};bc.prototype.filter=function(t,e){},bc.prototype.isDone=function(){},bc.prototype.isGeometryChanged=function(){},bc.prototype.interfaces_=function(){return[]},bc.prototype.getClass=function(){return bc};var wc=function(t){function e(e,r){if(t.call(this,r),this._geometries=e||[],t.hasNullElements(this._geometries))throw new Za("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Su,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=0;r<this._geometries.length;r++)for(var n=this._geometries[r].getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(n._geometries[i],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();yc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=mc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=mc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Mi(yc.asList(this._geometries)),r=new Mi(yc.asList(t._geometries));return this.compare(e,r)}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o=n,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var c=this.getGeometryN(u),l=o.getGeometryN(u),f=c.compareToSameClass(l,i);if(0!==f)return f;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){if(uu(arguments[0],Vu))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(uu(arguments[0],bc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var n=0;n<this._geometries.length&&(this._geometries[n].apply(r),!r.isDone());n++);r.isGeometryChanged()&&this.geometryChanged()}else if(uu(arguments[0],_c)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(uu(arguments[0],qu)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Ru.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)e._geometries[r]=this._geometries[r].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,r),e}(Uu),xc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?mc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[t-1-r]=this._geometries[r].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ec(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[dc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,r),e}(wc),Ec=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Xu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=n}};Ec.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ec.prototype.getBoundary=function(){return this._geom instanceof Mc?this.boundaryLineString(this._geom):this._geom instanceof xc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ec.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ec.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ec.prototype.computeBoundaryCoordinates=function(t){var e=new rc;this._endpointMap=new Ii;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return oc.toCoordinateArray(e)},Ec.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Sc,this._endpointMap.put(t,e)),e.count++},Ec.prototype.interfaces_=function(){return[]},Ec.prototype.getClass=function(){return Ec},Ec.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Ec(t).getBoundary()}if(2===arguments.length){var e=arguments[0],r=arguments[1];return new Ec(e,r).getBoundary()}};var Sc=function(){this.count=null};Sc.prototype.interfaces_=function(){return[]},Sc.prototype.getClass=function(){return Sc};var Cc=function(){},Ic={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Cc.prototype.interfaces_=function(){return[]},Cc.prototype.getClass=function(){return Cc},Cc.chars=function(t,e){for(var r=new Array(e).fill(null),n=0;n<e;n++)r[n]=t;return String(r)},Cc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},r=new function(){}(e);return t.printStackTrace(r),e.toString()}if(2===arguments.length){for(var n=arguments[0],i=arguments[1],o="",s=new function(){}(new function(){}(Cc.getStackTrace(n))),a=0;a<i;a++)try{o+=s.readLine()+Cc.NEWLINE}catch(t){if(!(t instanceof Ni))throw t;Ru.shouldNeverReachHere()}return o}},Cc.split=function(t,e){for(var r=e.length,n=new rc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);n.add(s),o=(i=i.substring(o+r)).indexOf(e)}i.length>0&&n.add(i);for(var a=new Array(n.size()).fill(null),u=0;u<a.length;u++)a[u]=n.get(u);return a},Cc.toString=function(){if(1===arguments.length){var t=arguments[0];return Cc.SIMPLE_ORDINATE_FORMAT.format(t)}},Cc.spaces=function(t){return Cc.chars(" ",t)},Ic.NEWLINE.get=function(){return xu.getProperty("line.separator")},Ic.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Cc,Ic);var Pc=function(){};Pc.prototype.interfaces_=function(){return[]},Pc.prototype.getClass=function(){return Pc},Pc.copyCoord=function(t,e,r,n){for(var i=Math.min(t.getDimension(),r.getDimension()),o=0;o<i;o++)r.setOrdinate(n,o,t.getOrdinate(e,o))},Pc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,vu.X)===t.getOrdinate(e-1,vu.X)&&t.getOrdinate(0,vu.Y)===t.getOrdinate(e-1,vu.Y)},Pc.isEqual=function(t,e){var r=t.size();if(r!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),i=0;i<r;i++)for(var o=0;o<n;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||Ja.isNaN(s)&&Ja.isNaN(a)))return!1}return!0},Pc.extend=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();if(Pc.copy(e,0,n,0,i),i>0)for(var o=i;o<r;o++)Pc.copy(e,i-1,n,o,1);return n},Pc.reverse=function(t){for(var e=t.size()-1,r=Math.trunc(e/2),n=0;n<=r;n++)Pc.swap(t,n,e-n)},Pc.swap=function(t,e,r){if(e===r)return null;for(var n=0;n<t.getDimension();n++){var i=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(r,n)),t.setOrdinate(r,n,i)}},Pc.copy=function(t,e,r,n,i){for(var o=0;o<i;o++)Pc.copyCoord(t,e+o,r,n+o)},Pc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var r=t.getDimension(),n=new fu;n.append("(");for(var i=0;i<e;i++){i>0&&n.append(" ");for(var o=0;o<r;o++)o>0&&n.append(","),n.append(Cc.toString(t.getOrdinate(i,o)))}return n.append(")"),n.toString()}},Pc.ensureValidRing=function(t,e){var r=e.size();return 0===r?e:r<=3?Pc.createClosedRing(t,e,4):e.getOrdinate(0,vu.X)===e.getOrdinate(r-1,vu.X)&&e.getOrdinate(0,vu.Y)===e.getOrdinate(r-1,vu.Y)?e:Pc.createClosedRing(t,e,r+1)},Pc.createClosedRing=function(t,e,r){var n=t.create(r,e.getDimension()),i=e.size();Pc.copy(e,0,n,0,i);for(var o=i;o<r;o++)Pc.copy(e,0,n,o,1);return n};var Mc=function(t){function e(e,r){t.call(this,r),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Su:this._points.expandEnvelope(new Su)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),n._points.getCoordinate(i),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Pc.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?mc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Bu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Pc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,r=0;e<this._points.size()&&r<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));if(0!==n)return n;e++,r++}return e<this._points.size()?1:r<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(uu(arguments[0],Vu))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(uu(arguments[0],bc)){var r=arguments[0];if(0===this._points.size())return null;for(var n=0;n<this._points.size()&&(r.filter(this._points,n),!r.isDone());n++);r.isGeometryChanged()&&this.geometryChanged()}else uu(arguments[0],_c)?arguments[0].filter(this):uu(arguments[0],qu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ec(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new Za("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[dc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,r),e}(Uu),Nc=function(){};Nc.prototype.interfaces_=function(){return[]},Nc.prototype.getClass=function(){return Nc};var Tc=function(t){function e(e,r){t.call(this,r),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Su;var t=new Su;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return mc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(uu(arguments[0],Vu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(uu(arguments[0],bc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else uu(arguments[0],_c)?arguments[0].filter(this):uu(arguments[0],qu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Ru.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Nc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,r),e}(Uu),Oc=function(){};Oc.prototype.interfaces_=function(){return[]},Oc.prototype.getClass=function(){return Oc};var Lc=function(t){function e(e,r,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new Za("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(r))throw new Za("shell is empty but holes are not");this._shell=e,this._holes=r}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,r=this._shell.getCoordinates(),n=0;n<r.length;n++)t[++e]=r[n];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Bu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Bu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),r=0;r<5;r++){var n=t.getX(r);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var i=t.getY(r);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a);if(u!==o==(c!==s))return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,i=this._shell,o=n._shell;if(!i.equalsExact(o,r))return!1;if(this._holes.length!==n._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(n._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);yc.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(e.isEmpty())return null;var n=new Array(e.getCoordinates().length-1).fill(null);xu.arraycopy(e.getCoordinates(),0,n,0,n.length);var i=oc.minCoordinate(e.getCoordinates());oc.scroll(n,i),xu.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],Bu.isCCW(e.getCoordinates())===r&&oc.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,r=t._shell;return e.compareToSameClass(r)}if(2===arguments.length){var n=arguments[0],i=arguments[1],o=n,s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var c=this.getNumInteriorRing(),l=o.getNumInteriorRing(),f=0;f<c&&f<l;){var h=this.getInteriorRingN(f),p=o.getInteriorRingN(f),d=h.compareToSameClass(p,i);if(0!==d)return d;f++}return f<c?1:f<l?-1:0}},e.prototype.apply=function(t){if(uu(t,Vu)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(uu(t,bc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(uu(t,_c))t.filter(this);else if(uu(t,qu)){t.filter(this),this._shell.apply(t);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)e._holes[r]=this._holes[r].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),r=new Array(this._holes.length).fill(null),n=0;n<r.length;n++)r[n]=this._holes[n].copy();return new e(t,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Oc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,r),e}(Uu),Rc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return mc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,r),e}(wc),kc=function(t){function e(e,r){e instanceof ru&&r instanceof Zc&&(e=r.getCoordinateSequenceFactory().create(e)),t.call(this,e,r),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return mc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Pc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Za("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Za("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.MINIMUM_VALID_SIZE.get=function(){return 4},r.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,r),e}(Mc),Ac=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Uu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),r=0;r<this._geometries.length;r++)e[r]=this._geometries[r].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new rc,e=0;e<this._geometries.length;e++)for(var r=this._geometries[e].getBoundary(),n=0;n<r.getNumGeometries();n++)t.add(r.getGeometryN(n));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),r=0;r<t.length;r++)t[r]=this._geometries[r].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Oc]},e.prototype.getClass=function(){return e},r.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,r),e}(wc),Dc=function(t){this._factory=t||null,this._isUserDataCopied=!1},Fc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Dc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Dc.prototype.edit=function(t,e){if(null===t)return null;var r=this.editInternal(t,e);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r},Dc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof wc?this.editGeometryCollection(t,e):t instanceof Lc?this.editPolygon(t,e):t instanceof Tc?e.edit(t,this._factory):t instanceof Mc?e.edit(t,this._factory):(Ru.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Dc.prototype.editGeometryCollection=function(t,e){for(var r=e.edit(t,this._factory),n=new rc,i=0;i<r.getNumGeometries();i++){var o=this.edit(r.getGeometryN(i),e);null===o||o.isEmpty()||n.add(o)}return r.getClass()===Rc?this._factory.createMultiPoint(n.toArray([])):r.getClass()===xc?this._factory.createMultiLineString(n.toArray([])):r.getClass()===Ac?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},Dc.prototype.editPolygon=function(t,e){var r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var n=this.edit(r.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var i=new rc,o=0;o<r.getNumInteriorRing();o++){var s=this.edit(r.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(n,i.toArray([]))},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc},Dc.GeometryEditorOperation=function(){},Fc.NoOpGeometryOperation.get=function(){return jc},Fc.CoordinateOperation.get=function(){return Bc},Fc.CoordinateSequenceOperation.get=function(){return Gc},Object.defineProperties(Dc,Fc);var jc=function(){};jc.prototype.edit=function(t,e){return t},jc.prototype.interfaces_=function(){return[Dc.GeometryEditorOperation]},jc.prototype.getClass=function(){return jc};var Bc=function(){};Bc.prototype.edit=function(t,e){var r=this.editCoordinates(t.getCoordinates(),t);return null===r?t:t instanceof kc?e.createLinearRing(r):t instanceof Mc?e.createLineString(r):t instanceof Tc?r.length>0?e.createPoint(r[0]):e.createPoint():t},Bc.prototype.interfaces_=function(){return[Dc.GeometryEditorOperation]},Bc.prototype.getClass=function(){return Bc};var Gc=function(){};Gc.prototype.edit=function(t,e){return t instanceof kc?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Mc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Tc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Gc.prototype.interfaces_=function(){return[Dc.GeometryEditorOperation]},Gc.prototype.getClass=function(){return Gc};var qc=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new ru}else if(uu(arguments[0],vu)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var n=0;n<this._coordinates.length;n++)this._coordinates[n]=r.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var u=0;u<s;u++)this._coordinates[u]=new ru}},Uc={serialVersionUID:{configurable:!0}};qc.prototype.setOrdinate=function(t,e,r){switch(e){case vu.X:this._coordinates[t].x=r;break;case vu.Y:this._coordinates[t].y=r;break;case vu.Z:this._coordinates[t].z=r;break;default:throw new Za("invalid ordinateIndex")}},qc.prototype.size=function(){return this._coordinates.length},qc.prototype.getOrdinate=function(t,e){switch(e){case vu.X:return this._coordinates[t].x;case vu.Y:return this._coordinates[t].y;case vu.Z:return this._coordinates[t].z}return Ja.NaN},qc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],r=arguments[1];r.x=this._coordinates[e].x,r.y=this._coordinates[e].y,r.z=this._coordinates[e].z}},qc.prototype.getCoordinateCopy=function(t){return new ru(this._coordinates[t])},qc.prototype.getDimension=function(){return this._dimension},qc.prototype.getX=function(t){return this._coordinates[t].x},qc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new qc(t,this._dimension)},qc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},qc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new qc(t,this._dimension)},qc.prototype.toString=function(){if(this._coordinates.length>0){var t=new fu(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},qc.prototype.getY=function(t){return this._coordinates[t].y},qc.prototype.toCoordinateArray=function(){return this._coordinates},qc.prototype.interfaces_=function(){return[vu,mi]},qc.prototype.getClass=function(){return qc},Uc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(qc,Uc);var zc=function(){},Yc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};zc.prototype.readResolve=function(){return zc.instance()},zc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new qc(t)}if(uu(arguments[0],vu)){var e=arguments[0];return new qc(e)}}else if(2===arguments.length){var r=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new qc(r):new qc(r,n)}},zc.prototype.interfaces_=function(){return[ou,mi]},zc.prototype.getClass=function(){return zc},zc.instance=function(){return zc.instanceObject},Yc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Yc.instanceObject.get=function(){return new zc},Object.defineProperties(zc,Yc);var Vc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new rc,e=this.map_.values(),r=e.next();!r.done;)t.add(r.value),r=e.next();return t},e.prototype.entrySet=function(){var t=new fc;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(cc),Xc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Hc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var r=arguments[0];this._modelType=t.FIXED,this.setScale(r)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},Wc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Xc.prototype.equals=function(t){if(!(t instanceof Xc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Xc.prototype.compareTo=function(t){var e=t,r=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new hu(r).compareTo(new hu(n))},Xc.prototype.getScale=function(){return this._scale},Xc.prototype.isFloating=function(){return this._modelType===Xc.FLOATING||this._modelType===Xc.FLOATING_SINGLE},Xc.prototype.getType=function(){return this._modelType},Xc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Xc.FLOATING?t="Floating":this._modelType===Xc.FLOATING_SINGLE?t="Floating-Single":this._modelType===Xc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Xc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Ja.isNaN(t)?t:this._modelType===Xc.FLOATING_SINGLE?t:this._modelType===Xc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ru){var e=arguments[0];if(this._modelType===Xc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Xc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Xc.FLOATING?t=16:this._modelType===Xc.FLOATING_SINGLE?t=6:this._modelType===Xc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Xc.prototype.setScale=function(t){this._scale=Math.abs(t)},Xc.prototype.interfaces_=function(){return[mi,$a]},Xc.prototype.getClass=function(){return Xc},Xc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Wc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Wc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Xc,Wc);var Hc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Kc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Hc.prototype.readResolve=function(){return Hc.nameToTypeMap.get(this._name)},Hc.prototype.toString=function(){return this._name},Hc.prototype.interfaces_=function(){return[mi]},Hc.prototype.getClass=function(){return Hc},Kc.serialVersionUID.get=function(){return-552860263173159e4},Kc.nameToTypeMap.get=function(){return new Vc},Object.defineProperties(Hc,Kc),Xc.Type=Hc,Xc.FIXED=new Hc("FIXED"),Xc.FLOATING=new Hc("FLOATING"),Xc.FLOATING_SINGLE=new Hc("FLOATING SINGLE");var Zc=function t(){this._precisionModel=new Xc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?uu(arguments[0],ou)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Xc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Jc={serialVersionUID:{configurable:!0}};Zc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ru(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ru(t.getMinX(),t.getMinY()),new ru(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ru(t.getMinX(),t.getMinY()),new ru(t.getMinX(),t.getMaxY()),new ru(t.getMaxX(),t.getMaxY()),new ru(t.getMaxX(),t.getMinY()),new ru(t.getMinX(),t.getMinY())]),null)},Zc.prototype.createLineString=function(t){return t?t instanceof Array?new Mc(this.getCoordinateSequenceFactory().create(t),this):uu(t,vu)?new Mc(t,this):void 0:new Mc(this.getCoordinateSequenceFactory().create([]),this)},Zc.prototype.createMultiLineString=function(){if(0===arguments.length)return new xc(null,this);if(1===arguments.length){var t=arguments[0];return new xc(t,this)}},Zc.prototype.buildGeometry=function(t){for(var e=null,r=!1,n=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(r=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(Zc.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Lc)return this.createMultiPolygon(Zc.toPolygonArray(t));if(a instanceof Mc)return this.createMultiLineString(Zc.toLineStringArray(t));if(a instanceof Tc)return this.createMultiPoint(Zc.toPointArray(t));Ru.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Zc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Zc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ru){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(uu(arguments[0],vu)){var e=arguments[0];return new Tc(e,this)}}},Zc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Zc.prototype.createPolygon=function(){if(0===arguments.length)return new Lc(null,null,this);if(1===arguments.length){if(uu(arguments[0],vu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof kc){var r=arguments[0];return this.createPolygon(r,null)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return new Lc(n,i,this)}},Zc.prototype.getSRID=function(){return this._SRID},Zc.prototype.createGeometryCollection=function(){if(0===arguments.length)return new wc(null,this);if(1===arguments.length){var t=arguments[0];return new wc(t,this)}},Zc.prototype.createGeometry=function(t){return new Dc(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Zc.prototype.getPrecisionModel=function(){return this._precisionModel},Zc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(uu(arguments[0],vu)){var e=arguments[0];return new kc(e,this)}}},Zc.prototype.createMultiPolygon=function(){if(0===arguments.length)return new Ac(null,this);if(1===arguments.length){var t=arguments[0];return new Ac(t,this)}},Zc.prototype.createMultiPoint=function(){if(0===arguments.length)return new Rc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Rc(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(uu(arguments[0],vu)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(r.size()).fill(null),i=0;i<r.size();i++){var o=this.getCoordinateSequenceFactory().create(1,r.getDimension());Pc.copy(r,i,o,0,1),n[i]=this.createPoint(o)}return this.createMultiPoint(n)}}},Zc.prototype.interfaces_=function(){return[mi]},Zc.prototype.getClass=function(){return Zc},Zc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.getDefaultCoordinateSequenceFactory=function(){return zc.instance()},Zc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Zc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Jc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Zc,Jc);var Qc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],$c=function(t){this.geometryFactory=t||new Zc};$c.prototype.read=function(t){var e,r=(e="string"==typeof t?JSON.parse(t):t).type;if(!tl[r])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Qc.indexOf(r)?tl[r].apply(this,[e.coordinates]):"GeometryCollection"===r?tl[r].apply(this,[e.geometries]):tl[r].apply(this,[e])},$c.prototype.write=function(t){var e=t.getGeometryType();if(!el[e])throw new Error("Geometry is not supported");return el[e].apply(this,[t])};var tl={Feature:function(t){var e={};for(var r in t)e[r]=t[r];if(t.geometry){var n=t.geometry.type;if(!tl[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=tl.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var r=0;r<t.features.length;++r)e.features.push(this.read(t.features[r]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(new ru(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ru(t[0],t[1]),new ru(t[2],t[1]),new ru(t[2],t[3]),new ru(t[0],t[3]),new ru(t[0],t[1])])},Point:function(t){var e=new ru(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],r=0;r<t.length;++r)e.push(tl.Point.apply(this,[t[r]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=tl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],r=0;r<t.length;++r)e.push(tl.LineString.apply(this,[t[r]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=tl.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(e),n=[],i=1;i<t.length;++i){var o=t[i],s=tl.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(tl.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},el={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:el.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=el.Point.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],r=t.getCoordinates(),n=0;n<r.length;++n){var i=r[n];e.push(el.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=el.LineString.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],r=el.LineString.apply(this,[t._shell]);e.push(r.coordinates);for(var n=0;n<t._holes.length;++n){var i=t._holes[n],o=el.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=el.Polygon.apply(this,[n]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],r=0;r<t._geometries.length;++r){var n=t._geometries[r],i=n.getGeometryType();e.push(el[i].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},rl=function(t){this.geometryFactory=t||new Zc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new $c(this.geometryFactory)};rl.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Xc.FIXED&&this.reducePrecision(e),e},rl.prototype.reducePrecision=function(t){var e,r;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,r=t.points.length;e<r;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,r=t.geometries.length;e<r;e++)this.reducePrecision(t.geometries[e])};var nl=function(){this.parser=new $c(this.geometryFactory)};nl.prototype.write=function(t){return this.parser.write(t)};var il=function(){},ol={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};il.prototype.interfaces_=function(){return[]},il.prototype.getClass=function(){return il},il.opposite=function(t){return t===il.LEFT?il.RIGHT:t===il.RIGHT?il.LEFT:t},ol.ON.get=function(){return 0},ol.LEFT.get=function(){return 1},ol.RIGHT.get=function(){return 2},Object.defineProperties(il,ol),(Ti.prototype=new Error).name="EmptyStackException",(Oi.prototype=new ec).add=function(t){return this.array_.push(t),!0},Oi.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Oi.prototype.push=function(t){return this.array_.push(t),t},Oi.prototype.pop=function(t){if(0===this.array_.length)throw new Ti;return this.array_.pop()},Oi.prototype.peek=function(){if(0===this.array_.length)throw new Ti;return this.array_[this.array_.length-1]},Oi.prototype.empty=function(){return 0===this.array_.length},Oi.prototype.isEmpty=function(){return this.empty()},Oi.prototype.search=function(t){return this.array_.indexOf(t)},Oi.prototype.size=function(){return this.array_.length},Oi.prototype.toArray=function(){for(var t=[],e=0,r=this.array_.length;e<r;e++)t.push(this.array_[e]);return t};var sl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};sl.prototype.getCoordinate=function(){return this._minCoord},sl.prototype.getRightmostSide=function(t,e){var r=this.getRightmostSideOfSegment(t,e);return r<0&&(r=this.getRightmostSideOfSegment(t,e-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r},sl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Ru.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],r=t[this._minIndex+1],n=Bu.computeOrientation(this._minCoord,r,e),i=!1;e.y<this._minCoord.y&&r.y<this._minCoord.y&&n===Bu.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&r.y>this._minCoord.y&&n===Bu.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},sl.prototype.getRightmostSideOfSegment=function(t,e){var r=t.getEdge().getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var n=il.LEFT;return r[e].y<r[e+1].y&&(n=il.RIGHT),n},sl.prototype.getEdge=function(){return this._orientedDe},sl.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),r=0;r<e.length-1;r++)(null===this._minCoord||e[r].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=r,this._minCoord=e[r])},sl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},sl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();r.isForward()&&this.checkForRightmostCoordinate(r)}Ru.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===il.LEFT&&(this._orientedDe=this._minDe.getSym())},sl.prototype.interfaces_=function(){return[]},sl.prototype.getClass=function(){return sl};var al=function(t){function e(r,n){t.call(this,e.msgWithCoord(r,n)),this.pt=n?new ru(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Ou),ul=function(){this.array_=[]};ul.prototype.addLast=function(t){this.array_.push(t)},ul.prototype.removeFirst=function(){return this.array_.shift()},ul.prototype.isEmpty=function(){return 0===this.array_.length};var cl=function(){this._finder=null,this._dirEdgeList=new rc,this._nodes=new rc,this._rightMostCoord=null,this._env=null,this._finder=new sl};cl.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},cl.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},cl.prototype.computeNodeDepth=function(t){for(var e=null,r=t.getEdges().iterator();r.hasNext();){var n=r.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new al("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},cl.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(il.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},cl.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},cl.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(il.RIGHT)>=1&&e.getDepth(il.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},cl.prototype.computeDepths=function(t){var e=new fc,r=new ul,n=t.getNode();for(r.addLast(n),e.add(n),t.setVisited(!0);!r.isEmpty();){var i=r.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(r.addLast(a),e.add(a))}}}},cl.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},cl.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Su,e=this._dirEdgeList.iterator();e.hasNext();)for(var r=e.next().getEdge().getCoordinates(),n=0;n<r.length-1;n++)t.expandToInclude(r[n]);this._env=t}return this._env},cl.prototype.addReachable=function(t){var e=new Oi;for(e.add(t);!e.empty();){var r=e.pop();this.add(r,e)}},cl.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(il.LEFT,t.getDepth(il.RIGHT)),e.setDepth(il.RIGHT,t.getDepth(il.LEFT))},cl.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var n=r.next();this._dirEdgeList.add(n);var i=n.getSym().getNode();i.isVisited()||e.push(i)}},cl.prototype.getNodes=function(){return this._nodes},cl.prototype.getDirectedEdges=function(){return this._dirEdgeList},cl.prototype.interfaces_=function(){return[$a]},cl.prototype.getClass=function(){return cl};var ll=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[il.ON]=r}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[il.ON]=o,this.location[il.LEFT]=s,this.location[il.RIGHT]=a}};ll.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},ll.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==su.NONE)return!1;return!0},ll.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===su.NONE&&(this.location[e]=t)},ll.prototype.isLine=function(){return 1===this.location.length},ll.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[il.ON]=this.location[il.ON],e[il.LEFT]=su.NONE,e[il.RIGHT]=su.NONE,this.location=e}for(var r=0;r<this.location.length;r++)this.location[r]===su.NONE&&r<t.location.length&&(this.location[r]=t.location[r])},ll.prototype.getLocations=function(){return this.location},ll.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[il.LEFT];this.location[il.LEFT]=this.location[il.RIGHT],this.location[il.RIGHT]=t},ll.prototype.toString=function(){var t=new fu;return this.location.length>1&&t.append(su.toLocationSymbol(this.location[il.LEFT])),t.append(su.toLocationSymbol(this.location[il.ON])),this.location.length>1&&t.append(su.toLocationSymbol(this.location[il.RIGHT])),t.toString()},ll.prototype.setLocations=function(t,e,r){this.location[il.ON]=t,this.location[il.LEFT]=e,this.location[il.RIGHT]=r},ll.prototype.get=function(t){return t<this.location.length?this.location[t]:su.NONE},ll.prototype.isArea=function(){return this.location.length>1},ll.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===su.NONE)return!0;return!1},ll.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(il.ON,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.location[e]=r}},ll.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(su.NONE)},ll.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},ll.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},ll.prototype.interfaces_=function(){return[]},ll.prototype.getClass=function(){return ll};var fl=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new ll(e),this.elt[1]=new ll(e)}else if(arguments[0]instanceof t){var r=arguments[0];this.elt[0]=new ll(r.elt[0]),this.elt[1]=new ll(r.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new ll(su.NONE),this.elt[1]=new ll(su.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new ll(o,s,a),this.elt[1]=new ll(o,s,a)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],f=arguments[3];this.elt[0]=new ll(su.NONE,su.NONE,su.NONE),this.elt[1]=new ll(su.NONE,su.NONE,su.NONE),this.elt[u].setLocations(c,l,f)}};fl.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},fl.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},fl.prototype.isNull=function(t){return this.elt[t].isNull()},fl.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.elt[e].setAllLocationsIfNull(r)}},fl.prototype.isLine=function(t){return this.elt[t].isLine()},fl.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new ll(t.elt[e]):this.elt[e].merge(t.elt[e])},fl.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},fl.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(il.ON)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return this.elt[e].get(r)}},fl.prototype.toString=function(){var t=new fu;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},fl.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},fl.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},fl.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(il.ON,e)}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this.elt[r].setLocation(n,i)}},fl.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},fl.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},fl.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new ll(this.elt[t].location[0]))},fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.toLineLabel=function(t){for(var e=new fl(su.NONE),r=0;r<2;r++)e.setLocation(r,t.getLocation(r));return e};var hl=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new rc,this._pts=new rc,this._label=new fl(su.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new rc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};hl.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Bu.isCCW(this._ring.getCoordinates())},hl.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},hl.prototype.computePoints=function(t){this._startDe=t;var e=t,r=!0;do{if(null===e)throw new al("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new al("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();Ru.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),r),r=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},hl.prototype.getLinearRing=function(){return this._ring},hl.prototype.getCoordinate=function(t){return this._pts.get(t)},hl.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},hl.prototype.addPoints=function(t,e,r){var n=t.getCoordinates();if(e){var i=1;r&&(i=0);for(var o=i;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2;r&&(s=n.length-1);for(var a=s;a>=0;a--)this._pts.add(n[a])}},hl.prototype.isHole=function(){return this._isHole},hl.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},hl.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Bu.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();)if(r.next().containsPoint(t))return!1;return!0},hl.prototype.addHole=function(t){this._holes.add(t)},hl.prototype.isShell=function(){return null===this._shell},hl.prototype.getLabel=function(){return this._label},hl.prototype.getEdges=function(){return this._edges},hl.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},hl.prototype.getShell=function(){return this._shell},hl.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=e.getLocation(r,il.RIGHT);if(n===su.NONE)return null;if(this._label.getLocation(r)===su.NONE)return this._label.setLocation(r,n),null}},hl.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},hl.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)e[r]=this._holes.get(r).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var pl=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hl),dl=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new rc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var r=new pl(e,this._geometryFactory);t.add(r)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hl),gl=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};gl.prototype.setVisited=function(t){this._isVisited=t},gl.prototype.setInResult=function(t){this._isInResult=t},gl.prototype.isCovered=function(){return this._isCovered},gl.prototype.isCoveredSet=function(){return this._isCoveredSet},gl.prototype.setLabel=function(t){this._label=t},gl.prototype.getLabel=function(){return this._label},gl.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},gl.prototype.updateIM=function(t){Ru.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},gl.prototype.isInResult=function(){return this._isInResult},gl.prototype.isVisited=function(){return this._isVisited},gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl};var yl=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],r=arguments[1];this._coord=e,this._edges=r,this._label=new fl(0,su.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var r=su.NONE;if(r=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);r!==su.BOUNDARY&&(r=n)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],r=arguments[1];null===this._label?this._label=new fl(e,r):this._label.setLocation(e,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof fl)for(var r=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(r,n);this._label.getLocation(n)===su.NONE&&this._label.setLocation(n,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=su.NONE;null!==this._label&&(e=this._label.getLocation(t));var r=null;switch(e){case su.BOUNDARY:r=su.INTERIOR;break;case su.INTERIOR:default:r=su.BOUNDARY}this._label.setLocation(t,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gl),ml=function(){this.nodeMap=new Ii,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};ml.prototype.find=function(t){return this.nodeMap.get(t)},ml.prototype.addNode=function(){if(arguments[0]instanceof ru){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof yl){var r=arguments[0],n=this.nodeMap.get(r.getCoordinate());return null===n?(this.nodeMap.put(r.getCoordinate(),r),r):(n.mergeLabel(r),n)}},ml.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ml.prototype.iterator=function(){return this.nodeMap.values().iterator()},ml.prototype.values=function(){return this.nodeMap.values()},ml.prototype.getBoundaryNodes=function(t){for(var e=new rc,r=this.iterator();r.hasNext();){var n=r.next();n.getLabel().getLocation(t)===su.BOUNDARY&&e.add(n)}return e},ml.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml};var vl=function(){},_l={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};vl.prototype.interfaces_=function(){return[]},vl.prototype.getClass=function(){return vl},vl.isNorthern=function(t){return t===vl.NE||t===vl.NW},vl.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},vl.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var r=t<e?t:e;return 0===r&&3===(t>e?t:e)?3:r},vl.isInHalfPlane=function(t,e){return e===vl.SE?t===vl.SE||t===vl.SW:t===e||t===e+1},vl.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Za("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?vl.NE:vl.SE:e>=0?vl.NW:vl.SW}if(arguments[0]instanceof ru&&arguments[1]instanceof ru){var r=arguments[0],n=arguments[1];if(n.x===r.x&&n.y===r.y)throw new Za("Cannot compute the quadrant for two identical points "+r);return n.x>=r.x?n.y>=r.y?vl.NE:vl.SE:n.y>=r.y?vl.NW:vl.SW}},_l.NE.get=function(){return 0},_l.NW.get=function(){return 1},_l.SW.get=function(){return 2},_l.SE.get=function(){return 3},Object.defineProperties(vl,_l);var bl=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];this._edge=e,this.init(r,n),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=i,this.init(o,s),this._label=a}};bl.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Bu.computeOrientation(t._p0,t._p1,this._p1)},bl.prototype.getDy=function(){return this._dy},bl.prototype.getCoordinate=function(){return this._p0},bl.prototype.setNode=function(t){this._node=t},bl.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},bl.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},bl.prototype.getDirectedCoordinate=function(){return this._p1},bl.prototype.getDx=function(){return this._dx},bl.prototype.getLabel=function(){return this._label},bl.prototype.getEdge=function(){return this._edge},bl.prototype.getQuadrant=function(){return this._quadrant},bl.prototype.getNode=function(){return this._node},bl.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),r=e.lastIndexOf(".");return"  "+e.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},bl.prototype.computeLabel=function(t){},bl.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=vl.quadrant(this._dx,this._dy),Ru.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},bl.prototype.interfaces_=function(){return[$a]},bl.prototype.getClass=function(){return bl};var wl=function(t){function e(){var e=arguments[0],r=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new fl(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new al("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,il.LEFT)===su.INTERIOR&&this._label.getLocation(e,il.RIGHT)===su.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[il.LEFT]+"/"+this._depth[il.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,su.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,su.EXTERIOR);return t&&e&&r},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var n=1;t===il.LEFT&&(n=-1);var i=il.opposite(t),o=e+r*n;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===su.EXTERIOR&&e===su.INTERIOR?1:t===su.INTERIOR&&e===su.EXTERIOR?-1:0},e}(bl),xl=function(){};xl.prototype.createNode=function(t){return new yl(t,null)},xl.prototype.interfaces_=function(){return[]},xl.prototype.getClass=function(){return xl};var El=function(){if(this._edges=new rc,this._nodes=null,this._edgeEndList=new rc,0===arguments.length)this._nodes=new ml(new xl);else if(1===arguments.length){var t=arguments[0];this._nodes=new ml(t)}};El.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var r=this._edges.get(e);r.print(t),r.eiList.print(t)}},El.prototype.find=function(t){return this._nodes.find(t)},El.prototype.addNode=function(){if(arguments[0]instanceof yl){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ru){var e=arguments[0];return this._nodes.addNode(e)}},El.prototype.getNodeIterator=function(){return this._nodes.iterator()},El.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},El.prototype.debugPrintln=function(t){xu.out.println(t)},El.prototype.isBoundaryNode=function(t,e){var r=this._nodes.find(e);if(null===r)return!1;var n=r.getLabel();return null!==n&&n.getLocation(t)===su.BOUNDARY},El.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},El.prototype.matchInSameDirection=function(t,e,r,n){return!!t.equals(r)&&Bu.computeOrientation(t,e,n)===Bu.COLLINEAR&&vl.quadrant(t,e)===vl.quadrant(r,n)},El.prototype.getEdgeEnds=function(){return this._edgeEndList},El.prototype.debugPrint=function(t){xu.out.print(t)},El.prototype.getEdgeIterator=function(){return this._edges.iterator()},El.prototype.findEdgeInSameDirection=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return n;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return n}return null},El.prototype.insertEdge=function(t){this._edges.add(t)},El.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var r=e.next();if(r.getEdge()===t)return r}return null},El.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this._edges.add(r);var n=new wl(r,!0),i=new wl(r,!1);n.setSym(i),i.setSym(n),this.add(n),this.add(i)}},El.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},El.prototype.getNodes=function(){return this._nodes.values()},El.prototype.findEdge=function(t,e){for(var r=0;r<this._edges.size();r++){var n=this._edges.get(r),i=n.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return n}return null},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El},El.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Sl=function(){this._geometryFactory=null,this._shellList=new rc;var t=arguments[0];this._geometryFactory=t};Sl.prototype.sortShellsAndHoles=function(t,e,r){for(var n=t.iterator();n.hasNext();){var i=n.next();i.isHole()?r.add(i):e.add(i)}},Sl.prototype.computePolygons=function(t){for(var e=new rc,r=t.iterator();r.hasNext();){var n=r.next().toPolygon(this._geometryFactory);e.add(n)}return e},Sl.prototype.placeFreeHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(null===n.getShell()){var i=this.findEdgeRingContaining(n,t);if(null===i)throw new al("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(i)}}},Sl.prototype.buildMinimalEdgeRings=function(t,e,r){for(var n=new rc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):r.addAll(s)}else n.add(o)}return n},Sl.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Sl.prototype.buildMaximalEdgeRings=function(t){for(var e=new rc,r=t.iterator();r.hasNext();){var n=r.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var i=new dl(n,this._geometryFactory);e.add(i),i.setInResult()}}return e},Sl.prototype.placePolygonHoles=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();n.isHole()&&n.setShell(t)}},Sl.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Sl.prototype.findEdgeRingContaining=function(t,e){for(var r=t.getLinearRing(),n=r.getEnvelopeInternal(),i=r.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var f=!1;l.contains(n)&&Bu.isPointInRing(i,c.getCoordinates())&&(f=!0),f&&(null===o||s.contains(l))&&(o=u)}return o},Sl.prototype.findShell=function(t){for(var e=0,r=null,n=t.iterator();n.hasNext();){var i=n.next();i.isHole()||(r=i,e++)}return Ru.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),r},Sl.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],r=arguments[1];El.linkResultDirectedEdges(r);var n=this.buildMaximalEdgeRings(e),i=new rc,o=this.buildMinimalEdgeRings(n,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl};var Cl=function(){};Cl.prototype.getBounds=function(){},Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl};var Il=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Il.prototype.getItem=function(){return this._item},Il.prototype.getBounds=function(){return this._bounds},Il.prototype.interfaces_=function(){return[Cl,mi]},Il.prototype.getClass=function(){return Il};var Pl=function(){this._size=null,this._items=null,this._size=0,this._items=new rc,this._items.add(null)};Pl.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Pl.prototype.size=function(){return this._size},Pl.prototype.reorder=function(t){for(var e=null,r=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(r)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,r)},Pl.prototype.clear=function(){this._size=0,this._items.clear()},Pl.prototype.isEmpty=function(){return 0===this._size},Pl.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl};var Ml=function(){};Ml.prototype.visitItem=function(t){},Ml.prototype.interfaces_=function(){return[]},Ml.prototype.getClass=function(){return Ml};var Nl=function(){};Nl.prototype.insert=function(t,e){},Nl.prototype.remove=function(t,e){},Nl.prototype.query=function(){},Nl.prototype.interfaces_=function(){return[]},Nl.prototype.getClass=function(){return Nl};var Tl=function(){if(this._childBoundables=new rc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ol={serialVersionUID:{configurable:!0}};Tl.prototype.getLevel=function(){return this._level},Tl.prototype.size=function(){return this._childBoundables.size()},Tl.prototype.getChildBoundables=function(){return this._childBoundables},Tl.prototype.addChildBoundable=function(t){Ru.isTrue(null===this._bounds),this._childBoundables.add(t)},Tl.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Tl.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Tl.prototype.interfaces_=function(){return[Cl,mi]},Tl.prototype.getClass=function(){return Tl},Ol.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Tl,Ol);var Ll=function(){};Ll.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Ll.min=function(t){return Ll.sort(t),t.get(0)},Ll.sort=function(t,e){var r=t.toArray();e?yc.sort(r,e):yc.sort(r);for(var n=t.iterator(),i=0,o=r.length;i<o;i++)n.next(),n.set(r[i])},Ll.singletonList=function(t){var e=new rc;return e.add(t),e};var Rl=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=r,this._distance=this.distance()};Rl.prototype.expandToQueue=function(t,e){var r=Rl.isComposite(this._boundable1),n=Rl.isComposite(this._boundable2);if(r&&n)return Rl.area(this._boundable1)>Rl.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(r)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Za("neither boundable is composite")},Rl.prototype.isLeaves=function(){return!(Rl.isComposite(this._boundable1)||Rl.isComposite(this._boundable2))},Rl.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Rl.prototype.expand=function(t,e,r,n){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new Rl(o,e,this._itemDistance);s.getDistance()<n&&r.add(s)}},Rl.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Rl.prototype.getDistance=function(){return this._distance},Rl.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Rl.prototype.interfaces_=function(){return[$a]},Rl.prototype.getClass=function(){return Rl},Rl.area=function(t){return t.getBounds().getArea()},Rl.isComposite=function(t){return t instanceof Tl};var kl=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new rc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var r=arguments[0];Ru.isTrue(r>1,"Node capacity must be greater than 1"),this._nodeCapacity=r}},Al={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};kl.prototype.getNodeCapacity=function(){return this._nodeCapacity},kl.prototype.lastNode=function(t){return t.get(t.size()-1)},kl.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();r instanceof Tl?t+=this.size(r):r instanceof Il&&(t+=1)}return t}},kl.prototype.removeItem=function(t,e){for(var r=null,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof Il&&i.getItem()===e&&(r=i)}return null!==r&&(t.getChildBoundables().remove(r),!0)},kl.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new rc:t}if(1===arguments.length){for(var e=arguments[0],r=new rc,n=e.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof Tl){var o=this.itemsTree(i);null!==o&&r.add(o)}else i instanceof Il?r.add(i.getItem()):Ru.shouldNeverReachHere()}return r.size()<=0?null:r}},kl.prototype.insert=function(t,e){Ru.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Il(t,e))},kl.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new rc;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];if(Ru.isTrue(r>-2),n.getLevel()===r)return i.add(n),null;for(var o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Tl?this.boundablesAtLevel(r,s,i):(Ru.isTrue(s instanceof Il),-1===r&&i.add(s))}return null}},kl.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new rc;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,n)}else if(3===arguments.length)if(uu(arguments[2],Ml)&&arguments[0]instanceof Object&&arguments[1]instanceof Tl)for(var i=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var c=a.get(u);this.getIntersectsOp().intersects(c.getBounds(),i)&&(c instanceof Tl?this.query(i,c,s):c instanceof Il?s.visitItem(c.getItem()):Ru.shouldNeverReachHere())}else if(uu(arguments[2],ec)&&arguments[0]instanceof Object&&arguments[1]instanceof Tl)for(var l=arguments[0],f=arguments[1],h=arguments[2],p=f.getChildBoundables(),d=0;d<p.size();d++){var g=p.get(d);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof Tl?this.query(l,g,h):g instanceof Il?h.add(g.getItem()):Ru.shouldNeverReachHere())}},kl.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},kl.prototype.getRoot=function(){return this.build(),this._root},kl.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=this.removeItem(n,i);if(o)return!0;for(var s=null,a=n.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),r)&&u instanceof Tl&&(o=this.remove(r,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(s),o}},kl.prototype.createHigherLevels=function(t,e){Ru.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,e+1);return 1===r.size()?r.get(0):this.createHigherLevels(r,e+1)},kl.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var r=e.next();if(r instanceof Tl){var n=this.depth(r);n>t&&(t=n)}}return t+1}},kl.prototype.createParentBoundables=function(t,e){Ru.isTrue(!t.isEmpty());var r=new rc;r.add(this.createNode(e));var n=new rc(t);Ll.sort(n,this.getComparator());for(var i=n.iterator();i.hasNext();){var o=i.next();this.lastNode(r).getChildBoundables().size()===this.getNodeCapacity()&&r.add(this.createNode(e)),this.lastNode(r).addChildBoundable(o)}return r},kl.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},kl.prototype.interfaces_=function(){return[mi]},kl.prototype.getClass=function(){return kl},kl.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Al.IntersectsOp.get=function(){return Dl},Al.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Al.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(kl,Al);var Dl=function(){},Fl=function(){};Fl.prototype.distance=function(t,e){},Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl};var jl=function(t){function e(r){r=r||e.DEFAULT_NODE_CAPACITY,t.call(this,r)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Ru.isTrue(t.length>0);for(var r=new rc,n=0;n<t.length;n++)r.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return r},e.prototype.createNode=function(t){return new Bl(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],r=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,r)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var r=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){n[o]=new rc;for(var s=0;i.hasNext()&&s<r;){var a=i.next();n[o].add(a),s++}}return n},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var r=arguments[0],n=arguments[1];t.prototype.query.call(this,r,n)}else if(3===arguments.length)if(uu(arguments[2],Ml)&&arguments[0]instanceof Object&&arguments[1]instanceof Tl){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(uu(arguments[2],ec)&&arguments[0]instanceof Object&&arguments[1]instanceof Tl){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,r){return t.prototype.createParentBoundables.call(this,e,r)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],r=arguments[1];return t.prototype.remove.call(this,e,r)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,r){Ru.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new rc(t);Ll.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,r)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(uu(arguments[0],Fl)){var t=arguments[0],r=new Rl(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(r)}if(arguments[0]instanceof Rl){var n=arguments[0];return this.nearestNeighbour(n,Ja.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&uu(arguments[1],Fl)){var i=arguments[0],o=arguments[1],s=new Rl(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof Rl&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=null,l=new Pl;for(l.add(a);!l.isEmpty()&&u>0;){var f=l.poll(),h=f.getDistance();if(h>=u)break;f.isLeaves()?(u=h,c=f):f.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],y=new Il(p,d),m=new Rl(this.getRoot(),y,g);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[Nl,mi]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return Bl},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[eu]},compare:function(r,n){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(n.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[eu]},compare:function(r,n){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(n.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,r),e}(kl),Bl=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var r=e.next();null===t?t=new Su(r.getBounds()):t.expandToInclude(r.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Tl),Gl=function(){};Gl.prototype.interfaces_=function(){return[]},Gl.prototype.getClass=function(){return Gl},Gl.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Gl.compare=function(t,e,r){if(e.equals2D(r))return 0;var n=Gl.relativeSign(e.x,r.x),i=Gl.relativeSign(e.y,r.y);switch(t){case 0:return Gl.compareValue(n,i);case 1:return Gl.compareValue(i,n);case 2:return Gl.compareValue(i,-n);case 3:return Gl.compareValue(-n,i);case 4:return Gl.compareValue(-n,-i);case 5:return Gl.compareValue(-i,-n);case 6:return Gl.compareValue(-i,n);case 7:return Gl.compareValue(n,-i)}return Ru.shouldNeverReachHere("invalid octant value"),0},Gl.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ql=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._segString=t,this.coord=new ru(e),this.segmentIndex=r,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(r))};ql.prototype.getCoordinate=function(){return this.coord},ql.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ql.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Gl.compare(this._segmentOctant,this.coord,e.coord)},ql.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ql.prototype.isInterior=function(){return this._isInterior},ql.prototype.interfaces_=function(){return[$a]},ql.prototype.getClass=function(){return ql};var Ul=function(){this._nodeMap=new Ii,this._edge=null;var t=arguments[0];this._edge=t};Ul.prototype.getSplitCoordinates=function(){var t=new ic;this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(r,n,t),r=n}return t.toCoordinateArray()},Ul.prototype.addCollapsedNodes=function(){var t=new rc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var r=e.next().intValue();this.add(this._edge.getCoordinate(r),r)}},Ul.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ul.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var r=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);r.equals2D(n)&&t.add(new hu(e+1))}},Ul.prototype.addEdgeCoordinates=function(t,e,r){var n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);r.add(new ru(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)r.add(this._edge.getCoordinate(o));i&&r.add(new ru(e.coord))},Ul.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ul.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},Ul.prototype.findCollapseIndex=function(t,e,r){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(r[0]=t.segmentIndex+1,!0)},Ul.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),r=this.iterator(),n=r.next();r.hasNext();){var i=r.next();this.findCollapseIndex(n,i,e)&&t.add(new hu(e[0])),n=i}},Ul.prototype.getEdge=function(){return this._edge},Ul.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Ul.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ru(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ru(e.coord)),new Xl(o,this._edge.getData())},Ul.prototype.add=function(t,e){var r=new ql(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(r);return null!==n?(Ru.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(r,r),r)},Ul.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),r=t.get(0).getCoordinate(0);if(!r.equals2D(e[0]))throw new Ou("bad split edge start point at "+r);var n=t.get(t.size()-1).getCoordinates(),i=n[n.length-1];if(!i.equals2D(e[e.length-1]))throw new Ou("bad split edge end point at "+i)},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul};var zl=function(){};zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl},zl.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Za("Cannot compute the octant for point ( "+t+", "+e+" )");var r=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?r>=n?0:1:r>=n?7:6:e>=0?r>=n?3:2:r>=n?4:5}if(arguments[0]instanceof ru&&arguments[1]instanceof ru){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new Za("Cannot compute the octant for two identical points "+i);return zl.octant(s,a)}};var Yl=function(){};Yl.prototype.getCoordinates=function(){},Yl.prototype.size=function(){},Yl.prototype.getCoordinate=function(t){},Yl.prototype.isClosed=function(){},Yl.prototype.setData=function(t){},Yl.prototype.getData=function(){},Yl.prototype.interfaces_=function(){return[]},Yl.prototype.getClass=function(){return Yl};var Vl=function(){};Vl.prototype.addIntersection=function(t,e){},Vl.prototype.interfaces_=function(){return[Yl]},Vl.prototype.getClass=function(){return Vl};var Xl=function(){this._nodeList=new Ul(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Xl.prototype.getCoordinates=function(){return this._pts},Xl.prototype.size=function(){return this._pts.length},Xl.prototype.getCoordinate=function(t){return this._pts[t]},Xl.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Xl.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Xl.prototype.setData=function(t){this._data=t},Xl.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:zl.octant(t,e)},Xl.prototype.getData=function(){return this._data},Xl.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[3],o=new ru(r.getIntersection(i));this.addIntersection(o,n)}},Xl.prototype.toString=function(){return Tu.toLineString(new qc(this._pts))},Xl.prototype.getNodeList=function(){return this._nodeList},Xl.prototype.addIntersectionNode=function(t,e){var r=e,n=r+1;if(n<this._pts.length){var i=this._pts[n];t.equals2D(i)&&(r=n)}return this._nodeList.add(t,r)},Xl.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},Xl.prototype.interfaces_=function(){return[Vl]},Xl.prototype.getClass=function(){return Xl},Xl.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new rc;return Xl.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var Wl=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ru,this.p1=new ru;else if(1===arguments.length){var t=arguments[0];this.p0=new ru(t.p0),this.p1=new ru(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];this.p0=new ru(e,r),this.p1=new ru(n,i)}},Hl={serialVersionUID:{configurable:!0}};Wl.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Wl.prototype.orientationIndex=function(){if(arguments[0]instanceof Wl){var t=arguments[0],e=Bu.orientationIndex(this.p0,this.p1,t.p0),r=Bu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&r>=0?Math.max(e,r):e<=0&&r<=0?Math.max(e,r):0}if(arguments[0]instanceof ru){var n=arguments[0];return Bu.orientationIndex(this.p0,this.p1,n)}},Wl.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Wl.prototype.isVertical=function(){return this.p0.x===this.p1.x},Wl.prototype.equals=function(t){if(!(t instanceof Wl))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Wl.prototype.intersection=function(t){var e=new Du;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Wl.prototype.project=function(){if(arguments[0]instanceof ru){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ru(t);var e=this.projectionFactor(t),r=new ru;return r.x=this.p0.x+e*(this.p1.x-this.p0.x),r.y=this.p0.y+e*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof Wl){var n=arguments[0],i=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(n.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Wl(s,a)}},Wl.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Wl.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Wl.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Wl.prototype.distancePerpendicular=function(t){return Bu.distancePointLinePerpendicular(t,this.p0,this.p1)},Wl.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Wl.prototype.midPoint=function(){return Wl.midPoint(this.p0,this.p1)},Wl.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=e*e+r*r;return n<=0?Ja.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*r)/n},Wl.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var r=new Array(2).fill(null),n=Ja.MAX_VALUE,i=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),r[0]=o,r[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<n&&(n=i,r[0]=s,r[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<n&&(n=i,r[0]=this.p0,r[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<n&&(n=i,r[0]=this.p1,r[1]=u),r},Wl.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Wl.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Wl.prototype.getLength=function(){return this.p0.distance(this.p1)},Wl.prototype.compareTo=function(t){var e=t,r=this.p0.compareTo(e.p0);return 0!==r?r:this.p1.compareTo(e.p1)},Wl.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Wl.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Wl.prototype.lineIntersection=function(t){try{return Eu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof wu))throw t}return null},Wl.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Wl.prototype.pointAlongOffset=function(t,e){var r=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new ru(r-u,n+a)},Wl.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=r.x,this.p1.y=r.y}},Wl.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Ja.isNaN(e))&&(e=1),e},Wl.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Wl.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Wl.prototype.distance=function(){if(arguments[0]instanceof Wl){var t=arguments[0];return Bu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ru){var e=arguments[0];return Bu.distancePointLine(e,this.p0,this.p1)}},Wl.prototype.pointAlong=function(t){var e=new ru;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Wl.prototype.hashCode=function(){var t=Ja.doubleToLongBits(this.p0.x);t^=31*Ja.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),r=Ja.doubleToLongBits(this.p1.x);return r^=31*Ja.doubleToLongBits(this.p1.y),e^Math.trunc(r)^Math.trunc(r>>32)},Wl.prototype.interfaces_=function(){return[$a,mi]},Wl.prototype.getClass=function(){return Wl},Wl.midPoint=function(t,e){return new ru((t.x+e.x)/2,(t.y+e.y)/2)},Hl.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Wl,Hl);var Kl=function(){this.tempEnv1=new Su,this.tempEnv2=new Su,this._overlapSeg1=new Wl,this._overlapSeg2=new Wl};Kl.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),r.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Zl=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=r,this._context=n};Zl.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Zl.prototype.computeSelect=function(t,e,r,n){var i=this._pts[e],o=this._pts[r];if(n.tempEnv1.init(i,o),r-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+r)/2);e<s&&this.computeSelect(t,e,s,n),s<r&&this.computeSelect(t,s,r,n)},Zl.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,r=this._start;r<=this._end;r++)t[e++]=this._pts[r];return t},Zl.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Zl.prototype.setId=function(t){this._id=t},Zl.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Zl.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Su(t,e)}return this._env},Zl.prototype.getEndIndex=function(){return this._end},Zl.prototype.getStartIndex=function(){return this._start},Zl.prototype.getContext=function(){return this._context},Zl.prototype.getId=function(){return this._id},Zl.prototype.computeOverlapsInternal=function(t,e,r,n,i,o){var s=this._pts[t],a=this._pts[e],u=r._pts[n],c=r._pts[i];if(e-t==1&&i-n==1)return o.overlap(this,t,r,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),f=Math.trunc((n+i)/2);t<l&&(n<f&&this.computeOverlapsInternal(t,l,r,n,f,o),f<i&&this.computeOverlapsInternal(t,l,r,f,i,o)),l<e&&(n<f&&this.computeOverlapsInternal(l,e,r,n,f,o),f<i&&this.computeOverlapsInternal(l,e,r,f,i,o))},Zl.prototype.interfaces_=function(){return[]},Zl.prototype.getClass=function(){return Zl};var Jl=function(){};Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl},Jl.getChainStartIndices=function(t){var e=0,r=new rc;r.add(new hu(e));do{var n=Jl.findChainEnd(t,e);r.add(new hu(n)),e=n}while(e<t.length-1);return Jl.toIntArray(r)},Jl.findChainEnd=function(t,e){for(var r=e;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var n=vl.quadrant(t[r],t[r+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||vl.quadrant(t[i-1],t[i])===n);)i++;return i-1},Jl.getChains=function(){if(1===arguments.length){var t=arguments[0];return Jl.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],r=arguments[1],n=new rc,i=Jl.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new Zl(e,i[o],i[o+1],r);n.add(s)}return n}},Jl.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Ql=function(){};Ql.prototype.computeNodes=function(t){},Ql.prototype.getNodedSubstrings=function(){},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql};var $l=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};$l.prototype.setSegmentIntersector=function(t){this._segInt=t},$l.prototype.interfaces_=function(){return[Ql]},$l.prototype.getClass=function(){return $l};var tf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new rc,this._index=new jl,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var r={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Xl.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=Jl.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var r=e.next();r.setId(this._idCounter++),this._index.insert(r.getEnvelope(),r),this._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new ef(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var r=e.next(),n=this._index.query(r.getEnvelope()).iterator();n.hasNext();){var i=n.next();if(i.getId()>r.getId()&&(r.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},r.SegmentOverlapAction.get=function(){return ef},Object.defineProperties(e,r),e}($l),ef=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3],o=e.getContext(),s=n.getContext();this._si.processIntersections(o,r,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kl),rf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var r=arguments[0],n=arguments[1];this.setQuadrantSegments(r),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},nf={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};rf.prototype.getEndCapStyle=function(){return this._endCapStyle},rf.prototype.isSingleSided=function(){return this._isSingleSided},rf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=rf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=rf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==rf.JOIN_ROUND&&(this._quadrantSegments=rf.DEFAULT_QUADRANT_SEGMENTS)},rf.prototype.getJoinStyle=function(){return this._joinStyle},rf.prototype.setJoinStyle=function(t){this._joinStyle=t},rf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},rf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},rf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},rf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},rf.prototype.getMitreLimit=function(){return this._mitreLimit},rf.prototype.setMitreLimit=function(t){this._mitreLimit=t},rf.prototype.setSingleSided=function(t){this._isSingleSided=t},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},rf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},nf.CAP_ROUND.get=function(){return 1},nf.CAP_FLAT.get=function(){return 2},nf.CAP_SQUARE.get=function(){return 3},nf.JOIN_ROUND.get=function(){return 1},nf.JOIN_MITRE.get=function(){return 2},nf.JOIN_BEVEL.get=function(){return 3},nf.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},nf.DEFAULT_MITRE_LIMIT.get=function(){return 5},nf.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(rf,nf);var of=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Bu.COUNTERCLOCKWISE,this._inputLine=t||null},sf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};of.prototype.isDeletable=function(t,e,r,n){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[r];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,n)&&this.isShallowSampled(i,o,t,r,n)},of.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e),n=!1;r<this._inputLine.length;){var i=!1;this.isDeletable(t,e,r,this._distanceTol)&&(this._isDeleted[e]=of.DELETE,i=!0,n=!0),t=i?r:e,e=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(e)}return n},of.prototype.isShallowConcavity=function(t,e,r,n){return Bu.computeOrientation(t,e,r)===this._angleOrientation&&Bu.distancePointLine(e,t,r)<n},of.prototype.isShallowSampled=function(t,e,r,n,i){var o=Math.trunc((n-r)/of.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=r;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},of.prototype.isConcave=function(t,e,r){return Bu.computeOrientation(t,e,r)===this._angleOrientation},of.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Bu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},of.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===of.DELETE;)e++;return e},of.prototype.isShallow=function(t,e,r,n){return Bu.distancePointLine(e,t,r)<n},of.prototype.collapseLine=function(){for(var t=new ic,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==of.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},of.simplify=function(t,e){return new of(t).simplify(e)},sf.INIT.get=function(){return 0},sf.DELETE.get=function(){return 1},sf.KEEP.get=function(){return 1},sf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(of,sf);var af=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new rc},uf={COORDINATE_ARRAY_TYPE:{configurable:!0}};af.prototype.getCoordinates=function(){return this._ptList.toArray(af.COORDINATE_ARRAY_TYPE)},af.prototype.setPrecisionModel=function(t){this._precisionModel=t},af.prototype.addPt=function(t){var e=new ru(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},af.prototype.revere=function(){},af.prototype.addPts=function(t,e){if(e)for(var r=0;r<t.length;r++)this.addPt(t[r]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},af.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},af.prototype.toString=function(){return(new Zc).createLineString(this.getCoordinates()).toString()},af.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ru(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},af.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},af.prototype.interfaces_=function(){return[]},af.prototype.getClass=function(){return af},uf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(af,uf);var cf=function(){},lf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},cf.toDegrees=function(t){return 180*t/Math.PI},cf.normalize=function(t){for(;t>Math.PI;)t-=cf.PI_TIMES_2;for(;t<=-Math.PI;)t+=cf.PI_TIMES_2;return t},cf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],r=arguments[1],n=r.x-e.x,i=r.y-e.y;return Math.atan2(i,n)}},cf.isAcute=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)>0},cf.isObtuse=function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*(r.x-e.x)+i*(r.y-e.y)<0},cf.interiorAngle=function(t,e,r){var n=cf.angle(e,t),i=cf.angle(e,r);return Math.abs(i-n)},cf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=cf.PI_TIMES_2;t>=cf.PI_TIMES_2&&(t=0)}else{for(;t>=cf.PI_TIMES_2;)t-=cf.PI_TIMES_2;t<0&&(t=0)}return t},cf.angleBetween=function(t,e,r){var n=cf.angle(e,t),i=cf.angle(e,r);return cf.diff(n,i)},cf.diff=function(t,e){var r=null;return(r=t<e?e-t:t-e)>Math.PI&&(r=2*Math.PI-r),r},cf.toRadians=function(t){return t*Math.PI/180},cf.getTurn=function(t,e){var r=Math.sin(e-t);return r>0?cf.COUNTERCLOCKWISE:r<0?cf.CLOCKWISE:cf.NONE},cf.angleBetweenOriented=function(t,e,r){var n=cf.angle(e,t),i=cf.angle(e,r)-n;return i<=-Math.PI?i+cf.PI_TIMES_2:i>Math.PI?i-cf.PI_TIMES_2:i},lf.PI_TIMES_2.get=function(){return 2*Math.PI},lf.PI_OVER_2.get=function(){return Math.PI/2},lf.PI_OVER_4.get=function(){return Math.PI/4},lf.COUNTERCLOCKWISE.get=function(){return Bu.COUNTERCLOCKWISE},lf.CLOCKWISE.get=function(){return Bu.CLOCKWISE},lf.NONE.get=function(){return Bu.COLLINEAR},Object.defineProperties(cf,lf);var ff=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Wl,this._seg1=new Wl,this._offset0=new Wl,this._offset1=new Wl,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=r,this._li=new Du,this._filletAngleQuantum=Math.PI/2/r.getQuadrantSegments(),r.getQuadrantSegments()>=8&&r.getJoinStyle()===rf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},hf={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ff.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Bu.computeOrientation(this._s0,this._s1,this._s2),n=r===Bu.CLOCKWISE&&this._side===il.LEFT||r===Bu.COUNTERCLOCKWISE&&this._side===il.RIGHT;0===r?this.addCollinear(e):n?this.addOutsideTurn(r,e):this.addInsideTurn(r,e)},ff.prototype.addLineEndCap=function(t,e){var r=new Wl(t,e),n=new Wl;this.computeOffsetSegment(r,il.LEFT,this._distance,n);var i=new Wl;this.computeOffsetSegment(r,il.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case rf.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Bu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case rf.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(i.p1);break;case rf.CAP_SQUARE:var u=new ru;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new ru(n.p1.x+u.x,n.p1.y+u.y),l=new ru(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},ff.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ff.prototype.addMitreJoin=function(t,e,r,n){var i=!0,o=null;try{o=Eu.intersection(e.p0,e.p1,r.p0,r.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof wu))throw t;o=new ru(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,r,n,this._bufParams.getMitreLimit())},ff.prototype.addFilletCorner=function(t,e,r,n,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=r.x-t.x,c=r.y-t.y,l=Math.atan2(c,u);n===Bu.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,n,i),this._segList.addPt(r)},ff.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ff.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===rf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===rf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},ff.prototype.createSquare=function(t){this._segList.addPt(new ru(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ru(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ru(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ru(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},ff.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},ff.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ff.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ff.prototype.initSideSegments=function(t,e,r){this._s1=t,this._s2=e,this._side=r,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)},ff.prototype.addLimitedMitreJoin=function(t,e,r,n){var i=this._seg0.p1,o=cf.angle(i,this._seg0.p0),s=cf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=cf.normalize(o+s),u=cf.normalize(a+Math.PI),c=n*r,l=r-c*Math.abs(Math.sin(s)),f=i.x+c*Math.cos(u),h=i.y+c*Math.sin(u),p=new ru(f,h),d=new Wl(i,p),g=d.pointAlongOffset(1,l),y=d.pointAlongOffset(1,-l);this._side===il.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},ff.prototype.computeOffsetSegment=function(t,e,r,n){var i=e===il.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*r*o/a,c=i*r*s/a;n.p0.x=t.p0.x-c,n.p0.y=t.p0.y+u,n.p1.x=t.p1.x-c,n.p1.y=t.p1.y+u},ff.prototype.addFilletArc=function(t,e,r,n,i){var o=n===Bu.CLOCKWISE?-1:1,s=Math.abs(e-r),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,c=0,l=new ru;c<s;){var f=e+o*c;l.x=t.x+i*Math.cos(f),l.y=t.y+i*Math.sin(f),this._segList.addPt(l),c+=u}},ff.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ff.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new ru((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var n=new ru((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ff.prototype.createCircle=function(t){var e=new ru(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ff.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},ff.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new af,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*ff.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ff.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===rf.JOIN_BEVEL||this._bufParams.getJoinStyle()===rf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Bu.CLOCKWISE,this._distance))},ff.prototype.closeRing=function(){this._segList.closeRing()},ff.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff},hf.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},hf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},hf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},hf.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ff,hf);var pf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};pf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var r=e<0,n=Math.abs(e),i=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,r,i);var o=i.getCoordinates();return r&&oc.reverse(o),o},pf.prototype.computeSingleSidedBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){r.addSegments(t,!0);var i=of.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],il.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{r.addSegments(t,!1);var a=of.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],il.LEFT),r.addFirstSegment();for(var c=2;c<=u;c++)r.addNextSegment(a[c],!0)}r.addLastSegment(),r.closeRing()},pf.prototype.computeRingBufferCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);e===il.RIGHT&&(n=-n);var i=of.simplify(t,n),o=i.length-1;r.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;r.addNextSegment(i[s],a)}r.closeRing()},pf.prototype.computeLineBufferCurve=function(t,e){var r=this.simplifyTolerance(this._distance),n=of.simplify(t,r),i=n.length-1;e.initSideSegments(n[0],n[1],il.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[i-1],n[i]);var s=of.simplify(t,-r),a=s.length-1;e.initSideSegments(s[a],s[a-1],il.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},pf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case rf.CAP_ROUND:e.createCircle(t);break;case rf.CAP_SQUARE:e.createSquare(t)}},pf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var r=Math.abs(e),n=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},pf.prototype.getBufferParameters=function(){return this._bufParams},pf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},pf.prototype.getRingCurve=function(t,e,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return pf.copyCoordinates(t);var n=this.getSegGen(r);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},pf.prototype.computeOffsetCurve=function(t,e,r){var n=this.simplifyTolerance(this._distance);if(e){var i=of.simplify(t,-n),o=i.length-1;r.initSideSegments(i[o],i[o-1],il.LEFT),r.addFirstSegment();for(var s=o-2;s>=0;s--)r.addNextSegment(i[s],!0)}else{var a=of.simplify(t,n),u=a.length-1;r.initSideSegments(a[0],a[1],il.LEFT),r.addFirstSegment();for(var c=2;c<=u;c++)r.addNextSegment(a[c],!0)}r.addLastSegment()},pf.prototype.getSegGen=function(t){return new ff(this._precisionModel,this._bufParams,t)},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf},pf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),r=0;r<e.length;r++)e[r]=new ru(t[r]);return e};var df=function(){this._subgraphs=null,this._seg=new Wl,this._cga=new Bu;var t=arguments[0];this._subgraphs=t},gf={DepthSegment:{configurable:!0}};df.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new rc,r=this._subgraphs.iterator();r.hasNext();){var n=r.next(),i=n.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(uu(arguments[2],ec)&&arguments[0]instanceof ru&&arguments[1]instanceof wl){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||Bu.computeOrientation(this._seg.p0,this._seg.p1,o)===Bu.RIGHT)){var l=s.getDepth(il.LEFT);this._seg.p0.equals(u[c])||(l=s.getDepth(il.RIGHT));var f=new yf(this._seg,l);a.add(f)}}else if(uu(arguments[2],ec)&&arguments[0]instanceof ru&&uu(arguments[1],ec))for(var h=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var y=g.next();y.isForward()&&this.findStabbedSegments(h,y,d)}},df.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Ll.min(e)._leftDepth},df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},gf.DepthSegment.get=function(){return yf},Object.defineProperties(df,gf);var yf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Wl(t),this._leftDepth=e};yf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==r?r:0!=(r=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?r:this._upwardSeg.compareTo(e._upwardSeg)},yf.prototype.compareX=function(t,e){var r=t.p0.compareTo(e.p0);return 0!==r?r:t.p1.compareTo(e.p1)},yf.prototype.toString=function(){return this._upwardSeg.toString()},yf.prototype.interfaces_=function(){return[$a]},yf.prototype.getClass=function(){return yf};var mf=function(t,e,r){this.p0=t||null,this.p1=e||null,this.p2=r||null};mf.prototype.area=function(){return mf.area(this.p0,this.p1,this.p2)},mf.prototype.signedArea=function(){return mf.signedArea(this.p0,this.p1,this.p2)},mf.prototype.interpolateZ=function(t){if(null===t)throw new Za("Supplied point is null.");return mf.interpolateZ(t,this.p0,this.p1,this.p2)},mf.prototype.longestSideLength=function(){return mf.longestSideLength(this.p0,this.p1,this.p2)},mf.prototype.isAcute=function(){return mf.isAcute(this.p0,this.p1,this.p2)},mf.prototype.circumcentre=function(){return mf.circumcentre(this.p0,this.p1,this.p2)},mf.prototype.area3D=function(){return mf.area3D(this.p0,this.p1,this.p2)},mf.prototype.centroid=function(){return mf.centroid(this.p0,this.p1,this.p2)},mf.prototype.inCentre=function(){return mf.inCentre(this.p0,this.p1,this.p2)},mf.prototype.interfaces_=function(){return[]},mf.prototype.getClass=function(){return mf},mf.area=function(t,e,r){return Math.abs(((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2)},mf.signedArea=function(t,e,r){return((r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y))/2},mf.det=function(t,e,r,n){return t*n-e*r},mf.interpolateZ=function(t,e,r,n){var i=e.x,o=e.y,s=r.x-i,a=n.x-i,u=r.y-o,c=n.y-o,l=s*c-a*u,f=t.x-i,h=t.y-o,p=(c*f-a*h)/l,d=(-u*f+s*h)/l;return e.z+p*(r.z-e.z)+d*(n.z-e.z)},mf.longestSideLength=function(t,e,r){var n=t.distance(e),i=e.distance(r),o=r.distance(t),s=n;return i>s&&(s=i),o>s&&(s=o),s},mf.isAcute=function(t,e,r){return!!cf.isAcute(t,e,r)&&!!cf.isAcute(e,r,t)&&!!cf.isAcute(r,t,e)},mf.circumcentre=function(t,e,r){var n=r.x,i=r.y,o=t.x-n,s=t.y-i,a=e.x-n,u=e.y-i,c=2*mf.det(o,s,a,u),l=mf.det(s,o*o+s*s,u,a*a+u*u),f=mf.det(o,o*o+s*s,a,a*a+u*u);return new ru(n-l/c,i+f/c)},mf.perpendicularBisector=function(t,e){var r=e.x-t.x,n=e.y-t.y,i=new Eu(t.x+r/2,t.y+n/2,1),o=new Eu(t.x-n+r/2,t.y+r+n/2,1);return new Eu(i,o)},mf.angleBisector=function(t,e,r){var n=e.distance(t),i=n/(n+e.distance(r)),o=r.x-t.x,s=r.y-t.y;return new ru(t.x+i*o,t.y+i*s)},mf.area3D=function(t,e,r){var n=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=r.x-t.x,a=r.y-t.y,u=r.z-t.z,c=i*u-o*a,l=o*s-n*u,f=n*a-i*s,h=c*c+l*l+f*f;return Math.sqrt(h)/2},mf.centroid=function(t,e,r){var n=(t.x+e.x+r.x)/3,i=(t.y+e.y+r.y)/3;return new ru(n,i)},mf.inCentre=function(t,e,r){var n=e.distance(r),i=t.distance(r),o=t.distance(e),s=n+i+o,a=(n*t.x+i*e.x+o*r.x)/s,u=(n*t.y+i*e.y+o*r.y)/s;return new ru(a,u)};var vf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new rc;var t=arguments[0],e=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=r};vf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,su.EXTERIOR,su.INTERIOR)},vf.prototype.addPolygon=function(t){var e=this._distance,r=il.LEFT;this._distance<0&&(e=-this._distance,r=il.RIGHT);var n=t.getExteriorRing(),i=oc.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,r,su.EXTERIOR,su.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=oc.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,il.opposite(r),su.INTERIOR,su.EXTERIOR)}},vf.prototype.isTriangleErodedCompletely=function(t,e){var r=new mf(t[0],t[1],t[2]),n=r.inCentre();return Bu.distancePointLine(n,r.p0,r.p1)<Math.abs(e)},vf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=oc.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(r,su.EXTERIOR,su.INTERIOR)},vf.prototype.addCurve=function(t,e,r){if(null===t||t.length<2)return null;var n=new Xl(t,new fl(0,su.BOUNDARY,e,r));this._curveList.add(n)},vf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},vf.prototype.addPolygonRing=function(t,e,r,n,i){if(0===e&&t.length<kc.MINIMUM_VALID_SIZE)return null;var o=n,s=i;t.length>=kc.MINIMUM_VALID_SIZE&&Bu.isCCW(t)&&(o=i,s=n,r=il.opposite(r));var a=this._curveBuilder.getRingCurve(t,r,e);this.addCurve(a,o,s)},vf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Lc?this.addPolygon(t):t instanceof Mc?this.addLineString(t):t instanceof Tc?this.addPoint(t):t instanceof Rc?this.addCollection(t):t instanceof xc?this.addCollection(t):t instanceof Ac?this.addCollection(t):t instanceof wc&&this.addCollection(t)},vf.prototype.isErodedCompletely=function(t,e){var r=t.getCoordinates();if(r.length<4)return e<0;if(4===r.length)return this.isTriangleErodedCompletely(r,e);var n=t.getEnvelopeInternal(),i=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>i},vf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var _f=function(){};_f.prototype.locate=function(t){},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f};var bf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};bf.prototype.next=function(){if(this._atStart)return this._atStart=!1,bf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new vi;var t=this._parent.getGeometryN(this._index++);return t instanceof wc?(this._subcollectionIterator=new bf(t),this._subcollectionIterator.next()):t},bf.prototype.remove=function(){throw new Error(this.getClass().getName())},bf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},bf.prototype.interfaces_=function(){return[tc]},bf.prototype.getClass=function(){return bf},bf.isAtomic=function(t){return!(t instanceof wc)};var wf=function(){this._geom=null;var t=arguments[0];this._geom=t};wf.prototype.locate=function(t){return wf.locate(t,this._geom)},wf.prototype.interfaces_=function(){return[_f]},wf.prototype.getClass=function(){return wf},wf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Bu.isPointInRing(t,e.getCoordinates())},wf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var r=e.getExteriorRing();if(!wf.isPointInRing(t,r))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var i=e.getInteriorRingN(n);if(wf.isPointInRing(t,i))return!1}return!0},wf.containsPoint=function(t,e){if(e instanceof Lc)return wf.containsPointInPolygon(t,e);if(e instanceof wc)for(var r=new bf(e);r.hasNext();){var n=r.next();if(n!==e&&wf.containsPoint(t,n))return!0}return!1},wf.locate=function(t,e){return e.isEmpty()?su.EXTERIOR:wf.containsPoint(t,e)?su.INTERIOR:su.EXTERIOR};var xf=function(){this._edgeMap=new Ii,this._edgeList=null,this._ptInAreaLocation=[su.NONE,su.NONE]};xf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),r=e-1;return 0===e&&(r=this._edgeList.size()-1),this._edgeList.get(r)},xf.prototype.propagateSideLabels=function(t){for(var e=su.NONE,r=this.iterator();r.hasNext();){var n=r.next().getLabel();n.isArea(t)&&n.getLocation(t,il.LEFT)!==su.NONE&&(e=n.getLocation(t,il.LEFT))}if(e===su.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,il.ON)===su.NONE&&a.setLocation(t,il.ON,i),a.isArea(t)){var u=a.getLocation(t,il.LEFT),c=a.getLocation(t,il.RIGHT);if(c!==su.NONE){if(c!==i)throw new al("side location conflict",s.getCoordinate());u===su.NONE&&Ru.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else Ru.isTrue(a.getLocation(t,il.LEFT)===su.NONE,"found single null side"),a.setLocation(t,il.RIGHT,i),a.setLocation(t,il.LEFT,i)}}},xf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},xf.prototype.print=function(t){xu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},xf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},xf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var r=e.size()-1,n=e.get(r).getLabel().getLocation(t,il.LEFT);Ru.isTrue(n!==su.NONE,"Found unlabelled area edge");for(var i=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Ru.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,il.LEFT),u=s.getLocation(t,il.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},xf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},xf.prototype.iterator=function(){return this.getEdges().iterator()},xf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new rc(this._edgeMap.values())),this._edgeList},xf.prototype.getLocation=function(t,e,r){return this._ptInAreaLocation[t]===su.NONE&&(this._ptInAreaLocation[t]=wf.locate(e,r[t].getGeometry())),this._ptInAreaLocation[t]},xf.prototype.toString=function(){var t=new fu;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var r=e.next();t.append(r),t.append("\n")}return t.toString()},xf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},xf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],r=this.iterator();r.hasNext();)for(var n=r.next().getLabel(),i=0;i<2;i++)n.isLine(i)&&n.getLocation(i)===su.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var c=su.NONE;if(e[u])c=su.EXTERIOR;else{var l=s.getCoordinate();c=this.getLocation(u,l,t)}a.setAllLocationsIfNull(u,c)}},xf.prototype.getDegree=function(){return this._edgeMap.size()},xf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var Ef=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,r=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var i=this._resultAreaEdgeList.get(n),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),r){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),r=this._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===t)throw new al("no outgoing dirEdge found",this.getCoordinate());Ru.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var r=t.get(0);if(1===e)return r;var n=t.get(e-1),i=r.getQuadrant(),o=n.getQuadrant();return vl.isNorthern(i)&&vl.isNorthern(o)?r:vl.isNorthern(i)||vl.isNorthern(o)?0!==r.getDy()?r:0!==n.getDy()?n:(Ru.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){xu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var r=e.next();t.print("out "),r.print(t),t.println(),t.print("in "),r.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new rc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var r=e.next().getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,r=this._edgeList.size()-1;r>=0;r--){var n=this._edgeList.get(r),i=n.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),r=t.getDepth(il.LEFT),n=t.getDepth(il.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),r);if(this.computeDepths(0,e,i)!==n)throw new al("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;u<s;u++){var c=this._edgeList.get(u);c.setEdgeDepths(il.RIGHT,a),a=c.getDepth(il.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,r=null,n=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;r.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(Ru.isTrue(null!==e,"found null for first outgoing dirEdge"),Ru.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var r=arguments[0],n=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===r&&n++;return n}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=su.NONE,e=this.iterator();e.hasNext();){var r=e.next(),n=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){t=su.INTERIOR;break}if(n.isInResult()){t=su.EXTERIOR;break}}}if(t===su.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===su.INTERIOR):(s.isInResult()&&(i=su.EXTERIOR),a.isInResult()&&(i=su.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new fl(su.NONE);for(var r=this.iterator();r.hasNext();)for(var n=r.next().getEdge().getLabel(),i=0;i<2;i++){var o=n.getLocation(i);o!==su.INTERIOR&&o!==su.BOUNDARY||this._label.setLocation(i,su.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xf),Sf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new yl(t,new Ef)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xl),Cf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Cf.prototype.compareTo=function(t){var e=t;return Cf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Cf.prototype.interfaces_=function(){return[$a]},Cf.prototype.getClass=function(){return Cf},Cf.orientation=function(t){return 1===oc.increasingDirection(t)},Cf.compareOriented=function(t,e,r,n){for(var i=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?r.length:-1,u=e?0:t.length-1,c=n?0:r.length-1;;){var l=t[u].compareTo(r[c]);if(0!==l)return l;var f=(u+=i)===s,h=(c+=o)===a;if(f&&!h)return-1;if(!f&&h)return 1;if(f&&h)return 0}};var If=function(){this._edges=new rc,this._ocaMap=new Ii};If.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var r=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=r.getCoordinates(),i=0;i<n.length;i++)i>0&&t.print(","),t.print(n[i].x+" "+n[i].y);t.println(")")}t.print(")  ")},If.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},If.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},If.prototype.iterator=function(){return this._edges.iterator()},If.prototype.getEdges=function(){return this._edges},If.prototype.get=function(t){return this._edges.get(t)},If.prototype.findEqualEdge=function(t){var e=new Cf(t.getCoordinates());return this._ocaMap.get(e)},If.prototype.add=function(t){this._edges.add(t);var e=new Cf(t.getCoordinates());this._ocaMap.put(e,t)},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If};var Pf=function(){};Pf.prototype.processIntersections=function(t,e,r,n){},Pf.prototype.isDone=function(){},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf};var Mf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Mf.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(Mf.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},Mf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Mf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Mf.prototype.getLineIntersector=function(){return this._li},Mf.prototype.hasProperIntersection=function(){return this._hasProper},Mf.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Mf.prototype.hasIntersection=function(){return this._hasIntersection},Mf.prototype.isDone=function(){return!1},Mf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Mf.prototype.interfaces_=function(){return[Pf]},Mf.prototype.getClass=function(){return Mf},Mf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Nf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],r=arguments[2];this.coord=new ru(t),this.segmentIndex=e,this.dist=r};Nf.prototype.getSegmentIndex=function(){return this.segmentIndex},Nf.prototype.getCoordinate=function(){return this.coord},Nf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Nf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Nf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Nf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Nf.prototype.getDistance=function(){return this.dist},Nf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Nf.prototype.interfaces_=function(){return[$a]},Nf.prototype.getClass=function(){return Nf};var Tf=function(){this._nodeMap=new Ii,this.edge=null;var t=arguments[0];this.edge=t};Tf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Tf.prototype.iterator=function(){return this._nodeMap.values().iterator()},Tf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),r=e.next();e.hasNext();){var n=e.next(),i=this.createSplitEdge(r,n);t.add(i),r=n}},Tf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Tf.prototype.createSplitEdge=function(t,e){var r=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(n);i||r--;var o=new Array(r).fill(null),s=0;o[s++]=new ru(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new Af(o,new fl(this.edge._label))},Tf.prototype.add=function(t,e,r){var n=new Nf(t,e,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)},Tf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Tf.prototype.interfaces_=function(){return[]},Tf.prototype.getClass=function(){return Tf};var Of=function(){};Of.prototype.getChainStartIndices=function(t){var e=0,r=new rc;r.add(new hu(e));do{var n=this.findChainEnd(t,e);r.add(new hu(n)),e=n}while(e<t.length-1);return Of.toIntArray(r)},Of.prototype.findChainEnd=function(t,e){for(var r=vl.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&vl.quadrant(t[n-1],t[n])===r;)n++;return n-1},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Of.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),r=0;r<e.length;r++)e[r]=t.get(r).intValue();return e};var Lf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Su,this.env2=new Su;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Of;this.startIndex=e.getChainStartIndices(this.pts)};Lf.prototype.getCoordinates=function(){return this.pts},Lf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e>r?e:r},Lf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return e<r?e:r},Lf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[r],e.startIndex[r+1],n)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],f=this.pts[o],h=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,f),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,c),g<u&&this.computeIntersectsForChain(i,d,s,g,u,c)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,c),g<u&&this.computeIntersectsForChain(d,o,s,g,u,c))}},Lf.prototype.getStartIndexes=function(){return this.startIndex},Lf.prototype.computeIntersects=function(t,e){for(var r=0;r<this.startIndex.length-1;r++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(r,t,n,e)},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};var Rf=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var r=0;r<3;r++)this._depth[e][r]=t.NULL_VALUE},kf={NULL_VALUE:{configurable:!0}};Rf.prototype.getDepth=function(t,e){return this._depth[t][e]},Rf.prototype.setDepth=function(t,e,r){this._depth[t][e]=r},Rf.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Rf.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===Rf.NULL_VALUE}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this._depth[n][i]===Rf.NULL_VALUE}},Rf.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var r=1;r<3;r++){var n=0;this._depth[t][r]>e&&(n=1),this._depth[t][r]=n}}},Rf.prototype.getDelta=function(t){return this._depth[t][il.RIGHT]-this._depth[t][il.LEFT]},Rf.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?su.EXTERIOR:su.INTERIOR},Rf.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Rf.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var r=1;r<3;r++){var n=t.getLocation(e,r);n!==su.EXTERIOR&&n!==su.INTERIOR||(this.isNull(e,r)?this._depth[e][r]=Rf.depthAtLocation(n):this._depth[e][r]+=Rf.depthAtLocation(n))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===su.INTERIOR&&this._depth[i][o]++}},Rf.prototype.interfaces_=function(){return[]},Rf.prototype.getClass=function(){return Rf},Rf.depthAtLocation=function(t){return t===su.EXTERIOR?0:t===su.INTERIOR?1:Rf.NULL_VALUE},kf.NULL_VALUE.get=function(){return-1},Object.defineProperties(Rf,kf);var Af=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Tf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Rf,this._depthDelta=0,1===arguments.length){var r=arguments[0];e.call(this,r,null)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.pts=n,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,fl.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var n=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(r.pts[s])||(n=!1),this.pts[s].equals2D(r.pts[--o])||(i=!1),!n&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Lf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Su;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,r,n){var i=new ru(t.getIntersection(n)),o=e,s=t.getEdgeDistance(r,n),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new fu;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],r=arguments[1];r.setAtLeastIfValid(e.getLocation(0,il.ON),e.getLocation(1,il.ON),1),e.isArea()&&(r.setAtLeastIfValid(e.getLocation(0,il.LEFT),e.getLocation(1,il.LEFT),2),r.setAtLeastIfValid(e.getLocation(0,il.RIGHT),e.getLocation(1,il.RIGHT),2))},e}(gl),Df=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new If,this._bufParams=t||null};Df.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Df.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new fl(t.getLabel())).flip(),r.merge(n);var i=Df.depthDelta(n),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(Df.depthDelta(t.getLabel()))},Df.prototype.buildSubgraphs=function(t,e){for(var r=new rc,n=t.iterator();n.hasNext();){var i=n.next(),o=i.getRightmostCoordinate(),s=new df(r).getDepth(o);i.computeDepth(s),i.findResultEdges(),r.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Df.prototype.createSubgraphs=function(t){for(var e=new rc,r=t.getNodes().iterator();r.hasNext();){var n=r.next();if(!n.isVisited()){var i=new cl;i.create(n),e.add(i)}}return Ll.sort(e,Ll.reverseOrder()),e},Df.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Df.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new tf,r=new Du;return r.setPrecisionModel(t),e.setSegmentIntersector(new Mf(r)),e},Df.prototype.buffer=function(t,e){var r=this._workingPrecisionModel;null===r&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new pf(r,this._bufParams),i=new vf(t,e,n).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,r),this._graph=new El(new Sf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Sl(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},Df.prototype.computeNodedEdges=function(t,e){var r=this.getNoder(e);r.computeNodes(t);for(var n=r.getNodedSubstrings().iterator();n.hasNext();){var i=n.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new Af(i.getCoordinates(),new fl(s));this.insertUniqueEdge(a)}}},Df.prototype.setNoder=function(t){this._workingNoder=t},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df},Df.depthDelta=function(t){var e=t.getLocation(0,il.LEFT),r=t.getLocation(0,il.RIGHT);return e===su.INTERIOR&&r===su.EXTERIOR?1:e===su.EXTERIOR&&r===su.INTERIOR?-1:0},Df.convertSegStrings=function(t){for(var e=new Zc,r=new rc;t.hasNext();){var n=t.next(),i=e.createLineString(n.getCoordinates());r.add(i)}return e.buildGeometry(r)};var Ff=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];this._noder=r,this._scaleFactor=n,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Ff.prototype.rescale=function(){if(uu(arguments[0],Qu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],n=0;n<r.length;n++)r[n].x=r[n].x/this._scaleFactor+this._offsetX,r[n].y=r[n].y/this._scaleFactor+this._offsetY;2===r.length&&r[0].equals2D(r[1])&&xu.out.println(r)}},Ff.prototype.scale=function(){if(uu(arguments[0],Qu)){for(var t=arguments[0],e=new rc,r=t.iterator();r.hasNext();){var n=r.next();e.add(new Xl(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new ru(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].z);return oc.removeRepeatedPoints(o)}},Ff.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Ff.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Ff.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Ff.prototype.interfaces_=function(){return[Ql]},Ff.prototype.getClass=function(){return Ff};var jf=function(){this._li=new Du,this._segStrings=null;var t=arguments[0];this._segStrings=t},Bf={fact:{configurable:!0}};jf.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var r=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var i=n.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(r))throw new Ou("found endpt/interior pt intersection at index "+o+" :pt "+r)},jf.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),r=this._segStrings.iterator();r.hasNext();){var n=r.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],f=arguments[1],h=arguments[2],p=arguments[3];if(l===h&&f===p)return null;var d=l.getCoordinates()[f],g=l.getCoordinates()[f+1],y=h.getCoordinates()[p],m=h.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,y,m)))throw new Ou("found non-noded intersection at "+d+"-"+g+" and "+y+"-"+m)}},jf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},jf.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),n=0;n<r.length-2;n++)this.checkCollapse(r[n],r[n+1],r[n+2])},jf.prototype.hasInteriorIntersection=function(t,e,r){for(var n=0;n<t.getIntersectionNum();n++){var i=t.getIntersection(n);if(!i.equals(e)&&!i.equals(r))return!0}return!1},jf.prototype.checkCollapse=function(t,e,r){if(t.equals(r))throw new Ou("found non-noded collapse at "+jf.fact.createLineString([t,e,r]))},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},Bf.fact.get=function(){return new Zc},Object.defineProperties(jf,Bf);var Gf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=r,e<=0)throw new Za("Scale factor must be non-zero");1!==e&&(this._pt=new ru(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ru,this._p1Scaled=new ru),this.initCorners(this._pt)},qf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Gf.prototype.intersectsScaled=function(t,e){var r=Math.min(t.x,e.x),n=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<r||this._minx>n||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Ru.isTrue(!(s&&a),"Found bad envelope test"),a},Gf.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new ru(this._maxx,this._maxy),this._corner[1]=new ru(this._minx,this._maxy),this._corner[2]=new ru(this._minx,this._miny),this._corner[3]=new ru(this._maxx,this._miny)},Gf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Gf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Gf.prototype.getCoordinate=function(){return this._originalPt},Gf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Gf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Gf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Su(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Gf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Gf.prototype.intersectsToleranceSquare=function(t,e){var r=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||r&&n||t.equals(this._pt)||e.equals(this._pt)))))},Gf.prototype.addSnappedNode=function(t,e){var r=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(r,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},qf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Gf,qf);var Uf=function(){this.tempEnv1=new Su,this.selectedSegment=new Wl};Uf.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf};var zf=function(){this._index=null;var t=arguments[0];this._index=t},Yf={HotPixelSnapAction:{configurable:!0}};zf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2],i=e.getSafeEnvelope(),o=new Vf(e,r,n);return this._index.query(i,{interfaces_:function(){return[Ml]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf},Yf.HotPixelSnapAction.get=function(){return Vf},Object.defineProperties(zf,Yf);var Vf=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],r=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=r,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],r=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uf),Xf=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new rc};Xf.prototype.processIntersections=function(t,e,r,n){if(t===r&&e===n)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)}},Xf.prototype.isDone=function(){return!1},Xf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Xf.prototype.interfaces_=function(){return[Pf]},Xf.prototype.getClass=function(){return Xf};var Wf=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Du,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Wf.prototype.checkCorrectness=function(t){var e=Xl.getNodedSubstrings(t),r=new jf(e);try{r.checkValid()}catch(t){if(!(t instanceof bu))throw t;t.printStackTrace()}},Wf.prototype.getNodedSubstrings=function(){return Xl.getNodedSubstrings(this._nodedSegStrings)},Wf.prototype.snapRound=function(t,e){var r=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)},Wf.prototype.findInteriorIntersections=function(t,e){var r=new Xf(e);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()},Wf.prototype.computeVertexSnaps=function(){if(uu(arguments[0],Qu))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Xl)for(var r=arguments[0],n=r.getCoordinates(),i=0;i<n.length;i++){var o=new Gf(n[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,r,i)&&r.addIntersection(n[i],i)}},Wf.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new tf,this._pointSnapper=new zf(this._noder.getIndex()),this.snapRound(t,this._li)},Wf.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=new Gf(r,this._scaleFactor,this._li);this._pointSnapper.snap(n)}},Wf.prototype.interfaces_=function(){return[Ql]},Wf.prototype.getClass=function(){return Wf};var Hf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new rf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._argGeom=e,this._bufParams=r}},Kf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Hf.prototype.bufferFixedPrecision=function(t){var e=new Ff(new Wf(new Xc(1)),t.getScale()),r=new Df(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(e),this._resultGeometry=r.buffer(this._argGeom,this._distance)},Hf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Hf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof al))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],n=Hf.precisionScaleFactor(this._argGeom,this._distance,r),i=new Xc(n);this.bufferFixedPrecision(i)}},Hf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Xc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Hf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Hf.prototype.bufferOriginalPrecision=function(){try{var t=new Df(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Ou))throw t;this._saveException=t}},Hf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Hf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Hf.prototype.interfaces_=function(){return[]},Hf.prototype.getClass=function(){return Hf},Hf.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Hf(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Uu&&"number"==typeof arguments[1]){var r=arguments[0],n=arguments[1],i=arguments[2],o=new Hf(r);return o.setQuadrantSegments(i),o.getResultGeometry(n)}if(arguments[2]instanceof rf&&arguments[0]instanceof Uu&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=arguments[2];return new Hf(s,u).getResultGeometry(a)}}else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],h=arguments[3],p=new Hf(c);return p.setQuadrantSegments(f),p.setEndCapStyle(h),p.getResultGeometry(l)}},Hf.precisionScaleFactor=function(t,e,r){var n=t.getEnvelopeInternal(),i=cu.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=r-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Kf.CAP_ROUND.get=function(){return rf.CAP_ROUND},Kf.CAP_BUTT.get=function(){return rf.CAP_FLAT},Kf.CAP_FLAT.get=function(){return rf.CAP_FLAT},Kf.CAP_SQUARE.get=function(){return rf.CAP_SQUARE},Kf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Hf,Kf);var Zf=function(){this._pt=[new ru,new ru],this._distance=Ja.NaN,this._isNull=!0};Zf.prototype.getCoordinates=function(){return this._pt},Zf.prototype.getCoordinate=function(t){return this._pt[t]},Zf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},Zf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},Zf.prototype.getDistance=function(){return this._distance},Zf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf};var Jf=function(){};Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.computeDistance=function(){if(arguments[2]instanceof Zf&&arguments[0]instanceof Mc&&arguments[1]instanceof ru)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=t.getCoordinates(),i=new Wl,o=0;o<n.length-1;o++){i.setCoordinates(n[o],n[o+1]);var s=i.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof Zf&&arguments[0]instanceof Lc&&arguments[1]instanceof ru){var a=arguments[0],u=arguments[1],c=arguments[2];Jf.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)Jf.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Zf&&arguments[0]instanceof Uu&&arguments[1]instanceof ru){var f=arguments[0],h=arguments[1],p=arguments[2];if(f instanceof Mc)Jf.computeDistance(f,h,p);else if(f instanceof Lc)Jf.computeDistance(f,h,p);else if(f instanceof wc)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Jf.computeDistance(y,h,p)}else p.setMinimum(f.getCoordinate(),h)}else if(arguments[2]instanceof Zf&&arguments[0]instanceof Wl&&arguments[1]instanceof ru){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var Qf=function(t){this._maxPtDist=new Zf,this._inputGeom=t||null},$f={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Qf.prototype.computeMaxMidpointDistance=function(t){var e=new eh(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Qf.prototype.computeMaxVertexDistance=function(t){var e=new th(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Qf.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Qf.prototype.getDistancePoints=function(){return this._maxPtDist},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf},$f.MaxPointDistanceFilter.get=function(){return th},$f.MaxMidpointDistanceFilter.get=function(){return eh},Object.defineProperties(Qf,$f);var th=function(t){this._maxPtDist=new Zf,this._minPtDist=new Zf,this._geom=t||null};th.prototype.filter=function(t){this._minPtDist.initialize(),Jf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},th.prototype.getMaxPointDistance=function(){return this._maxPtDist},th.prototype.interfaces_=function(){return[Vu]},th.prototype.getClass=function(){return th};var eh=function(t){this._maxPtDist=new Zf,this._minPtDist=new Zf,this._geom=t||null};eh.prototype.filter=function(t,e){if(0===e)return null;var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=new ru((r.x+n.x)/2,(r.y+n.y)/2);this._minPtDist.initialize(),Jf.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},eh.prototype.isDone=function(){return!1},eh.prototype.isGeometryChanged=function(){return!1},eh.prototype.getMaxPointDistance=function(){return this._maxPtDist},eh.prototype.interfaces_=function(){return[bc]},eh.prototype.getClass=function(){return eh};var rh=function(t){this._comps=t||null};rh.prototype.filter=function(t){t instanceof Lc&&this._comps.add(t)},rh.prototype.interfaces_=function(){return[_c]},rh.prototype.getClass=function(){return rh},rh.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return rh.getPolygons(t,new rc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof Lc?r.add(e):e instanceof wc&&e.apply(new rh(r)),r}};var nh=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],r=arguments[1];this._lines=e,this._isForcedToLineString=r}};nh.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof kc){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Mc&&this._lines.add(t)},nh.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},nh.prototype.interfaces_=function(){return[qu]},nh.prototype.getClass=function(){return nh},nh.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(nh.getLines(t))}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().buildGeometry(nh.getLines(e,r))}},nh.getLines=function(){if(1===arguments.length){var t=arguments[0];return nh.getLines(t,!1)}if(2===arguments.length){if(uu(arguments[0],Qu)&&uu(arguments[1],Qu)){for(var e=arguments[0],r=arguments[1],n=e.iterator();n.hasNext();){var i=n.next();nh.getLines(i,r)}return r}if(arguments[0]instanceof Uu&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new rc;return o.apply(new nh(a,s)),a}if(arguments[0]instanceof Uu&&uu(arguments[1],Qu)){var u=arguments[0],c=arguments[1];return u instanceof Mc?c.add(u):u.apply(new nh(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&uu(arguments[0],Qu)&&uu(arguments[1],Qu)){for(var l=arguments[0],f=arguments[1],h=arguments[2],p=l.iterator();p.hasNext();){var d=p.next();nh.getLines(d,f,h)}return f}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Uu&&uu(arguments[1],Qu)){var g=arguments[0],y=arguments[1],m=arguments[2];return g.apply(new nh(y,m)),y}}};var ih=function(){if(this._boundaryRule=Xu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new Za("Rule must be non-null");this._boundaryRule=t}};ih.prototype.locateInternal=function(){if(arguments[0]instanceof ru&&arguments[1]instanceof Lc){var t=arguments[0],e=arguments[1];if(e.isEmpty())return su.EXTERIOR;var r=e.getExteriorRing(),n=this.locateInPolygonRing(t,r);if(n===su.EXTERIOR)return su.EXTERIOR;if(n===su.BOUNDARY)return su.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,o);if(s===su.INTERIOR)return su.EXTERIOR;if(s===su.BOUNDARY)return su.BOUNDARY}return su.INTERIOR}if(arguments[0]instanceof ru&&arguments[1]instanceof Mc){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return su.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!a.equals(c[0])&&!a.equals(c[c.length-1])?Bu.isOnLine(a,c)?su.INTERIOR:su.EXTERIOR:su.BOUNDARY}if(arguments[0]instanceof ru&&arguments[1]instanceof Tc){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?su.INTERIOR:su.EXTERIOR}},ih.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Bu.locatePointInRing(t,e.getCoordinates()):su.EXTERIOR},ih.prototype.intersects=function(t,e){return this.locate(t,e)!==su.EXTERIOR},ih.prototype.updateLocationInfo=function(t){t===su.INTERIOR&&(this._isIn=!0),t===su.BOUNDARY&&this._numBoundaries++},ih.prototype.computeLocation=function(t,e){if(e instanceof Tc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Mc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Lc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof xc)for(var r=e,n=0;n<r.getNumGeometries();n++){var i=r.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof Ac)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof wc)for(var u=new bf(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},ih.prototype.locate=function(t,e){return e.isEmpty()?su.EXTERIOR:e instanceof Mc?this.locateInternal(t,e):e instanceof Lc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?su.BOUNDARY:this._numBoundaries>0||this._isIn?su.INTERIOR:su.EXTERIOR)},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih};var oh=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],r=arguments[1];t.call(this,e,t.INSIDE_AREA,r)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._component=n,this._segIndex=i,this._pt=o}},sh={INSIDE_AREA:{configurable:!0}};oh.prototype.isInsideArea=function(){return this._segIndex===oh.INSIDE_AREA},oh.prototype.getCoordinate=function(){return this._pt},oh.prototype.getGeometryComponent=function(){return this._component},oh.prototype.getSegmentIndex=function(){return this._segIndex},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh},sh.INSIDE_AREA.get=function(){return-1},Object.defineProperties(oh,sh);var ah=function(t){this._pts=t||null};ah.prototype.filter=function(t){t instanceof Tc&&this._pts.add(t)},ah.prototype.interfaces_=function(){return[_c]},ah.prototype.getClass=function(){return ah},ah.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Tc?Ll.singletonList(t):ah.getPoints(t,new rc)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e instanceof Tc?r.add(e):e instanceof wc&&e.apply(new ah(r)),r}};var uh=function(){this._locations=null;var t=arguments[0];this._locations=t};uh.prototype.filter=function(t){(t instanceof Tc||t instanceof Mc||t instanceof Lc)&&this._locations.add(new oh(t,0,t.getCoordinate()))},uh.prototype.interfaces_=function(){return[_c]},uh.prototype.getClass=function(){return uh},uh.getLocations=function(t){var e=new rc;return t.apply(new uh(e)),e};var ch=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new ih,this._minDistanceLocation=null,this._minDistance=Ja.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=n,this._terminateDistance=i}};ch.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=1-e,i=rh.getPolygons(this._geom[e]);if(i.size()>0){var o=uh.getLocations(this._geom[n]);if(this.computeContainmentDistance(o,i,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=r[0],this._minDistanceLocation[e]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&uu(arguments[0],ec)&&uu(arguments[1],ec)){for(var s=arguments[0],a=arguments[1],u=arguments[2],c=0;c<s.size();c++)for(var l=s.get(c),f=0;f<a.size();f++)if(this.computeContainmentDistance(l,a.get(f),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof oh&&arguments[1]instanceof Lc){var h=arguments[0],p=arguments[1],d=arguments[2],g=h.getCoordinate();if(su.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=h,d[1]=new oh(p,g),null}},ch.prototype.computeMinDistanceLinesPoints=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,r),this._minDistance<=this._terminateDistance)return null}},ch.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=nh.getLines(this._geom[0]),r=nh.getLines(this._geom[1]),n=ah.getPoints(this._geom[0]),i=ah.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,i,t),void this.updateMinDistance(t,!1))))},ch.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ch.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},ch.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ch.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Mc&&arguments[1]instanceof Tc){var t=arguments[0],e=arguments[1],r=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var n=t.getCoordinates(),i=e.getCoordinate(),o=0;o<n.length-1;o++){var s=Bu.distancePointLine(i,n[o],n[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new Wl(n[o],n[o+1]).closestPoint(i);r[0]=new oh(t,o,a),r[1]=new oh(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Mc&&arguments[1]instanceof Mc){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=u.getCoordinates(),h=c.getCoordinates(),p=0;p<f.length-1;p++)for(var d=0;d<h.length-1;d++){var g=Bu.distanceLineLine(f[p],f[p+1],h[d],h[d+1]);if(g<this._minDistance){this._minDistance=g;var y=new Wl(f[p],f[p+1]),m=new Wl(h[d],h[d+1]),v=y.closestPoints(m);l[0]=new oh(u,p,v[0]),l[1]=new oh(c,d,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},ch.prototype.computeMinDistancePoints=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var s=e.get(o),a=i.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,r[0]=new oh(i,0,i.getCoordinate()),r[1]=new oh(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},ch.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Za("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ch.prototype.computeMinDistanceLines=function(t,e,r){for(var n=0;n<t.size();n++)for(var i=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(i,s,r),this._minDistance<=this._terminateDistance)return null}},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch},ch.distance=function(t,e){return new ch(t,e).distance()},ch.isWithinDistance=function(t,e,r){return new ch(t,e,r).distance()<=r},ch.nearestPoints=function(t,e){return new ch(t,e).nearestPoints()};var lh=function(){this._pt=[new ru,new ru],this._distance=Ja.NaN,this._isNull=!0};lh.prototype.getCoordinates=function(){return this._pt},lh.prototype.getCoordinate=function(t){return this._pt[t]},lh.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n<this._distance&&this.initialize(e,r,n)}},lh.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(n),this._distance=i,this._isNull=!1}},lh.prototype.toString=function(){return Tu.toLineString(this._pt[0],this._pt[1])},lh.prototype.getDistance=function(){return this._distance},lh.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(e,r),null;var n=e.distance(r);n>this._distance&&this.initialize(e,r,n)}},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var fh=function(){};fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh},fh.computeDistance=function(){if(arguments[2]instanceof lh&&arguments[0]instanceof Mc&&arguments[1]instanceof ru)for(var t=arguments[0],e=arguments[1],r=arguments[2],n=new Wl,i=t.getCoordinates(),o=0;o<i.length-1;o++){n.setCoordinates(i[o],i[o+1]);var s=n.closestPoint(e);r.setMinimum(s,e)}else if(arguments[2]instanceof lh&&arguments[0]instanceof Lc&&arguments[1]instanceof ru){var a=arguments[0],u=arguments[1],c=arguments[2];fh.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)fh.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof lh&&arguments[0]instanceof Uu&&arguments[1]instanceof ru){var f=arguments[0],h=arguments[1],p=arguments[2];if(f instanceof Mc)fh.computeDistance(f,h,p);else if(f instanceof Lc)fh.computeDistance(f,h,p);else if(f instanceof wc)for(var d=f,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);fh.computeDistance(y,h,p)}else p.setMinimum(f.getCoordinate(),h)}else if(arguments[2]instanceof lh&&arguments[0]instanceof Wl&&arguments[1]instanceof ru){var m=arguments[0],v=arguments[1],_=arguments[2],b=m.closestPoint(v);_.setMinimum(b,v)}};var hh=function(){this._g0=null,this._g1=null,this._ptDist=new lh,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},ph={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};hh.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},hh.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Za("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},hh.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},hh.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},hh.prototype.computeOrientedDistance=function(t,e,r){var n=new dh(e);if(t.apply(n),r.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var i=new gh(e,this._densifyFrac);t.apply(i),r.setMaximum(i.getMaxPointDistance())}},hh.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh},hh.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new hh(t,e).distance()}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new hh(r,n);return o.setDensifyFraction(i),o.distance()}},ph.MaxPointDistanceFilter.get=function(){return dh},ph.MaxDensifiedByFractionDistanceFilter.get=function(){return gh},Object.defineProperties(hh,ph);var dh=function(){this._maxPtDist=new lh,this._minPtDist=new lh,this._euclideanDist=new fh,this._geom=null;var t=arguments[0];this._geom=t};dh.prototype.filter=function(t){this._minPtDist.initialize(),fh.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},dh.prototype.getMaxPointDistance=function(){return this._maxPtDist},dh.prototype.interfaces_=function(){return[Vu]},dh.prototype.getClass=function(){return dh};var gh=function(){this._maxPtDist=new lh,this._minPtDist=new lh,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};gh.prototype.filter=function(t,e){if(0===e)return null;for(var r=t.getCoordinate(e-1),n=t.getCoordinate(e),i=(n.x-r.x)/this._numSubSegs,o=(n.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=r.x+s*i,u=r.y+s*o,c=new ru(a,u);this._minPtDist.initialize(),fh.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},gh.prototype.isDone=function(){return!1},gh.prototype.isGeometryChanged=function(){return!1},gh.prototype.getMaxPointDistance=function(){return this._maxPtDist},gh.prototype.interfaces_=function(){return[bc]},gh.prototype.getClass=function(){return gh};var yh=function(t,e,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=r||null},mh={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};yh.prototype.checkMaximumDistance=function(t,e,r){var n=new hh(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var i=n.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Tu.toLineString(i[0],i[1])+")"}},yh.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=yh.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),yh.VERBOSE&&xu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},yh.prototype.checkNegativeValid=function(){if(!(this._input instanceof Lc||this._input instanceof Ac||this._input instanceof wc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},yh.prototype.getErrorIndicator=function(){return this._errorIndicator},yh.prototype.checkMinimumDistance=function(t,e,r){var n=new ch(t,e,r);if(this._minDistanceFound=n.distance(),this._minDistanceFound<r){this._isValid=!1;var i=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Tu.toLineString(i[0],i[1])+" )"}},yh.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},yh.prototype.getErrorLocation=function(){return this._errorLocation},yh.prototype.getPolygonLines=function(t){for(var e=new rc,r=new nh(e),n=rh.getPolygons(t).iterator();n.hasNext();)n.next().apply(r);return t.getFactory().buildGeometry(e)},yh.prototype.getErrorMessage=function(){return this._errMsg},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh},mh.VERBOSE.get=function(){return!1},mh.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(yh,mh);var vh=function(t,e,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=r||null},_h={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};vh.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},vh.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*vh.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Su(this._input.getEnvelopeInternal());e.expandBy(this._distance);var r=new Su(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")},vh.prototype.checkDistance=function(){var t=new yh(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},vh.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},vh.prototype.checkPolygonal=function(){this._result instanceof Lc||this._result instanceof Ac||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},vh.prototype.getErrorIndicator=function(){return this._errorIndicator},vh.prototype.getErrorLocation=function(){return this._errorLocation},vh.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},vh.prototype.report=function(t){if(!vh.VERBOSE)return null;xu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},vh.prototype.getErrorMessage=function(){return this._errorMsg},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh},vh.isValidMsg=function(t,e,r){var n=new vh(t,e,r);return n.isValid()?null:n.getErrorMessage()},vh.isValid=function(t,e,r){return!!new vh(t,e,r).isValid()},_h.VERBOSE.get=function(){return!1},_h.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(vh,_h);var bh=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};bh.prototype.getCoordinates=function(){return this._pts},bh.prototype.size=function(){return this._pts.length},bh.prototype.getCoordinate=function(t){return this._pts[t]},bh.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},bh.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:zl.octant(this.getCoordinate(t),this.getCoordinate(t+1))},bh.prototype.setData=function(t){this._data=t},bh.prototype.getData=function(){return this._data},bh.prototype.toString=function(){return Tu.toLineString(new qc(this._pts))},bh.prototype.interfaces_=function(){return[Yl]},bh.prototype.getClass=function(){return bh};var wh=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new rc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};wh.prototype.getInteriorIntersection=function(){return this._interiorIntersection},wh.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},wh.prototype.getIntersectionSegments=function(){return this._intSegments},wh.prototype.count=function(){return this._intersectionCount},wh.prototype.getIntersections=function(){return this._intersections},wh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},wh.prototype.setKeepIntersections=function(t){this._keepIntersections=t},wh.prototype.processIntersections=function(t,e,r,n){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===r&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(r,n))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},wh.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},wh.prototype.hasIntersection=function(){return null!==this._interiorIntersection},wh.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},wh.prototype.interfaces_=function(){return[Pf]},wh.prototype.getClass=function(){return wh},wh.createAllIntersectionsFinder=function(t){var e=new wh(t);return e.setFindAllIntersections(!0),e},wh.createAnyIntersectionFinder=function(t){return new wh(t)},wh.createIntersectionCounter=function(t){var e=new wh(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var xh=function(){this._li=new Du,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};xh.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},xh.prototype.getIntersections=function(){return this._segInt.getIntersections()},xh.prototype.isValid=function(){return this.execute(),this._isValid},xh.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},xh.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new wh(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new tf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},xh.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new al(this.getErrorMessage(),this._segInt.getInteriorIntersection())},xh.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Tu.toLineString(t[0],t[1])+" and "+Tu.toLineString(t[2],t[3])},xh.prototype.interfaces_=function(){return[]},xh.prototype.getClass=function(){return xh},xh.computeIntersections=function(t){var e=new xh(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Eh=function t(){this._nv=null;var e=arguments[0];this._nv=new xh(t.toSegmentStrings(e))};Eh.prototype.checkValid=function(){this._nv.checkValid()},Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.toSegmentStrings=function(t){for(var e=new rc,r=t.iterator();r.hasNext();){var n=r.next();e.add(new bh(n.getCoordinates(),n))}return e},Eh.checkValid=function(t){new Eh(t).checkValid()};var Sh=function(t){this._mapOp=t};Sh.prototype.map=function(t){for(var e=new rc,r=0;r<t.getNumGeometries();r++){var n=this._mapOp.map(t.getGeometryN(r));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(Zc.toGeometryArray(e))},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh},Sh.map=function(t,e){return new Sh(e).map(t)};var Ch=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new rc,this._resultLineList=new rc;var t=arguments[0],e=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=r};Ch.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next();this.collectLineEdge(r,t,this._lineEdgesList),this.collectBoundaryTouchEdge(r,t,this._lineEdgesList)}},Ch.prototype.labelIsolatedLine=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,r)},Ch.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Ch.prototype.collectLineEdge=function(t,e,r){var n=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!op.isResultOfOp(n,e)||i.isCovered()||(r.add(i),t.setVisitedEdge(!0)))},Ch.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var r=e.next(),n=r.getEdge();if(r.isLineEdge()&&!n.isCoveredSet()){var i=this._op.isCoveredByA(r.getCoordinate());n.setCovered(i)}}},Ch.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next(),n=r.getLabel();r.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(r,0):this.labelIsolatedLine(r,1))}},Ch.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var r=e.next(),n=this._geometryFactory.createLineString(r.getCoordinates());this._resultLineList.add(n),r.setInResult(!0)}},Ch.prototype.collectBoundaryTouchEdge=function(t,e,r){var n=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(Ru.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(op.isResultOfOp(n,e)&&e===op.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))))},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Ih=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new rc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Ih.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var r=this._geometryFactory.createPoint(e);this._resultPointList.add(r)}},Ih.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var r=e.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==op.INTERSECTION)){var n=r.getLabel();op.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r)}}},Ih.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih};var Ph=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ph.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Ph.prototype.transformPolygon=function(t,e){var r=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof kc&&!n.isEmpty()||(r=!1);for(var i=new rc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof kc||(r=!1),i.add(s))}if(r)return this._factory.createPolygon(n,i.toArray([]));var a=new rc;return null!==n&&a.add(n),a.addAll(i),this._factory.buildGeometry(a)},Ph.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Ph.prototype.getInputGeometry=function(){return this._inputGeom},Ph.prototype.transformMultiLineString=function(t,e){for(var r=new rc,n=0;n<t.getNumGeometries();n++){var i=this.transformLineString(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Ph.prototype.transformCoordinates=function(t,e){return this.copy(t)},Ph.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Ph.prototype.transformMultiPoint=function(t,e){for(var r=new rc,n=0;n<t.getNumGeometries();n++){var i=this.transformPoint(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Ph.prototype.transformMultiPolygon=function(t,e){for(var r=new rc,n=0;n<t.getNumGeometries();n++){var i=this.transformPolygon(t.getGeometryN(n),t);null!==i&&(i.isEmpty()||r.add(i))}return this._factory.buildGeometry(r)},Ph.prototype.copy=function(t){return t.copy()},Ph.prototype.transformGeometryCollection=function(t,e){for(var r=new rc,n=0;n<t.getNumGeometries();n++){var i=this.transform(t.getGeometryN(n));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||r.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Zc.toGeometryArray(r)):this._factory.buildGeometry(r)},Ph.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Tc)return this.transformPoint(t,null);if(t instanceof Rc)return this.transformMultiPoint(t,null);if(t instanceof kc)return this.transformLinearRing(t,null);if(t instanceof Mc)return this.transformLineString(t,null);if(t instanceof xc)return this.transformMultiLineString(t,null);if(t instanceof Lc)return this.transformPolygon(t,null);if(t instanceof Ac)return this.transformMultiPolygon(t,null);if(t instanceof wc)return this.transformGeometryCollection(t,null);throw new Za("Unknown Geometry subtype: "+t.getClass().getName())},Ph.prototype.transformLinearRing=function(t,e){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===r)return this._factory.createLinearRing(null);var n=r.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)},Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph};var Mh=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Wl,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Mc&&"number"==typeof arguments[1]){var e=arguments[0],r=arguments[1];t.call(this,e.getCoordinates(),r)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};Mh.prototype.snapVertices=function(t,e){for(var r=this._isClosed?t.size()-1:t.size(),n=0;n<r;n++){var i=t.get(n),o=this.findSnapForVertex(i,e);null!==o&&(t.set(n,new ru(o)),0===n&&this._isClosed&&t.set(t.size()-1,new ru(o)))}},Mh.prototype.findSnapForVertex=function(t,e){for(var r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<this._snapTolerance)return e[r]}return null},Mh.prototype.snapTo=function(t){var e=new ic(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Mh.prototype.snapSegments=function(t,e){if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var n=0;n<r;n++){var i=e[n],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new ru(i),!1)}},Mh.prototype.findSegmentIndexToSnap=function(t,e){for(var r=Ja.MAX_VALUE,n=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<r&&(r=o,n=i)}return n},Mh.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Nh=function(t){this._srcGeom=t||null},Th={SNAP_PRECISION_FACTOR:{configurable:!0}};Nh.prototype.snapTo=function(t,e){var r=this.extractTargetCoordinates(t);return new Oh(e,r).transform(this._srcGeom)},Nh.prototype.snapToSelf=function(t,e){var r=this.extractTargetCoordinates(this._srcGeom),n=new Oh(t,r,!0).transform(this._srcGeom),i=n;return e&&uu(i,Oc)&&(i=n.buffer(0)),i},Nh.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Nh.prototype.extractTargetCoordinates=function(t){for(var e=new Mi,r=t.getCoordinates(),n=0;n<r.length;n++)e.add(r[n]);return e.toArray(new Array(0).fill(null))},Nh.prototype.computeMinimumSegmentLength=function(t){for(var e=Ja.MAX_VALUE,r=0;r<t.length-1;r++){var n=t[r].distance(t[r+1]);n<e&&(e=n)}return e},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.snap=function(t,e,r){var n=new Array(2).fill(null),i=new Nh(t);n[0]=i.snapTo(e,r);var o=new Nh(e);return n[1]=o.snapTo(n[0],r),n},Nh.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Nh.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===Xc.FIXED){var n=1/r.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Nh.computeOverlaySnapTolerance(i),Nh.computeOverlaySnapTolerance(o))}},Nh.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Nh.SNAP_PRECISION_FACTOR},Nh.snapToSelf=function(t,e,r){return new Nh(t).snapToSelf(e,r)},Th.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Nh,Th);var Oh=function(t){function e(e,r,n){t.call(this),this._snapTolerance=e||null,this._snapPts=r||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var r=new Mh(t,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var r=t.toCoordinateArray(),n=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ph),Lh=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Lh.prototype.getCommon=function(){return Ja.longBitsToDouble(this._commonBits)},Lh.prototype.add=function(t){var e=Ja.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Lh.signExpBits(this._commonBits),this._isFirst=!1,null):Lh.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Lh.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Lh.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Lh.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Ja.longBitsToDouble(t),r="0000000000000000000000000000000000000000000000000000000000000000"+Ja.toBinaryString(t),n=r.substring(r.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh},Lh.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Lh.signExpBits=function(t){return t>>52},Lh.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Lh.numCommonMostSigMantissaBits=function(t,e){for(var r=0,n=52;n>=0;n--){if(Lh.getBit(t,n)!==Lh.getBit(e,n))return r;r++}return 52};var Rh=function(){this._commonCoord=null,this._ccFilter=new Ah},kh={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Rh.prototype.addCommonBits=function(t){var e=new Dh(this._commonCoord);t.apply(e),t.geometryChanged()},Rh.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ru(this._commonCoord);e.x=-e.x,e.y=-e.y;var r=new Dh(e);return t.apply(r),t.geometryChanged(),t},Rh.prototype.getCommonCoordinate=function(){return this._commonCoord},Rh.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Rh.prototype.interfaces_=function(){return[]},Rh.prototype.getClass=function(){return Rh},kh.CommonCoordinateFilter.get=function(){return Ah},kh.Translater.get=function(){return Dh},Object.defineProperties(Rh,kh);var Ah=function(){this._commonBitsX=new Lh,this._commonBitsY=new Lh};Ah.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Ah.prototype.getCommonCoordinate=function(){return new ru(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Ah.prototype.interfaces_=function(){return[Vu]},Ah.prototype.getClass=function(){return Ah};var Dh=function(){this.trans=null;var t=arguments[0];this.trans=t};Dh.prototype.filter=function(t,e){var r=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,r),t.setOrdinate(e,1,n)},Dh.prototype.isDone=function(){return!1},Dh.prototype.isGeometryChanged=function(){return!0},Dh.prototype.interfaces_=function(){return[bc]},Dh.prototype.getClass=function(){return Dh};var Fh=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Fh.prototype.selfSnap=function(t){return new Nh(t).snapTo(t,this._snapTolerance)},Fh.prototype.removeCommonBits=function(t){this._cbr=new Rh,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Fh.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Fh.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),r=op.overlayOp(e[0],e[1],t);return this.prepareResult(r)},Fh.prototype.checkValid=function(t){t.isValid()||xu.out.println("Snapped geometry is invalid")},Fh.prototype.computeSnapTolerance=function(){this._snapTolerance=Nh.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Fh.prototype.snap=function(t){var e=this.removeCommonBits(t);return Nh.snap(e[0],e[1],this._snapTolerance)},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh},Fh.overlayOp=function(t,e,r){return new Fh(t,e).getResultGeometry(r)},Fh.union=function(t,e){return Fh.overlayOp(t,e,op.UNION)},Fh.intersection=function(t,e){return Fh.overlayOp(t,e,op.INTERSECTION)},Fh.symDifference=function(t,e){return Fh.overlayOp(t,e,op.SYMDIFFERENCE)},Fh.difference=function(t,e){return Fh.overlayOp(t,e,op.DIFFERENCE)};var jh=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};jh.prototype.getResultGeometry=function(t){var e=null,r=!1,n=null;try{e=op.overlayOp(this._geom[0],this._geom[1],t),r=!0}catch(t){if(!(t instanceof Ou))throw t;n=t}if(!r)try{e=Fh.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Ou?n:t}return e},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.overlayOp=function(t,e,r){return new jh(t,e).getResultGeometry(r)},jh.union=function(t,e){return jh.overlayOp(t,e,op.UNION)},jh.intersection=function(t,e){return jh.overlayOp(t,e,op.INTERSECTION)},jh.symDifference=function(t,e){return jh.overlayOp(t,e,op.SYMDIFFERENCE)},jh.difference=function(t,e){return jh.overlayOp(t,e,op.DIFFERENCE)};var Bh=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Bh.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var Gh=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],r=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=r}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=i,this._obj=o}},qh={INSERT:{configurable:!0},DELETE:{configurable:!0}};Gh.prototype.isDelete=function(){return this._eventType===Gh.DELETE},Gh.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Gh.prototype.getObject=function(){return this._obj},Gh.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Gh.prototype.getInsertEvent=function(){return this._insertEvent},Gh.prototype.isInsert=function(){return this._eventType===Gh.INSERT},Gh.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Gh.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Gh.prototype.interfaces_=function(){return[$a]},Gh.prototype.getClass=function(){return Gh},qh.INSERT.get=function(){return 1},qh.DELETE.get=function(){return 2},Object.defineProperties(Gh,qh);var Uh=function(){};Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh};var zh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],r=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=r};zh.prototype.isTrivialIntersection=function(t,e,r,n){if(t===r&&1===this._li.getIntersectionNum()){if(zh.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1},zh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},zh.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},zh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},zh.prototype.isBoundaryPointInternal=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},zh.prototype.hasProperIntersection=function(){return this._hasProper},zh.prototype.hasIntersection=function(){return this._hasIntersection},zh.prototype.isDone=function(){return this._isDone},zh.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},zh.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},zh.prototype.addIntersections=function(t,e,r,n){if(t===r&&e===n)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=r.getCoordinates()[n],a=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh},zh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Yh=function(t){function e(){t.call(this),this.events=new rc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Ll.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var r=this.events.get(e);if(r.isInsert()&&this.processOverlaps(e,r.getDeleteEventIndex(),r,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof zh&&uu(arguments[0],ec)&&uu(arguments[1],ec)){var n=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(n,n),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&uu(arguments[0],ec)&&arguments[1]instanceof zh){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var r=t.getMonotoneChainEdge(),n=r.getStartIndexes(),i=0;i<n.length-1;i++){var o=new Bh(r,i),s=new Gh(e,r.getMinX(i),o);this.events.add(s),this.events.add(new Gh(r.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,r,n){for(var i=r.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();r.isSameLabel(s)||(i.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var r=arguments[0],n=arguments[1],i=r.iterator();i.hasNext();){var o=i.next();this.addEdge(o,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Uh),Vh=function(){this._min=Ja.POSITIVE_INFINITY,this._max=Ja.NEGATIVE_INFINITY},Xh={NodeComparator:{configurable:!0}};Vh.prototype.getMin=function(){return this._min},Vh.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Vh.prototype.getMax=function(){return this._max},Vh.prototype.toString=function(){return Tu.toLineString(new ru(this._min,0),new ru(this._max,0))},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Xh.NodeComparator.get=function(){return Wh},Object.defineProperties(Vh,Xh);var Wh=function(){};Wh.prototype.compare=function(t,e){var r=t,n=e,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0},Wh.prototype.interfaces_=function(){return[eu]},Wh.prototype.getClass=function(){return Wh};var Hh=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],r=arguments[1],n=arguments[2];this._min=e,this._max=r,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vh),Kh=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],r=arguments[1];this._node1=e,this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,r){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,r),null!==this._node2&&this._node2.query(t,e,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vh),Zh=function(){this._leaves=new rc,this._root=null,this._level=0};Zh.prototype.buildTree=function(){Ll.sort(this._leaves,new Vh.NodeComparator);for(var t=this._leaves,e=null,r=new rc;;){if(this.buildLevel(t,r),1===r.size())return r.get(0);e=t,t=r,r=e}},Zh.prototype.insert=function(t,e,r){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Hh(t,e,r))},Zh.prototype.query=function(t,e,r){this.init(),this._root.query(t,e,r)},Zh.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Zh.prototype.printNode=function(t){xu.out.println(Tu.toLineString(new ru(t._min,this._level),new ru(t._max,this._level)))},Zh.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Zh.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var r=0;r<t.size();r+=2){var n=t.get(r);if(null===(r+1<t.size()?t.get(r):null))e.add(n);else{var i=new Kh(t.get(r),t.get(r+1));e.add(i)}}},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var Jh=function(){this._items=new rc};Jh.prototype.visitItem=function(t){this._items.add(t)},Jh.prototype.getItems=function(){return this._items},Jh.prototype.interfaces_=function(){return[Ml]},Jh.prototype.getClass=function(){return Jh};var Qh=function(){this._index=null;var t=arguments[0];if(!uu(t,Oc))throw new Za("Argument must be Polygonal");this._index=new ep(t)},$h={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Qh.prototype.locate=function(t){var e=new ju(t),r=new tp(e);return this._index.query(t.y,t.y,r),e.getLocation()},Qh.prototype.interfaces_=function(){return[_f]},Qh.prototype.getClass=function(){return Qh},$h.SegmentVisitor.get=function(){return tp},$h.IntervalIndexedGeometry.get=function(){return ep},Object.defineProperties(Qh,$h);var tp=function(){this._counter=null;var t=arguments[0];this._counter=t};tp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},tp.prototype.interfaces_=function(){return[Ml]},tp.prototype.getClass=function(){return tp};var ep=function(){this._index=new Zh;var t=arguments[0];this.init(t)};ep.prototype.init=function(t){for(var e=nh.getLines(t).iterator();e.hasNext();){var r=e.next().getCoordinates();this.addLine(r)}},ep.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var r=new Wl(t[e-1],t[e]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}},ep.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new Jh;return this._index.query(t,e,r),r.getItems()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this._index.query(n,i,o)}},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var rp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Vc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new ih,2===arguments.length){var e=arguments[0],r=arguments[1],n=Xu.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=r,this._boundaryNodeRule=n,null!==r&&this.add(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,r){var n=this._nodes.addNode(r).getLabel(),i=1;su.NONE,n.getLocation(t,il.ON)===su.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var r=arguments[0],n=arguments[1],i=arguments[2],o=new zh(r,!0,!1);o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof kc||this._parentGeom instanceof Lc||this._parentGeom instanceof Ac,u=n||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,r){var n=new zh(e,r,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Tc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,su.INTERIOR)}else if(arguments[0]instanceof ru){var e=arguments[0];this.insertPoint(this._argIndex,e,su.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),su.EXTERIOR,su.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var r=t.getInteriorRingN(e);this.addPolygonRing(r,su.INTERIOR,su.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],su.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],su.BOUNDARY)},e.prototype.addLineString=function(t){var e=oc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var r=new Af(e,new fl(this._argIndex,su.INTERIOR));this._lineEdgeMap.put(t,r),this.insertEdge(r),Ru.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),r=0,n=t.iterator();n.hasNext();){var i=n.next();e[r++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,r){if(this.isBoundaryNode(t,e))return null;r===su.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,r)},e.prototype.addPolygonRing=function(t,e,r){if(t.isEmpty())return null;var n=oc.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var i=e,o=r;Bu.isCCW(n)&&(i=r,o=e);var s=new Af(n,new fl(this._argIndex,su.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],su.BOUNDARY)},e.prototype.insertPoint=function(t,e,r){var n=this._nodes.addNode(e),i=n.getLabel();null===i?n._label=new fl(t,r):i.setLocation(t,r)},e.prototype.createEdgeSetIntersector=function(){return new Yh},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var r=e.next(),n=r.getLabel().getLocation(t),i=r.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Ac&&(this._useBoundaryDeterminationRule=!1),e instanceof Lc)this.addPolygon(e);else if(e instanceof Mc)this.addLineString(e);else if(e instanceof Tc)this.addPoint(e);else if(e instanceof Rc)this.addCollection(e);else if(e instanceof xc)this.addCollection(e);else if(e instanceof Ac)this.addCollection(e);else{if(!(e instanceof wc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var r=t.getGeometryN(e);this.add(r)}},e.prototype.locate=function(t){return uu(this._parentGeom,Oc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Qh(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?su.BOUNDARY:su.INTERIOR},e}(El),np=function(){if(this._li=new Du,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new rp(0,t)}else if(2===arguments.length){var e=arguments[0],r=arguments[1],n=Xu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new rp(0,e,n),this._arg[1]=new rp(1,r,n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new rp(0,i,s),this._arg[1]=new rp(1,o,s)}};np.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},np.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var ip=function(){};ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip},ip.map=function(){if(arguments[0]instanceof Uu&&uu(arguments[1],ip.MapOp)){for(var t=arguments[0],e=arguments[1],r=new rc,n=0;n<t.getNumGeometries();n++){var i=e.map(t.getGeometryN(n));null!==i&&r.add(i)}return t.getFactory().buildGeometry(r)}if(uu(arguments[0],Qu)&&uu(arguments[1],ip.MapOp)){for(var o=arguments[0],s=arguments[1],a=new rc,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},ip.MapOp=function(){};var op=function(t){function e(){var e=arguments[0],r=arguments[1];t.call(this,e,r),this._ptLocator=new ih,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new If,this._resultPolyList=new rc,this._resultLineList=new rc,this._resultPointList=new rc,this._graph=new El(new Sf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var r=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new fl(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(r),i.add(n),r.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),r=e.getSym();e.isInResult()&&r.isInResult()&&(e.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,r,n,i){var o=new rc;return o.addAll(t),o.addAll(r),o.addAll(n),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var r=e.iterator();r.hasNext();){var n=r.next();if(this._ptLocator.locate(t,n)!==su.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new rc,e=this._edgeList.iterator();e.hasNext();){var r=e.next();r.isCollapsed()&&(e.remove(),t.add(r.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getEdges().getLabel();e.getLabel().merge(r)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var r=e.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new rc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Eh.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var r=new Sl(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var n=new Ch(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var i=new Ih(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var r=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,r)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var r=e.next();this._graph.addNode(r.getCoordinate()).setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var n=r.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,il.RIGHT),i.getLocation(1,il.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),r=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var i=0;i<2;i++)r.isNull(i)||!r.isArea()||n.isNull(i)||(0===n.getDelta(i)?r.toLine(i):(Ru.isTrue(!n.isNull(i,il.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(i,il.LEFT,n.getLocation(i,il.LEFT)),Ru.isTrue(!n.isNull(i,il.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(i,il.RIGHT,n.getLocation(i,il.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),r=e.getLabel();e.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(np);op.overlayOp=function(t,e,r){return new op(t,e).getResultGeometry(r)},op.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return op.createEmptyResult(op.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var r=e;return Sh.map(t,{interfaces_:function(){return[ip.MapOp]},map:function(t){return t.intersection(r)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),jh.overlayOp(t,e,op.INTERSECTION)},op.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return op.createEmptyResult(op.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),jh.overlayOp(t,e,op.SYMDIFFERENCE)},op.resultDimension=function(t,e,r){var n=e.getDimension(),i=r.getDimension(),o=-1;switch(t){case op.INTERSECTION:o=Math.min(n,i);break;case op.UNION:o=Math.max(n,i);break;case op.DIFFERENCE:o=n;break;case op.SYMDIFFERENCE:o=Math.max(n,i)}return o},op.createEmptyResult=function(t,e,r,n){var i=null;switch(op.resultDimension(t,e,r)){case-1:i=n.createGeometryCollection(new Array(0).fill(null));break;case 0:i=n.createPoint();break;case 1:i=n.createLineString();break;case 2:i=n.createPolygon()}return i},op.difference=function(t,e){return t.isEmpty()?op.createEmptyResult(op.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),jh.overlayOp(t,e,op.DIFFERENCE))},op.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=t.getLocation(0),n=t.getLocation(1);return op.isResultOfOp(r,n,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===su.BOUNDARY&&(i=su.INTERIOR),o===su.BOUNDARY&&(o=su.INTERIOR),s){case op.INTERSECTION:return i===su.INTERIOR&&o===su.INTERIOR;case op.UNION:return i===su.INTERIOR||o===su.INTERIOR;case op.DIFFERENCE:return i===su.INTERIOR&&o!==su.INTERIOR;case op.SYMDIFFERENCE:return i===su.INTERIOR&&o!==su.INTERIOR||i!==su.INTERIOR&&o===su.INTERIOR}return!1}},op.INTERSECTION=1,op.UNION=2,op.DIFFERENCE=3,op.SYMDIFFERENCE=4;var sp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new ih,this._seg=new Wl;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};sp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var r=this._linework.getGeometryN(e).getCoordinateSequence(),n=0;n<r.size()-1;n++)if(r.getCoordinate(n,this._seg.p0),r.getCoordinate(n+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},sp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?su.BOUNDARY:this._ptLocator.locate(t,this._g)},sp.prototype.extractLinework=function(t){var e=new ap;t.apply(e);var r=e.getLinework(),n=Zc.toLineStringArray(r);return t.getFactory().createMultiLineString(n)},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp};var ap=function(){this._linework=null,this._linework=new rc};ap.prototype.getLinework=function(){return this._linework},ap.prototype.filter=function(t){if(t instanceof Lc){var e=t;this._linework.add(e.getExteriorRing());for(var r=0;r<e.getNumInteriorRing();r++)this._linework.add(e.getInteriorRingN(r))}},ap.prototype.interfaces_=function(){return[_c]},ap.prototype.getClass=function(){return ap};var up=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};up.prototype.extractPoints=function(t,e,r){for(var n=t.getCoordinates(),i=0;i<n.length-1;i++)this.computeOffsetPoints(n[i],n[i+1],e,r)},up.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},up.prototype.getPoints=function(t){for(var e=new rc,r=nh.getLines(this._g).iterator();r.hasNext();){var n=r.next();this.extractPoints(n,t,e)}return e},up.prototype.computeOffsetPoints=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=r*i/s,u=r*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var f=new ru(c-u,l+a);n.add(f)}if(this._doRight){var h=new ru(c+u,l-a);n.add(h)}},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up};var cp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new rc;var e=arguments[0],r=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,r),this._geom=[e,r,n],this._locFinder=[new sp(this._geom[0],this._boundaryDistanceTolerance),new sp(this._geom[1],this._boundaryDistanceTolerance),new sp(this._geom[2],this._boundaryDistanceTolerance)]},lp={TOLERANCE:{configurable:!0}};cp.prototype.reportResult=function(t,e,r){xu.out.println("Overlay result invalid - A:"+su.toLocationSymbol(e[0])+" B:"+su.toLocationSymbol(e[1])+" expected:"+(r?"i":"e")+" actual:"+su.toLocationSymbol(e[2]))},cp.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},cp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var r=this._testCoords.get(e);if(!this.checkValid(t,r))return this._invalidLocation=r,!1}return!0}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!cp.hasLocation(this._location,su.BOUNDARY)||this.isValidResult(n,this._location)}},cp.prototype.addTestPts=function(t){var e=new up(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},cp.prototype.isValidResult=function(t,e){var r=op.isResultOfOp(e[0],e[1],t),n=!(r^e[2]===su.INTERIOR);return n||this.reportResult(t,e,r),n},cp.prototype.getInvalidLocation=function(){return this._invalidLocation},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.hasLocation=function(t,e){for(var r=0;r<3;r++)if(t[r]===e)return!0;return!1},cp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Nh.computeSizeBasedSnapTolerance(t),Nh.computeSizeBasedSnapTolerance(e))},cp.isValid=function(t,e,r,n){return new cp(t,e,n).isValid(r)},lp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(cp,lp);var fp=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};fp.prototype.extractElements=function(t,e){if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var n=t.getGeometryN(r);this._skipEmpty&&n.isEmpty()||e.add(n)}},fp.prototype.combine=function(){for(var t=new rc,e=this._inputGeoms.iterator();e.hasNext();){var r=e.next();this.extractElements(r,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.combine=function(){if(1===arguments.length){var t=arguments[0];return new fp(t).combine()}if(2===arguments.length){var e=arguments[0],r=arguments[1];return new fp(fp.createList(e,r)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];return new fp(fp.createList(n,i,o)).combine()}},fp.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},fp.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],r=new rc;return r.add(t),r.add(e),r}if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2],s=new rc;return s.add(n),s.add(i),s.add(o),s}};var hp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new rc)},pp={STRTREE_NODE_CAPACITY:{configurable:!0}};hp.prototype.reduceToGeometries=function(t){for(var e=new rc,r=t.iterator();r.hasNext();){var n=r.next(),i=null;uu(n,ec)?i=this.unionTree(n):n instanceof Uu&&(i=n),e.add(i)}return e},hp.prototype.extractByEnvelope=function(t,e,r){for(var n=new rc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?n.add(o):r.add(o)}return this._geomFactory.buildGeometry(n)},hp.prototype.unionOptimized=function(t,e){var r=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!r.intersects(n))return fp.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=r.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,i)},hp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new jl(hp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var r=e.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},hp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],r=arguments[1],n=arguments[2];if(n-r<=1){var i=hp.getGeometry(e,r);return this.unionSafe(i,null)}if(n-r==2)return this.unionSafe(hp.getGeometry(e,r),hp.getGeometry(e,r+1));var o=Math.trunc((n+r)/2),s=this.binaryUnion(e,r,o),a=this.binaryUnion(e,o,n);return this.unionSafe(s,a)}},hp.prototype.repeatedUnion=function(t){for(var e=null,r=t.iterator();r.hasNext();){var n=r.next();e=null===e?n.copy():e.union(n)}return e},hp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},hp.prototype.unionActual=function(t,e){return hp.restrictToPolygons(t.union(e))},hp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},hp.prototype.unionUsingEnvelopeIntersection=function(t,e,r){var n=new rc,i=this.extractByEnvelope(r,t,n),o=this.extractByEnvelope(r,e,n),s=this.unionActual(i,o);return n.add(s),fp.combine(n)},hp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],r=arguments[1];return e.getFactory().createGeometryCollection([e,r]).buffer(0)}},hp.prototype.interfaces_=function(){return[]},hp.prototype.getClass=function(){return hp},hp.restrictToPolygons=function(t){if(uu(t,Oc))return t;var e=rh.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Zc.toPolygonArray(e))},hp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},hp.union=function(t){return new hp(t).union()},pp.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(hp,pp);var dp=function(){};dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return op.createEmptyResult(op.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),jh.overlayOp(t,e,op.UNION)};var gp=function(){return new Ri};Ri.prototype={constructor:Ri,reset:function(){this.s=this.t=0},add:function(t){ki(yp,t,this.t),ki(this,yp.s,this.s),this.s?this.t+=yp.t:this.s=yp.t},valueOf:function(){return this.s}};var yp=new Ri,mp=1e-6,vp=Math.PI,_p=vp/2,bp=vp/4,wp=2*vp,xp=180/vp,Ep=vp/180,Sp=Math.abs,Cp=Math.atan,Ip=Math.atan2,Pp=Math.cos,Mp=Math.exp,Np=Math.log,Tp=Math.sin,Op=Math.sqrt,Lp=Math.tan,Rp={Feature:function(t,e){Fi(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)Fi(r[n].geometry,e)}},kp={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){ji(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)ji(r[n],e,0)},Polygon:function(t,e){Bi(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)Bi(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)Fi(r[n],e)}},Ap=function(t,e){t&&Rp.hasOwnProperty(t.type)?Rp[t.type](t,e):Fi(t,e)},Dp=(gp(),gp(),gp(),function(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r});Wi.invert=Wi;var Fp=function(t){function e(e){return(e=t(e[0]*Ep,e[1]*Ep))[0]*=xp,e[1]*=xp,e}return t=Hi(t[0]*Ep,t[1]*Ep,t.length>2?t[2]*Ep:0),e.invert=function(e){return(e=t.invert(e[0]*Ep,e[1]*Ep))[0]*=xp,e[1]*=xp,e},e},jp=function(){var t,e=[];return{point:function(e,r){t.push([e,r])},lineStart:function(){e.push(t=[])},lineEnd:Di,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}},Bp=function(t,e,r,n,i,o){var s,a=t[0],u=t[1],c=0,l=1,f=e[0]-a,h=e[1]-u;if(s=r-a,f||!(s>0)){if(s/=f,f<0){if(s<c)return;s<l&&(l=s)}else if(f>0){if(s>l)return;s>c&&(c=s)}if(s=i-a,f||!(s<0)){if(s/=f,f<0){if(s>l)return;s>c&&(c=s)}else if(f>0){if(s<c)return;s<l&&(l=s)}if(s=n-u,h||!(s>0)){if(s/=h,h<0){if(s<c)return;s<l&&(l=s)}else if(h>0){if(s>l)return;s>c&&(c=s)}if(s=o-u,h||!(s<0)){if(s/=h,h<0){if(s>l)return;s>c&&(c=s)}else if(h>0){if(s<c)return;s<l&&(l=s)}return c>0&&(t[0]=a+c*f,t[1]=u+c*h),l<1&&(e[0]=a+l*f,e[1]=u+l*h),!0}}}}},Gp=function(t,e){return Sp(t[0]-e[0])<mp&&Sp(t[1]-e[1])<mp},qp=function(t,e,r,n,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,r,n=t[0],s=t[e];if(Gp(n,s)){for(i.lineStart(),o=0;o<e;++o)i.point((n=t[o])[0],n[1]);i.lineEnd()}else a.push(r=new $i(n,t,null,!0)),u.push(r.o=new $i(n,null,r,!1)),a.push(r=new $i(s,t,null,!1)),u.push(r.o=new $i(s,null,r,!0))}})),a.length){for(u.sort(e),to(a),to(u),o=0,s=u.length;o<s;++o)u[o].e=r=!r;for(var c,l,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,s=c.length;o<s;++o)i.point((l=c[o])[0],l[1]);else n(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else n(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}},Up=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},zp=(function(t){1===t.length&&(t=function(t){return function(e,r){return Up(t(e),r)}}(t))}(Up),function(t){for(var e,r,n,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(r=new Array(s);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--s]=n[e];return r}),Yp=1e9,Vp=-Yp,Xp=gp(),Wp=(gp(),function(t){return t}),Hp=(gp(),gp(),1/0),Kp=Hp,Zp=-Hp,Jp=Zp,Qp={point:function(t,e){t<Hp&&(Hp=t),t>Zp&&(Zp=t),e<Kp&&(Kp=e),e>Jp&&(Jp=e)},lineStart:Di,lineEnd:Di,polygonStart:Di,polygonEnd:Di,result:function(){var t=[[Hp,Kp],[Zp,Jp]];return Zp=Jp=-(Kp=Hp=1/0),t}},$p=(gp(),function(t,e,r,n){return function(i,o){function s(e,r){var n=i(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function a(t,e){var r=i(t,e);y.point(r[0],r[1])}function u(){w.point=a,y.lineStart()}function c(){w.point=s,y.lineEnd()}function l(t,e){g.push([t,e]);var r=i(t,e);_.point(r[0],r[1])}function f(){_.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),_.lineEnd();var t,e,r,n,i=_.clean(),s=v.result(),a=s.length;if(g.pop(),p.push(g),g=null,a)if(1&i){if((e=(r=s[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((n=r[t])[0],n[1]);o.lineEnd()}}else a>1&&2&i&&s.push(s.pop().concat(s.shift())),d.push(s.filter(ro))}var p,d,g,y=e(o),m=i.invert(n[0],n[1]),v=jp(),_=e(v),b=!1,w={point:s,lineStart:u,lineEnd:c,polygonStart:function(){w.point=l,w.lineStart=f,w.lineEnd=h,d=[],p=[]},polygonEnd:function(){w.point=s,w.lineStart=u,w.lineEnd=c,d=zp(d);var t=function(t,e){var r=e[0],n=e[1],i=[Tp(r),-Pp(r),0],o=0,s=0;Xp.reset();for(var a=0,u=t.length;a<u;++a)if(l=(c=t[a]).length)for(var c,l,f=c[l-1],h=f[0],p=f[1]/2+bp,d=Tp(p),g=Pp(p),y=0;y<l;++y,h=v,d=b,g=w,f=m){var m=c[y],v=m[0],_=m[1]/2+bp,b=Tp(_),w=Pp(_),x=v-h,E=x>=0?1:-1,S=E*x,C=S>vp,I=d*b;if(Xp.add(Ip(I*E*Tp(S),g*w+I*Pp(S))),o+=C?x+E*wp:x,C^h>=r^v>=r){var P=zi(qi(f),qi(m));Xi(P);var M=zi(i,P);Xi(M);var N=(C^x>=0?-1:1)*Ai(M[2]);(n>N||n===N&&(P[0]||P[1]))&&(s+=C^x>=0?1:-1)}}return(o<-mp||o<mp&&Xp<-mp)^1&s}(p,m);d.length?(b||(o.polygonStart(),b=!0),qp(d,no,t,r,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return w}}),td=$p((function(){return!0}),(function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?vp:-vp,u=Sp(o-r);Sp(u-vp)<mp?(t.point(r,n=(n+s)/2>0?_p:-_p),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),e=0):i!==a&&u>=vp&&(Sp(r-i)<mp&&(r-=i*mp),Sp(o-a)<mp&&(o-=a*mp),n=function(t,e,r,n){var i,o,s=Tp(t-r);return Sp(s)>mp?Cp((Tp(e)*(o=Pp(n))*Tp(r)-Tp(n)*(i=Pp(e))*Tp(t))/(i*o*s)):(e+n)/2}(r,n,o,s),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),e=0),t.point(r=o,n=s),i=a},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}}),(function(t,e,r,n){var i;if(null==t)i=r*_p,n.point(-vp,i),n.point(0,i),n.point(vp,i),n.point(vp,0),n.point(vp,-i),n.point(0,-i),n.point(-vp,-i),n.point(-vp,0),n.point(-vp,i);else if(Sp(t[0]-e[0])>mp){var o=t[0]<e[0]?vp:-vp;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])}),[-vp,-_p]),ed=function(t,e){function r(t,e){return Pp(t)*Pp(e)>o}function n(t,e,r){var n=[1,0,0],i=zi(qi(t),qi(e)),s=Ui(i,i),a=i[0],u=s-a*a;if(!u)return!r&&t;var c=o*s/u,l=-o*a/u,f=zi(n,i),h=Vi(n,c);Yi(h,Vi(i,l));var p=f,d=Ui(h,p),g=Ui(p,p),y=d*d-g*(Ui(h,h)-1);if(!(y<0)){var m=Op(y),v=Vi(p,(-d-m)/g);if(Yi(v,h),v=Gi(v),!r)return v;var _,b=t[0],w=e[0],x=t[1],E=e[1];w<b&&(_=b,b=w,w=_);var S=w-b,C=Sp(S-vp)<mp;if(!C&&E<x&&(_=x,x=E,E=_),C||S<mp?C?x+E>0^v[1]<(Sp(v[0]-b)<mp?x:E):x<=v[1]&&v[1]<=E:S>vp^(b<=v[0]&&v[0]<=w)){var I=Vi(p,(-d+m)/g);return Yi(I,h),[v,Gi(I)]}}}function i(e,r){var n=s?t:vp-t,i=0;return e<-n?i|=1:e>n&&(i|=2),r<-n?i|=4:r>n&&(i|=8),i}var o=Pp(t),s=o>0,a=Sp(o)>mp;return $p(r,(function(t){var e,o,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var p,d=[f,h],g=r(f,h),y=s?g?0:i(f,h):g?i(f+(f<0?vp:-vp),h):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(p=n(e,d))||Gp(e,p)||Gp(d,p))&&(d[0]+=mp,d[1]+=mp,g=r(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=n(d,e),t.point(p[0],p[1])):(p=n(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(a&&e&&s^g){var m;y&o||!(m=n(d,e,!0))||(l=0,s?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Gp(e,d)||t.point(d[0],d[1]),e=d,u=g,o=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(r,n,i,o){!function(t,e,r,n,i,o){if(r){var s=Pp(e),a=Tp(e),u=n*r;null==i?(i=e+n*wp,o=e-u/2):(i=Qi(s,i),o=Qi(s,o),(n>0?i<o:i>o)&&(i+=n*wp));for(var c,l=i;n>0?l>o:l<o;l-=u)c=Gi([s,-a*Pp(l),-a*Tp(l)]),t.point(c[0],c[1])}}(o,t,e,i,r,n)}),s?[0,-t]:[-vp,t-vp])};oo.prototype={constructor:oo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var rd=16,nd=Pp(30*Ep),id=function(t,e){return+e?function(t,e){function r(n,i,o,s,a,u,c,l,f,h,p,d,g,y){var m=c-n,v=l-i,_=m*m+v*v;if(_>4*e&&g--){var b=s+h,w=a+p,x=u+d,E=Op(b*b+w*w+x*x),S=Ai(x/=E),C=Sp(Sp(x)-1)<mp||Sp(o-f)<mp?(o+f)/2:Ip(w,b),I=t(C,S),P=I[0],M=I[1],N=P-n,T=M-i,O=v*N-m*T;(O*O/_>e||Sp((m*N+v*T)/_-.5)>.3||s*h+a*p+u*d<nd)&&(r(n,i,o,s,a,u,P,M,C,b/=E,w/=E,x,g,y),y.point(P,M),r(P,M,C,b,w,x,c,l,f,h,p,d,g,y))}}return function(e){function n(r,n){r=t(r,n),e.point(r[0],r[1])}function i(){m=NaN,x.point=o,e.lineStart()}function o(n,i){var o=qi([n,i]),s=t(n,i);r(m,v,y,_,b,w,m=s[0],v=s[1],y=n,_=o[0],b=o[1],w=o[2],rd,e),e.point(m,v)}function s(){x.point=n,e.lineEnd()}function a(){i(),x.point=u,x.lineEnd=c}function u(t,e){o(l=t,e),f=m,h=v,p=_,d=b,g=w,x.point=o}function c(){r(m,v,y,_,b,w,f,h,l,p,d,g,rd,e),x.lineEnd=s,s()}var l,f,h,p,d,g,y,m,v,_,b,w,x={point:n,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),x.lineStart=a},polygonEnd:function(){e.polygonEnd(),x.lineStart=i}};return x}}(t,e):function(t){return io({point:function(e,r){e=t(e,r),this.stream.point(e[0],e[1])}})}(t)},od=io({point:function(t,e){this.stream.point(t*Ep,e*Ep)}});ao.invert=function(t,e){return[t,2*Cp(Mp(e))-_p]},uo.invert=function(t,e){return[-e,2*Cp(Mp(t))-_p]};var sd=function(){var t=function(t){function e(){var e=vp*a(),s=o(Fp(o.rotate()).invert([0,0]));return c(null==l?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===ao?[[Math.max(s[0]-e,l),r],[Math.min(s[0]+e,n),i]]:[[l,Math.max(s[1]-e,r)],[n,Math.min(s[1]+e,i)]])}var r,n,i,o=function(t){return function(t){function e(t){return[(t=c(t[0]*Ep,t[1]*Ep))[0]*g+s,a-t[1]*g]}function r(t,e){return[(t=o(t,e))[0]*g+s,a-t[1]*g]}function n(){c=Dp(u=Hi(b,w,x),o);var t=o(v,_);return s=y-t[0]*g,a=m+t[1]*g,i()}function i(){return p=d=null,e}var o,s,a,u,c,l,f,h,p,d,g=150,y=480,m=250,v=0,_=0,b=0,w=0,x=0,E=null,S=td,C=null,I=Wp,P=.5,M=id(r,P);return e.stream=function(t){return p&&d===t?p:p=od(S(u,M(I(d=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?ed(E=t*Ep,6*Ep):(E=null,td),i()):E*xp},e.clipExtent=function(t){return arguments.length?(I=null==t?(C=l=f=h=null,Wp):eo(C=+t[0][0],l=+t[0][1],f=+t[1][0],h=+t[1][1]),i()):null==C?null:[[C,l],[f,h]]},e.scale=function(t){return arguments.length?(g=+t,n()):g},e.translate=function(t){return arguments.length?(y=+t[0],m=+t[1],n()):[y,m]},e.center=function(t){return arguments.length?(v=t[0]%360*Ep,_=t[1]%360*Ep,n()):[v*xp,_*xp]},e.rotate=function(t){return arguments.length?(b=t[0]%360*Ep,w=t[1]%360*Ep,x=t.length>2?t[2]%360*Ep:0,n()):[b*xp,w*xp,x*xp]},e.precision=function(t){return arguments.length?(M=id(r,P=t*t),i()):Op(P)},e.fitExtent=function(t,r){return so(e,t,r)},e.fitSize=function(t,r){return function(t,e,r){return so(t,[[0,0],e],r)}(e,t,r)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=c.invert((t[0]-s)/g,(a-t[1])/g))&&[t[0]*xp,t[1]*xp]},n()}}((function(){return t}))()}(t),s=o.center,a=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?l=r=n=i=null:(l=+t[0][0],r=+t[0][1],n=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,r],[n,i]]},e()}(uo),e=t.center,r=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?r([t[0],t[1],t.length>2?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90]).scale(159.155)};t.projection=ls,t.random=Wa,t.clusters=Ha,t.helpers=Io,t.invariant=Mo,t.meta=Po,t.isolines=function(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},o=r.breaksProperties||[];if(H(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!S(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;H(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return O(t,(function(t){var e=Y(t)[1];r[e]||(r[e]=[]),r[e].push(t)})),Object.keys(r).map((function(t){return r[t].sort((function(t,e){return Y(t)[0]-Y(e)[0]}))})).sort((function(t,r){return e?Y(t[0])[1]-Y(r[0])[1]:Y(r[0])[1]-Y(t[0])[1]}))}(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var f=u[l];f.properties[r]?c.push(f.properties[r]):c.push(0),!0===i&&(f.properties.matrixPosition=[a,l])}s.push(c)}return s}(t,{zProperty:n,flip:!0});return c(function(t,e,r){var n=U(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,c=e.length-1,l=i/u,f=o/c,h=function(t){t[0]=t[0]*l+s,t[1]=t[1]*f+a};return t.forEach((function(t){P(t,h)})),t}(function(t,e,r,n,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},n,i[s]);u[r]=a;var c=l(Q(t,a),u);o.push(c)}return o}(s,e,n,i,o),s,t))},t.convex=Pt,t.pointsWithinPolygon=Tt,t.concave=function(t,r){if(!S(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("points is required");var n=r.maxEdge||1/0;if(!E(n))throw new Error("maxEdge is invalid");var i=Ot(function(t){var e=[],r={};return O(t,(function(t){if(t.geometry){var n=t.geometry.coordinates.join("-");r.hasOwnProperty(n)||(e.push(t),r[n]=!0)}})),c(e)}(t));if(i.features=i.features.filter((function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=At(e,i,r),a=At(i,o,r),u=At(e,o,r);return s<=n&&a<=n&&u<=n})),i.features.length<1)return null;var o=Ht(i,r);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,r,n){var i=Lo(6),o=e.features.map((function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[r]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=U(t),r=[];i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach((function(e){Mt([e.minX,e.minY],t)&&r.push(e.property)})),t.properties[n]=r})),t},t.flip=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=Dt(t)),P(t,(function(t){var e=t[0],r=t[1];t[0]=r,t[1]=e})),t},t.simplify=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=void 0!==e.tolerance?e.tolerance:1,n=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(r&&r<0)throw new Error("invalid tolerance");return!0!==i&&(t=Dt(t)),k(t,(function(t){!function(t,e,r){var n=t.type;if("Point"===n||"MultiPoint"===n)return t;Kt(t,!0);var i=t.coordinates;switch(n){case"LineString":t.coordinates=te(i,e,r);break;case"MultiLineString":t.coordinates=i.map((function(t){return te(t,e,r)}));break;case"Polygon":t.coordinates=ee(i,e,r);break;case"MultiPolygon":t.coordinates=i.map((function(t){return ee(t,e,r)}))}}(t,r,n)})),t},t.bezierSpline=re,t.tag=function(t,e,r,n){return t=Dt(t),e=Dt(e),O(t,(function(t){t.properties||(t.properties={}),O(e,(function(e){void 0===t.properties[n]&&Mt(t,e)&&(t.properties[n]=e.properties[r])}))})),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return c(function(t,e){for(var r,n,i=t.slice(0),o=t.length,s=o-e;o-- >s;)r=i[n=Math.floor((o+1)*Math.random())],i[n]=i[o],i[o]=r;return i.slice(s)}(t.features,e))},t.envelope=ie,t.square=oe,t.circle=ae,t.midpoint=function(t,e){return se(t,At(t,e)/2,ue(t,e))},t.center=ce,t.centerOfMass=function t(e,r){switch(J(e)){case"Point":return e;case"Polygon":var i=[];P(e,(function(t){i.push(t)}));var o,s,a,u,c,l,f,h,p=le(e,r),d=p.geometry.coordinates,g=0,y=0,m=0,v=i.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(o=0;o<i.length-1;o++)u=(s=v[o])[0],l=s[1],c=(a=v[o+1])[0],m+=h=u*(f=a[1])-c*l,g+=(u+c)*h,y+=(l+f)*h;if(0===m)return p;var _=1/(.5*m*6);return n([d[0]+_*g,d[1]+_*y],r);default:var b=Pt(e);return b?t(b,r):le(e,r)}},t.centroid=le,t.combine=function(t){function r(t,e,r){r?n[e].coordinates=n[e].coordinates.concat(t.geometry.coordinates):n[e].coordinates.push(t.geometry.coordinates),n[e].properties.push(t.properties)}var n={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(n).reduce((function(t,e){return t[e.replace("Multi","")]=e,t}),{});return O(t,(function(t){t.geometry&&(n[t.geometry.type]?r(t,t.geometry.type,!0):i[t.geometry.type]&&r(t,i[t.geometry.type],!1))})),c(Object.keys(n).filter((function(t){return n[t].coordinates.length})).sort().map((function(t){return e({type:t,coordinates:n[t].coordinates},{collectedProperties:n[t].properties})})))},t.distance=At,t.explode=fe,t.bbox=U,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Pe(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Pe(t))})),e},t.bboxPolygon=ne,t.booleanPointInPolygon=Mt,t.nearestPoint=Me,t.nearestPointOnLine=Ke,t.nearestPointToLine=function(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.units,i=r.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return k(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==J(e))throw new Error("line must be a LineString");var o=1/0,s=null;return O(t,(function(t){var r=ir(t,e,{units:n});r<o&&(o=r,s=t)})),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s},t.planepoint=function(t,e){var r=z(t),n=K(e).coordinates[0];if(n.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=r[0],c=r[1],l=n[0][0],f=n[0][1],h=void 0!==o?o:n[0][2],p=n[1][0],d=n[1][1],g=void 0!==s?s:n[1][2],y=n[2][0],m=n[2][1],v=void 0!==a?a:n[2][2];return(v*(u-l)*(c-d)+h*(u-p)*(c-m)+g*(u-y)*(c-f)-g*(u-l)*(c-m)-v*(u-p)*(c-f)-h*(u-y)*(c-d))/((u-l)*(c-d)+(u-p)*(c-m)+(u-y)*(c-f)-(u-l)*(c-m)-(u-p)*(c-f)-(u-y)*(c-d))},t.tin=Ot,t.bearing=ue,t.destination=se,t.kinks=function(t){var e,r,i={type:"FeatureCollection",features:[]};if("LineString"===(r="Feature"===t.type?t.geometry:t).type)e=[r.coordinates];else if("MultiLineString"===r.type)e=r.coordinates;else if("MultiPolygon"===r.type)e=[].concat.apply([],r.coordinates);else{if("Polygon"!==r.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=r.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var r=0;r<t.length-1;r++)for(var o=r;o<e.length-1;o++){if(t===e){if(1===Math.abs(r-o))continue;if(0===r&&o===t.length-2&&t[r][0]===t[t.length-1][0]&&t[r][1]===t[t.length-1][1])continue}var s=function(t,e,r,n,i,o,s,a){var u,c,l,f,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(r-t)-(s-i)*(n-e))?null!==h.x&&null!==h.y&&h:(f=(r-t)*(c=e-o)-(n-e)*(l=t-i),c=((s-i)*c-(a-o)*l)/u,l=f/u,h.x=t+c*(r-t),h.y=e+c*(n-e),c>=0&&c<=1&&(h.onLine1=!0),l>=0&&l<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}(t[r][0],t[r][1],t[r+1][0],t[r+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&i.features.push(n([s[0],s[1]]))}}))})),i},t.pointOnFeature=sr,t.area=ur,t.along=function(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!E(e))throw new Error("distance must be a number");for(var o=0,s=0;s<i.length&&!(e>=o&&s===i.length-1);s++){if(o>=e){var a=e-o;if(a){var u=ue(i[s],i[s-1])-180;return se(i[s],a,u,r)}return n(i[s])}o+=At(i[s],i[s+1],r)}return n(i[i.length-1])},t.length=hr,t.lineSlice=function(t,e,r){var n=Y(r);if("LineString"!==J(r))throw new Error("line must be a LineString");for(var i,o=Ke(r,t),s=Ke(r,e),u=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(n[c]);return u.push(i[1].geometry.coordinates),a(u,r.properties)},t.lineSliceAlong=pr,t.pointGrid=vr,t.truncate=_r,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return D(t,(function(t){e.push(t)})),c(e)},t.lineIntersect=We,t.lineChunk=function(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.units,i=r.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return D(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,r,n){var i=hr(t,{units:r});if(i<=e)return n(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)n(pr(t,e*s,e*(s+1),{units:r}))}(t,e,n,(function(t){o.push(t)}))})),c(o)},t.unkinkPolygon=function(t){var e=[];return D(t,(function(t){"Polygon"===t.geometry.type&&O(hs(t),(function(r){e.push(o(r.geometry.coordinates,t.properties))}))})),c(e)},t.greatCircle=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.properties,i=r.npoints,o=r.offset;return t=z(t),e=z(e),n=n||{},i=i||100,o=o||10,new bs({x:t[0],y:t[1]},{x:e[0],y:e[1]},n).Arc(i,{offset:o}).json()},t.lineSegment=Xe,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var r=J(t),n=J(e);if("LineString"!==r)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var i=_r(e,{precision:7});switch(n){case"Point":return Sr(t,i);case"MultiPoint":return Er(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Er(t,We(t,i))}},t.lineArc=Pr,t.polygonToLine=Nr,t.lineToPolygon=Or,t.bboxClip=function(t,e){var r=function(t){return t.geometry?t.geometry.type:t.type}(t),n=Y(t),i=t.properties;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(n=[n]),n.forEach((function(t){ws(t,e,s)})),1===s.length?a(s[0],i):l(s,i);case"Polygon":return o(Fr(n,e),i);case"MultiPolygon":return h(n.map((function(t){return Fr(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},t.lineOverlap=Ur,t.sector=function(t,e,r,n,i){if(!S(i=i||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==r)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Yr(r)===Yr(n))return ae(t,e,i);var s=Y(t),a=[[s]];return P(Pr(t,e,r,n,i),(function(t){a[0].push(t)})),a[0].push(s),o(a)},t.rhumbBearing=Ze,t.rhumbDistance=Qe,t.rhumbDestination=Vr,t.polygonTangents=function(t,e){var r,i,o,s=Y(t),a=Y(e);switch(J(e)){case"Polygon":r=a[0][0],i=a[0][0],o=Wr(a[0][0],a[0][a[0].length-1],s);var u=Xr(a[0],s,o,void 0,r,i);r=u[0],i=u[1];break;case"MultiPolygon":r=a[0][0][0],i=a[0][0][0],o=Wr(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach((function(t){var e=Xr(t[0],s,o,void 0,r,i);r=e[0],i=e[1]}))}return c([n(r),n(i)])},t.rewind=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.reverse||!1,n=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof r)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof n)throw new Error("<mutate> must be a boolean");!1===n&&(t=Dt(t));var i=[];switch(t.type){case"GeometryCollection":return k(t,(function(t){Kr(t,r)})),t;case"FeatureCollection":return O(t,(function(t){O(Kr(t,r),(function(t){i.push(t)}))})),c(i)}return Kr(t,r)},t.isobands=function(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.zProperty||"elevation",i=r.commonProperties||{},s=r.breaksProperties||[];if(H(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!S(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(s))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.zProperty||"elevation",n=e.flip,i=e.flags;H(t,"Point","input must contain Points");for(var o=function(t,e){var r={};return O(t,(function(t){var e=Y(t)[1];r[e]||(r[e]=[]),r[e].push(t)})),Object.keys(r).map((function(t){return r[t].sort((function(t,e){return Y(t)[0]-Y(e)[0]}))})).sort((function(t,r){return e?Y(t[0])[1]-Y(r[0])[1]:Y(r[0])[1]-Y(t[0])[1]}))}(t,n),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var f=u[l];f.properties[r]?c.push(f.properties[r]):c.push(0),!0===i&&(f.properties.matrixPosition=[a,l])}s.push(c)}return s}(t,{zProperty:n,flip:!0}),u=function(t,e,r){for(var n=[],i=1;i<e.length;i++){var s=+e[i-1],a=+e[i],u=function(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),r=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var n=0;n<e.length;n++)if(!e[n].grouped){var i=[];i.push(e[n].lrCoordinates),e[n].grouped=!0;for(var s=o([e[n].lrCoordinates]),a=n+1;a<e.length;a++)e[a].grouped||function(t,e){for(var r=fe(t),n=0;n<r.features.length;n++)if(!Mt(r.features[n],e))return!1;return!0}(o([e[a].lrCoordinates]),s)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0);r.push(i)}return r}(function(t){var e=[],r=[];t.forEach((function(t){var n=ur(o([t]));r.push(n),e.push({ring:t,area:n})})),r.sort((function(t,e){return e-t}));var n=[];return r.forEach((function(t){for(var r=0;r<e.length;r++)if(e[r].area===t){n.push(e[r].ring),e.splice(r,1);break}})),n}(Qr(t,s,a-s))),c={};c.groupedRings=u,c[r]=s+"-"+a,n.push(c)}return n}(a,e,n);return c((u=function(t,e,r){var n=U(r),i=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],u=e[0].length-1,c=e.length-1,l=i/u,f=o/c,h=function(t){t[0]=t[0]*l+s,t[1]=t[1]*f+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(h)}))}))})),t}(u,a,t)).map((function(t,e){if(s[e]&&!S(s[e]))throw new Error("Each mappedProperty is required to be an Object");var r=Object.assign({},i,s[e]);return r[n]=t[n],h(t.groupedRings,r)})))},t.transformRotate=en,t.transformScale=rn,t.transformTranslate=function(t,e,r,n){if(!S(n=n||{}))throw new Error("options is invalid");var i=n.units,o=n.zTranslation,s=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return e<0&&(e=-e,r=-r),!1!==s&&void 0!==s||(t=Dt(t)),P(t,(function(t){var n=Y(Vr(t,e,r,{units:i}));t[0]=n[0],t[1]=n[1],o&&3===t.length&&(t[2]+=o)})),t},t.lineOffset=function(t,e,r){if(!S(r=r||{}))throw new Error("options is invalid");var n=r.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=J(t),o=t.properties;switch(i){case"LineString":return an(t,e,n);case"MultiLineString":var s=[];return D(t,(function(t){s.push(an(t,e,n).geometry.coordinates)})),l(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.polygonize=function(t){var e=ba.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var r=[],n=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?r.push(t):n.push(t)})),r.forEach((function(t){va.findEdgeRingContaining(t,n)&&n.push(t)})),c(n.map((function(t){return t.toPolygon()})))},t.booleanDisjoint=function(t,e){var r;return D(t,(function(t){D(e,(function(e){if(!1===r)return!1;r=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!ln(e,t);case"Polygon":return!Mt(t,e)}break;case"LineString":switch(e.type){case"Point":return!ln(t,e);case"LineString":return!function(t,e){return We(t,e).features.length>0}(t,e);case"Polygon":return!fn(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Mt(e,t);case"LineString":return!fn(t,e);case"Polygon":return!function(t,e){for(var r=0;r<t.coordinates[0].length;r++)if(Mt(t.coordinates[0][r],e))return!0;for(var n=0;n<e.coordinates[0].length;n++)if(Mt(e.coordinates[0][n],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry)}))})),r},t.booleanContains=function(t,e){var r=J(t),n=J(e),i=K(t),o=K(e),s=Y(t),a=Y(e);switch(r){case"Point":switch(n){case"Point":return pn(s,a);default:throw new Error("feature2 "+n+" geometry not supported")}case"MultiPoint":switch(n){case"Point":return function(t,e){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(pn(t.coordinates[r],e.coordinates)){n=!0;break}return n}(i,o);case"MultiPoint":return function(t,e){for(var r=0;r<e.coordinates.length;r++){for(var n=!1,i=0;i<t.coordinates.length;i++)if(pn(e.coordinates[r],t.coordinates[i])){n=!0;break}if(!n)return!1}return!0}(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}case"LineString":switch(n){case"Point":return dr(o,i,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var r=!1,n=0;n<e.coordinates.length;n++)if(dr({type:"Point",coordinates:e.coordinates[n]},t,{ignoreEndVertices:!0})&&(r=!0),!dr({type:"Point",coordinates:e.coordinates[n]},t,{ignoreEndVertices:!1}))return!1;return r}(i,o);case"MultiPoint":return function(t,e){for(var r=!1,n=0;n<e.coordinates.length;n++)if(dr(e.coordinates[n],t,{ignoreEndVertices:!0})&&(r=!0),!dr(e.coordinates[n],t))return!1;return!!r}(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}case"Polygon":switch(n){case"Point":return Mt(o,i,{ignoreBoundary:!0});case"LineString":return function(t,e){var r=!1,n=0;if(!hn(U(t),U(e)))return!1;for(;n<e.coordinates.length-1;n++)if(Mt({type:"Point",coordinates:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[n],e.coordinates[n+1])},t,{ignoreBoundary:!0})){r=!0;break}return r}(i,o);case"Polygon":return function(t,e){if(!hn(U(t),U(e)))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!Mt(e.coordinates[0][r],t))return!1;return!0}(i,o);case"MultiPoint":return function(t,e){for(var r=0;r<e.coordinates.length;r++)if(!Mt(e.coordinates[r],t,{ignoreBoundary:!0}))return!1;return!0}(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},t.booleanCrosses=function(t,e){var r=J(t),n=J(e),i=K(t),o=K(e);switch(r){case"MultiPoint":switch(n){case"LineString":return dn(i,o);case"Polygon":return yn(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}case"LineString":switch(n){case"MultiPoint":return dn(o,i);case"LineString":return function(t,e){if(We(t,e).features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var n=0;n<e.coordinates.length-1;n++){var i=!0;if(0!==n&&n!==e.coordinates.length-2||(i=!1),mn(t.coordinates[r],t.coordinates[r+1],e.coordinates[n],i))return!0}return!1}(i,o);case"Polygon":return gn(i,o);default:throw new Error("feature2 "+n+" geometry not supported")}case"Polygon":switch(n){case"MultiPoint":return yn(o,i);case"LineString":return gn(o,i);default:throw new Error("feature2 "+n+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},t.booleanClockwise=Hr,t.booleanOverlap=wn,t.booleanPointOnLine=dr,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return J(t)===J(e)&&new Ca({precision:6}).compare(Kt(t),Kt(e))},t.booleanWithin=gr,t.clone=Dt,t.cleanCoords=Kt,t.clustersDbscan=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.minPoints,i=r.units;if(H(t,"Point","Input must contain Points"),null==e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(null==n||Math.sign(n)>0))throw new Error("Invalid minPoints");t=Dt(t),n=n||3;var o=new Ta.DBSCAN,s=-1;return o.run(R(t),w(e,i),n,At).forEach((function(e){s++,e.forEach((function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster=s,r.properties.dbscan="core"}))})),o.noise.forEach((function(e){var r=t.features[e];r.properties||(r.properties={}),r.properties.cluster?r.properties.dbscan="edge":r.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var r=e.numberOfClusters,n=e.mutate;H(t,"Point","Input must contain Points");var i=t.features.length;(r=r||Math.round(Math.sqrt(i/2)))>i&&(r=i),!1!==n&&void 0!==n||(t=Dt(t));var o=R(t),s=o.slice(0,r),a=Aa(o,r,s),u={};return a.centroids.forEach((function(t,e){u[e]=t})),O(t,(function(t,e){var r=a.idxs[e];t.properties.cluster=r,t.properties.centroid=u[r]})),t},t.pointToLineDistance=ir,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==En(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==En(e,"line2"))throw new Error("line2 must be a LineString");for(var r=Xe(Kt(t)).features,n=Xe(Kt(e)).features,i=0;i<r.length;i++){var o=r[i].geometry.coordinates;if(!n[i])break;if(!function(t,e){return v(Ze(t[0],t[1]))===v(Ze(e[0],e[1]))}(o,n[i].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,r,i){if(!S(i=i||{}))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!r)throw new Error("end is required");if(o&&!E(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var l=z(t),f=z(r);switch(t=n(l),r=n(f),J(u)){case"FeatureCollection":if(0===u.features.length)return a([l,f]);break;case"Polygon":u=c([e(K(u))]);break;default:throw new Error("invalid obstacles")}var h=u;h.features.push(t),h.features.push(r);var p=U(rn(ne(U(h)),1.15));o||(o=At([p[0],p[1]],[p[2],p[1]],i)/100),h.features.pop(),h.features.pop();for(var d=p[0],g=p[1],y=p[2],m=p[3],v=o/At([d,g],[y,g],i)*(y-d),_=o/At([d,g],[d,m],i)*(m-g),b=y-d,w=m-g,x=(b-Math.floor(b/v)*v)/2,C=[],I=[],P=[],M=[],N=1/0,T=1/0,O=m-(w-Math.floor(w/_)*_)/2,L=0;O>=g;){for(var R=[],k=[],A=d+x,D=0;A<=y;){var F=n([A,O]),j=function(t,e){for(var r=0;r<e.features.length;r++)if(Mt(t,e.features[r]))return!0;return!1}(F,u);R.push(j?0:1),k.push(A+"|"+O);var B=At(F,t);!j&&B<N&&(N=B,P={x:D,y:L});var G=At(F,r);!j&&G<T&&(T=G,M={x:D,y:L}),A+=v,D++}I.push(R),C.push(k),O-=_,L++}var q=new Cn(I,{diagonal:!0}),Y=q.grid[P.y][P.x],V=q.grid[M.y][M.x],X=[l];return Da.search(q,Y,V).forEach((function(t){var e=C[t.x][t.y].split("|");X.push([+e[0],+e[1]])})),X.push(f),Kt(a(X))},t.voronoi=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(r))throw new Error("bbox is invalid");return H(t,"Point","points"),c(function(){function t(t){return new Qn(t.map((function(n,i){var o=[Math.round(e(n,i,t)/Va)*Va,Math.round(r(n,i,t)/Va)*Va];return o.index=i,o.data=n,o})),n)}var e=Mn,r=Nn,n=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(r){return arguments.length?(e="function"==typeof r?r:Fa(+r),t):e},t.y=function(e){return arguments.length?(r="function"==typeof e?e:Fa(+e),t):r},t.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},t.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],t):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},t}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[r[0],r[1]],[r[2],r[3]]]).polygons(t.features).map($n))},t.ellipse=ti,t.centerMean=ri,t.centerMedian=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.counter||10;if(!E(r))throw new Error("counter must be a number");var n=e.weight,i=ri(t,{weight:e.weight}),o=c([]);return O(t,(function(t){o.features.push(le(t,{weight:t.properties[n]}))})),o.properties={tolerance:e.tolerance,medianCandidates:[]},ni(i.geometry.coordinates,[0,0],o,r)},t.standardDeviationalEllipse=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,n=e.weight,i=e.properties||{};if(!E(r))throw new Error("steps must be a number");if(!S(i))throw new Error("properties must be a number");var o=R(t).length,s=ri(t,{weight:n}),a=0,u=0,l=0;O(t,(function(t){var e=t.properties[n]||1,r=ii(Y(t),Y(s));a+=Math.pow(r.x,2)*e,u+=Math.pow(r.y,2)*e,l+=r.x*r.y*e}));var f=a-u,h=Math.sqrt(Math.pow(f,2)+4*Math.pow(l,2)),p=2*l,d=Math.atan((f+h)/p),g=180*d/Math.PI,y=0,m=0,v=0;O(t,(function(t){var e=t.properties[n]||1,r=ii(Y(t),Y(s));y+=Math.pow(r.x*Math.cos(d)-r.y*Math.sin(d),2)*e,m+=Math.pow(r.x*Math.sin(d)+r.y*Math.cos(d),2)*e,v+=e}));var _=Math.sqrt(2*y/v),b=Math.sqrt(2*m/v),w=ti(s,_,b,{units:"degrees",angle:g,steps:r,properties:i}),x=Tt(t,c([w])),C={meanCenterCoordinates:Y(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*R(x).length/o};return w.properties.standardDeviationalEllipse=C,w},t.difference=function(t,r){var n=K(t),i=K(r),o=t.properties||{};if(n=Li(n),i=Li(i),!n)return null;if(!i)return e(n,o);var s=new rl,a=s.read(n),u=s.read(i),c=op.difference(a,u);return c.isEmpty()?null:e((new nl).write(c),o)},t.buffer=function(t,e,r){var n=(r=r||{}).units,i=r.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof r)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,n=n||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return k(t,(function(t){var r=co(t,e,n,i);r&&o.push(r)})),c(o);case"FeatureCollection":return O(t,(function(t){var r=co(t,e,n,i);r&&O(r,(function(t){t&&o.push(t)}))})),c(o)}return co(t,e,n,i)},t.union=po,t.intersect=go,t.dissolve=function(t,e){if(!S(e=e||{}))throw new Error("options is invalid");var r=e.propertyName;H(t,"Polygon","dissolve");var n=Dt(t),i=n.features,o=[];i.forEach((function(t,e){t.properties.origIndexPosition=e}));var s=ze();for(var u in s.load(n),i){var c=i[u],l=!1;if(s.search(c).features.forEach((function(t){c=i[u];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var n=yo(e,o);0!==n&&(e-=n)}if(e!==+u){var f=i[e];f&&c&&(void 0!==r&&f.properties[r]!==c.properties[r]||wn(c,f)&&function(t,e){return We(a(R(t)),a(R(e))).features.length>0}(c,f)&&(i[u]=po(c,f),o.push(t.properties.origIndexPosition),o.sort((function(t,e){return t-e})),s.remove(t),i.splice(e,1),c.properties.origIndexPosition=u,s.remove(c,(function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition})),l=!0))}})),l){if(!c)continue;c.properties.origIndexPosition=u,s.insert(c),u--}}return i.forEach((function(t){delete t.properties.origIndexPosition,delete t.bbox})),n},t.hexGrid=mo,t.mask=function(t,e){var r=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),n=function(t){var e=[],r=[];return D(t,(function(t){var n=t.geometry.coordinates,i=n[0],s=n.slice(1);e.push(o([i])),s.forEach((function(t){r.push(o([t]))}))})),[c(e),c(r)]}(t),i=n[0],s=n[1];return function(t,e,r){var n=[];return n.push(t.geometry.coordinates[0]),D(e,(function(t){n.push(t.geometry.coordinates[0])})),D(r,(function(t){n.push(t.geometry.coordinates[0])})),o(n)}(r,i=vo(i),s=vo(s))},t.squareGrid=bo,t.triangleGrid=wo,t.interpolate=function(t,e,r){if("object"!=typeof(r=r||{}))throw new Error("options is invalid");var n=r.gridType,i=r.property,o=r.weight;if(!t)throw new Error("points is required");if(H(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",n=n||"square",o=o||1;var s,a=U(t);switch(n){case"point":case"points":s=vr(a,e,r);break;case"square":case"squares":s=bo(a,e,r);break;case"hex":case"hexes":s=mo(a,e,r);break;case"triangle":case"triangles":s=wo(a,e,r);break;default:throw new Error("invalid gridType")}var u=[];return O(s,(function(e){var s=0,a=0;O(t,(function(t){var u,c=At("point"===n?e:le(e),t,r);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(s=u);var l=1/Math.pow(c,o);a+=l,s+=l*u}));var c=Dt(e);c.properties[i]=s/a,u.push(c)})),c(u)},t.pointOnSurface=sr,t.polygonToLineString=Nr,t.lineStringToPolygon=Or,t.inside=Mt,t.within=Tt,t.bezier=re,t.nearest=Me,t.pointOnLine=Ke,t.lineDistance=hr,t.radians2degrees=_,t.degrees2radians=b,t.distanceToDegrees=m,t.distanceToRadians=y,t.radiansToDistance=g,t.bearingToAngle=v,t.convertDistance=w,t.toMercator=$e,t.toWgs84=tr,t.randomPosition=oi,t.randomPoint=si,t.randomPolygon=ai,t.randomLineString=ui,t.getCluster=li,t.clusterEach=fi,t.clusterReduce=hi,t.createBins=pi,t.applyFilter=di,t.propertiesContainsFilter=gi,t.filterProperties=yi,t.earthRadius=xo,t.factors=Eo,t.unitsFactors=So,t.areaFactors=Co,t.feature=e,t.geometry=r,t.point=n,t.points=i,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=c,t.multiLineString=l,t.multiPoint=f,t.multiPolygon=h,t.geometryCollection=p,t.round=d,t.radiansToLength=g,t.lengthToRadians=y,t.lengthToDegrees=m,t.bearingToAzimuth=v,t.radiansToDegrees=_,t.degreesToRadians=b,t.convertLength=w,t.convertArea=x,t.isNumber=E,t.isObject=S,t.validateBBox=C,t.validateId=I,t.getCoord=z,t.getCoords=Y,t.containsNumber=V,t.geojsonType=X,t.featureOf=W,t.collectionOf=H,t.getGeom=K,t.getGeomType=Z,t.getType=J,t.coordEach=P,t.coordReduce=M,t.propEach=N,t.propReduce=T,t.featureEach=O,t.featureReduce=L,t.coordAll=R,t.geomEach=k,t.geomReduce=A,t.flattenEach=D,t.flattenReduce=F,t.segmentEach=j,t.segmentReduce=B,t.lineEach=G,t.lineReduce=q,Object.defineProperty(t,"__esModule",{value:!0})}(e)},bCCX:function(t,e,r){"use strict";r.r(e),function(t,n){var i,o=r("SLVX");i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:n;var s=Object(o.a)(i);e.default=s}.call(this,r("yLpj"),r("3UD+")(t))},iceZ:function(t,e,r){"use strict";const n=r("bCCX").default;t.exports=t=>Boolean(t&&t[n]&&t===t[n]())},klPL:function(t,e){function r(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id="klPL"},ls82:function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new P(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,s),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={};function g(){}function y(){}function m(){}var v={};v[o]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(M([])));b&&b!==r&&n.call(b,o)&&(v=b);var w=m.prototype=g.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(r,i){function o(){return new Promise((function(e,o){!function e(r,i,o,s){var a=c(t[r],t,i);if("throw"!==a.type){var u=a.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,s)}))}s(a.arg)}(r,i,e,o)}))}return e=e?e.then(o,o):o()}}function S(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function M(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:N}}function N(){return{value:e,done:!0}}return y.prototype=w.constructor=m,m.constructor=y,m[a]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(E.prototype),E.prototype[s]=function(){return this},t.AsyncIterator=E,t.async=function(e,r,n,i){var o=new E(u(e,r,n,i));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(w),w[a]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),I(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},o0o1:function(t,e,r){t.exports=r("ls82")},yLpj:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},zY86:function(t,e,r){"use strict";Symbol("thread.errors"),Symbol("thread.events"),Symbol("thread.terminate");const n=Symbol("thread.transferable");Symbol("thread.worker");function i(t){return t&&"object"==typeof t&&t[n]}r.d(e,"a",(function(){return i}))},zqkD:function(t,e,r){"use strict";var n,i;r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i})),function(t){t.run="run"}(n||(n={})),function(t){t.error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"}(i||(i={}))}});